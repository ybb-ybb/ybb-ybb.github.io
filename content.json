{"meta":{"title":"é±¼æ‘†æ‘†çš„blog","subtitle":null,"description":"è‡ªç«¥å¹´èµ·ï¼Œæˆ‘å°±ç‹¬è‡ªä¸€äººï¼Œç…§é¡¾ç€å†ä»£æ˜Ÿè¾°","author":"é±¼æ‘†æ‘†","url":""},"pages":[{"title":"about","date":"2018-12-12T14:14:36.000Z","updated":"2020-02-14T09:11:23.000Z","comments":false,"path":"about/index.html","permalink":"/about/index.html","excerpt":"","text":"[ã•ãã‚‰è˜ã®hojun] ä¸&nbsp; Mashiro&nbsp; ï¼ˆ çœŸï¼ˆã¾ï¼‰ç™½ï¼ˆã—ã‚ï¼‰ ï¼‰ å¯¹è¯ä¸­... bot_ui_ini()","keywords":"å…³äº"},{"title":"bangumi","date":"2019-02-10T13:32:48.000Z","updated":"2020-02-14T09:11:23.000Z","comments":false,"path":"bangumi/index.html","permalink":"/bangumi/index.html","excerpt":"","text":"","keywords":null},{"title":"client","date":"2018-12-20T15:13:35.000Z","updated":"2020-02-14T09:11:23.000Z","comments":false,"path":"client/index.html","permalink":"/client/index.html","excerpt":"","text":"ç›´æ¥ä¸‹è½½ or æ‰«ç ä¸‹è½½ï¼š","keywords":"Androidå®¢æˆ·ç«¯"},{"title":"comment","date":"2018-12-20T15:13:48.000Z","updated":"2020-02-14T09:11:23.000Z","comments":true,"path":"comment/index.html","permalink":"/comment/index.html","excerpt":"","text":"å¿µä¸¤å¥è¯— å™åˆ«æ¢¦ã€æ‰¬å·ä¸€è§‰ã€‚ ã€å®‹ä»£ã€‘å´æ–‡è‹±ã€Šå¤œæ¸¸å®«Â·äººå»è¥¿æ¥¼é›æ³ã€‹","keywords":"ç•™è¨€æ¿"},{"title":"donate","date":"2018-12-20T15:13:05.000Z","updated":"2020-02-14T09:11:23.000Z","comments":false,"path":"donate/index.html","permalink":"/donate/index.html","excerpt":"","text":"","keywords":"è°¢è°¢é¥²ä¸»äº†å–µ~"},{"title":"lab","date":"2019-01-05T13:47:59.000Z","updated":"2020-02-14T09:11:23.000Z","comments":false,"path":"lab/index.html","permalink":"/lab/index.html","excerpt":"","text":"sakuraä¸»é¢˜ balabala","keywords":"Labå®éªŒå®¤"},{"title":"links","date":"2018-12-19T15:11:06.000Z","updated":"2020-03-09T12:29:18.823Z","comments":true,"path":"links/index.html","permalink":"/links/index.html","excerpt":"","text":"","keywords":"å‹äººå¸"},{"title":"music","date":"2020-01-11T15:14:28.000Z","updated":"2020-03-09T12:35:33.243Z","comments":false,"path":"music/index.html","permalink":"/music/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"rss","date":"2018-12-20T15:09:03.000Z","updated":"2020-02-14T09:11:23.000Z","comments":true,"path":"rss/index.html","permalink":"/rss/index.html","excerpt":"","text":""},{"title":"theme-sakura","date":"2019-01-04T14:53:25.000Z","updated":"2020-02-14T09:11:23.000Z","comments":false,"path":"theme-sakura/index.html","permalink":"/theme-sakura/index.html","excerpt":"","text":"Hexoä¸»é¢˜Sakuraä¿®æ”¹è‡ªWordPressä¸»é¢˜Sakuraï¼Œæ„Ÿè°¢åŸä½œè€…Mashiro","keywords":"Hexo ä¸»é¢˜ Sakura ğŸŒ¸"},{"title":"tags","date":"2018-12-12T14:14:16.000Z","updated":"2020-02-14T09:11:23.000Z","comments":true,"path":"tags/index.html","permalink":"/tags/index.html","excerpt":"","text":""},{"title":"video","date":"2018-12-20T15:14:38.000Z","updated":"2020-02-14T09:11:23.000Z","comments":false,"path":"video/index.html","permalink":"/video/index.html","excerpt":"","text":"var videos = [ { img: 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: 'æ”¾é€æ—¶é—´: 2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' }, { img : 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: '2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' } ] .should-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:95%;}.should-ellipsis-full{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;}.should-ellipsis i{position:absolute;right:24px;}.grey-text{color:#9e9e9e !important}.grey-text.text-darken-4{color:#212121 !important}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}img{border-style:none}progress{display:inline-block;vertical-align:baseline}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;box-sizing:inherit}ul:not(.browser-default){padding-left:0;list-style-type:none}ul:not(.browser-default)>li{list-style-type:none}.card{-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.hoverable{-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s}.hoverable:hover{-webkit-box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}i{line-height:inherit}i.right{float:right;margin-left:15px}.bangumi .right{float:right !important}.material-icons{text-rendering:optimizeLegibility;-webkit-font-feature-settings:'liga';-moz-font-feature-settings:'liga';font-feature-settings:'liga'}.row{margin-left:auto;margin-right:auto;margin-bottom:20px}.row:after{content:\"\";display:table;clear:both}.row .col{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .75rem;min-height:1px}.row .col.s12{width:100%;margin-left:auto;left:auto;right:auto}@media only screen and (min-width:601px){.row .col.m6{width:50%;margin-left:auto;left:auto;right:auto}}html{line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;font-weight:normal;color:rgba(0,0,0,0.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}.card{position:relative;margin:.5rem 0 1rem 0;background-color:#fff;-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s;border-radius:2px}.card .card-title{font-size:24px;font-weight:300}.card .card-title.activator{cursor:pointer}.card .card-image{position:relative}.card .card-image img{display:block;border-radius:2px 2px 0 0;position:relative;left:0;right:0;top:0;bottom:0;width:100%}.card .card-content{padding:24px;border-radius:0 0 2px 2px}.card .card-content p{margin:0}.card .card-content .card-title{display:block;line-height:32px;margin-bottom:8px}.card .card-content .card-title i{line-height:32px}.card .card-reveal{padding:24px;position:absolute;background-color:#fff;width:100%;overflow-y:auto;left:0;top:100%;height:100%;z-index:3;display:none}.card .card-reveal .card-title{cursor:pointer;display:block}.waves-effect{position:relative;cursor:pointer;display:inline-block;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:middle;z-index:1;-webkit-transition:.3s ease-out;transition:.3s ease-out}.waves-effect img{position:relative;z-index:-1}.waves-block{display:block}::-webkit-input-placeholder{color:#d1d1d1}::-moz-placeholder{color:#d1d1d1}:-ms-input-placeholder{color:#d1d1d1}::-ms-input-placeholder{color:#d1d1d1}[type=\"radio\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"radio\"]:not(:checked)+span{position:relative;padding-left:35px;cursor:pointer;display:inline-block;height:25px;line-height:25px;font-size:1rem;-webkit-transition:.28s ease;transition:.28s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border-radius:50%}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border:2px solid #5a5a5a}[type=\"radio\"]:not(:checked)+span:after{-webkit-transform:scale(0);transform:scale(0)}[type=\"checkbox\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"checkbox\"]:not(:checked):disabled+span:not(.lever):before{border:none;background-color:rgba(0,0,0,0.42)}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):before{width:0;height:0;border:3px solid transparent;left:6px;top:10px;-webkit-transform:rotateZ(37deg);transform:rotateZ(37deg);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):after{height:20px;width:20px;background-color:transparent;border:2px solid #5a5a5a;top:0px;z-index:0}input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}input[type=range].focused:focus:not(.active)::-webkit-slider-thumb{-webkit-box-shadow:0 0 0 10px rgba(38,166,154,0.26);box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-ms-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)} ç•ªç»„è®¡åˆ’ è¿™é‡Œå°†æ˜¯æ°¸è¿œçš„å›å¿† window.onload = function(){ videos.forEach(function(video, i){ $('#rootRow').append(` ${video.title} ${video.jp} ${video.status} ${video.title} ${video.jp} æ”¾é€æ—¶é—´: ${video.time} ${video.desc} ${video.status} `) }) }","keywords":"Bç«™"}],"posts":[{"title":"tensorboardX","slug":"tensorboardX","date":"2020-03-09T13:31:11.839Z","updated":"2020-03-09T13:35:02.659Z","comments":true,"path":"2020/03/09/tensorboardX/","link":"","permalink":"/2020/03/09/tensorboardX/","excerpt":"","text":"åˆ›å»º TensorBoardXçš„GitHubåœ°å€ï¼šä¼ é€é—¨ é¦–å…ˆåˆ›å»ºä¸€ä¸ª SummaryWriter çš„ç¤ºä¾‹ ï¼š from tensorboardX import SummaryWriter # Creates writer1 object. # The log will be saved in 'runs/exp' writer1 = SummaryWriter('runs/exp') # Creates writer2 object with auto generated file name # The log directory will be something like 'runs/Aug20-17-20-33' writer2 = SummaryWriter() # Creates writer3 object with auto generated file name, the comment will be appended to the filename. # The log directory will be something like 'runs/Aug20-17-20-33-resnet' writer3 = SummaryWriter(comment='resnet') ä»¥ä¸Šå±•ç¤ºäº†ä¸‰ç§åˆå§‹åŒ– SummaryWriter çš„æ–¹æ³•ï¼š æä¾›ä¸€ä¸ªè·¯å¾„ï¼Œå°†ä½¿ç”¨è¯¥è·¯å¾„æ¥ä¿å­˜æ—¥å¿— æ— å‚æ•°ï¼Œé»˜è®¤å°†ä½¿ç”¨ runs/æ—¥æœŸæ—¶é—´ è·¯å¾„æ¥ä¿å­˜æ—¥å¿— æä¾›ä¸€ä¸ª comment å‚æ•°ï¼Œå°†ä½¿ç”¨ runs/æ—¥æœŸæ—¶é—´-comment è·¯å¾„æ¥ä¿å­˜æ—¥å¿— åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿™äº›å¯è§†åŒ–æ•°æ®ï¼š tensorboard --logdir=&lt;your_log_dir&gt; ç”¨å„ç§addæ–¹æ³•è®°å½•æ•°æ® æ•°å­—(scalar) add_scalar(tag, scalar_value, global_step=None, walltime=None) å‚æ•°: tag (string): æ•°æ®åç§°ï¼Œä¸åŒåç§°çš„æ•°æ®ä½¿ç”¨ä¸åŒæ›²çº¿å±•ç¤º scalar_value (float): æ•°å­—å¸¸é‡å€¼ global_step (int, optional): è®­ç»ƒçš„ step walltime (float, optional): è®°å½•å‘ç”Ÿçš„æ—¶é—´ï¼Œé»˜è®¤ä¸º time.time() éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„ scalar_value ä¸€å®šæ˜¯ float ç±»å‹ï¼Œå¦‚æœæ˜¯ PyTorch scalar tensorï¼Œåˆ™éœ€è¦è°ƒç”¨ .item() æ–¹æ³•è·å–å…¶æ•°å€¼ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨ add_scalar æ–¹æ³•æ¥è®°å½•è®­ç»ƒè¿‡ç¨‹çš„ lossã€accuracyã€learning rate ç­‰æ•°å€¼çš„å˜åŒ–ï¼Œç›´è§‚åœ°ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€‚ ç¤ºä¾‹ï¼š from tensorboardX import SummaryWriter writer = SummaryWriter('runs/scalar_example') for i in range(10): writer.add_scalar('quadratic', i**2, global_step=i) writer.add_scalar('exponential', 2**i, global_step=i) å›¾ç‰‡(image) éœ€è¦pillowåº“çš„æ”¯æŒ ç”¨add_imageè®°å½•å•ä¸ªå›¾åƒæ•°æ®ï¼Œç”¨add_imagesè®°å½•å¤šä¸ªå›¾åƒæ•°æ® add_image(tag, img_tensor, global_step=None, walltime=None, dataformats='CHW') CHWä¸ºchannel*hight*width ç¤ºä¾‹ï¼š from tensorboardX import SummaryWriter import cv2 as cv writer = SummaryWriter('runs/image_example') for i in range(1, 6): writer.add_image('countdown', cv.cvtColor(cv.imread('{}.jpg'.format(i)), cv.COLOR_BGR2RGB), global_step=i, dataformats='HWC') ç›´æ–¹å›¾(histogram) add_histogram(tag, values, global_step=None, bins='tensorflow', walltime=None, max_bins=None) ç¤ºä¾‹ï¼š from tensorboardX import SummaryWriter import numpy as np writer = SummaryWriter('runs/embedding_example') writer.add_histogram('normal_centered', np.random.normal(0, 1, 1000), global_step=1) writer.add_histogram('normal_centered', np.random.normal(0, 2, 1000), global_step=50) writer.add_histogram('normal_centered', np.random.normal(0, 3, 1000), global_step=100) &quot;DISTRIBUTIONS&quot;å’Œ&quot;HISTOGRAMS&quot;ä¸¤æ éƒ½æ˜¯ç”¨æ¥è§‚å¯Ÿæ•°æ®åˆ†å¸ƒçš„ã€‚å…¶ä¸­åœ¨&quot;HISTOGRAMS&quot;ä¸­ï¼ŒåŒä¸€æ•°æ®ä¸åŒ step æ—¶å€™çš„ç›´æ–¹å›¾å¯ä»¥ä¸Šä¸‹é”™ä½æ’å¸ƒ (OFFSET) ä¹Ÿå¯é‡å æ’å¸ƒ (OVERLAY)ã€‚ è¿è¡Œå›¾(graph) add_graph(model, input_to_model=None, verbose=False, **kwargs) å¯ä»¥å¯è§†åŒ–ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼Œå‚è€ƒGithubå®˜æ–¹æ ·ä¾‹ åµŒå…¥å¼ é‡(embedding) ä½¿ç”¨ add_embedding æ–¹æ³•å¯ä»¥åœ¨äºŒç»´æˆ–ä¸‰ç»´ç©ºé—´å¯è§†åŒ– embedding å‘é‡ã€‚ add_embedding(mat, metadata=None, label_img=None, global_step=None, tag='default', metadata_header=None) å‚æ•°ï¼š mat (torch.Tensor or numpy.array): ä¸€ä¸ªMxNçŸ©é˜µï¼Œæ¯è¡Œä»£è¡¨ç‰¹å¾ç©ºé—´çš„ä¸€ä¸ªæ•°æ®ç‚¹ metadata (list or torch.Tensor or numpy.array, optional): ä¸€ä¸ªä¸€ç»´åˆ—è¡¨Nï¼Œmat ä¸­æ¯è¡Œæ•°æ®çš„ labelï¼Œå¤§å°åº”å’Œ mat è¡Œæ•°ç›¸åŒ label_img (torch.Tensor, optional): ä¸€ä¸ªå½¢å¦‚ NxCxHxW çš„å¼ é‡ï¼Œå¯¹åº” mat æ¯ä¸€è¡Œæ•°æ®æ˜¾ç¤ºå‡ºçš„å›¾åƒï¼ŒN åº”å’Œ mat è¡Œæ•°ç›¸åŒ global_step (int, optional): è®­ç»ƒçš„ step tag (string, optional): æ•°æ®åç§°ï¼Œä¸åŒåç§°çš„æ•°æ®å°†åˆ†åˆ«å±•ç¤º ç¤ºä¾‹ï¼š from tensorboardX import SummaryWriter import torchvision writer = SummaryWriter('runs/embedding_example') mnist = torchvision.datasets.MNIST('mnist', download=True) writer.add_embedding( mnist.train_data.reshape((-1, 28 * 28))[:100,:], #ç›´æ¥å°†mnistå‰100ä¸ªæ•°æ®å±•å¼€æˆä¸€ç»´å‘é‡ä½œä¸ºembedding metadata=mnist.train_labels[:100], #æ¯ä¸ªembeddingçš„label label_img = mnist.train_data[:100,:,:].reshape((-1, 1, 28, 28)).float() / 255, #æ¯ä¸ªå›¾åƒ global_step=0 )","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"/categories/å­¦ä¹ /"}],"tags":[{"name":"neural ode","slug":"neural-ode","permalink":"/tags/neural-ode/"}],"keywords":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"/categories/å­¦ä¹ /"}]},{"title":"Hexo-Theme-Sakura","slug":"Hexo-Theme-Sakura","date":"2020-03-09T12:16:01.000Z","updated":"2020-03-09T13:38:13.627Z","comments":true,"path":"2020/03/09/Hexo-Theme-Sakura/","link":"","permalink":"/2020/03/09/Hexo-Theme-Sakura/","excerpt":"","text":"hexo-theme-sakuraä¸»é¢˜ English document åŸºäºWordPressä¸»é¢˜Sakuraä¿®æ”¹æˆHexoçš„ä¸»é¢˜ã€‚ demoé¢„è§ˆ æ­£åœ¨å¼€å‘ä¸­â€¦ äº¤æµç¾¤ è‹¥ä½ æ˜¯ä½¿ç”¨è€…ï¼ŒåŠ ç¾¤QQ: 801511924 è‹¥ä½ æ˜¯åˆ›ä½œè€…ï¼ŒåŠ ç¾¤QQ: 194472590 ä¸»é¢˜ç‰¹æ€§ é¦–é¡µå¤§å±è§†é¢‘ é¦–é¡µéšæœºå°é¢ å›¾ç‰‡æ‡’åŠ è½½ valineè¯„è®º fancy-boxç›¸å†Œ pjaxæ”¯æŒï¼ŒéŸ³ä¹ä¸é—´æ–­ aplayeréŸ³ä¹æ’­æ”¾å™¨ å¤šçº§å¯¼èˆªèœå•ï¼ˆæŒ‰ç°åœ¨å¤§éƒ¨åˆ†hexoä¸»é¢˜æ¥è¯´ï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸ªç‰¹æ€§äº†ï¼‰ èµèµä½œè€… å¦‚æœå–œæ¬¢hexo-theme-sakuraä¸»é¢˜ï¼Œå¯ä»¥è€ƒè™‘èµ„åŠ©ä¸€ä¸‹å“¦~éå¸¸æ„Ÿæ¿€ï¼ paypal | Alipay æ”¯ä»˜å® | WeChat Pay å¾®ä¿¡æ”¯ä»˜ æœªå®Œå–„çš„ä½¿ç”¨æ•™ç¨‹ é‚£å•¥ï¼Ÿè€å®è¯´æˆ‘ç›®å‰ä¹Ÿä¸æ˜¯å¾ˆæœ‰æ¡ç†233333333~ 1ã€ä¸»é¢˜ä¸‹è½½å®‰è£… hexo-theme-sakuraå»ºè®®ä¸‹è½½å‹ç¼©åŒ…æ ¼å¼ï¼Œå› ä¸ºé™¤äº†ä¸»é¢˜å†…å®¹è¿˜æœ‰äº›sourceçš„é…ç½®å¯¹æ–°æ‰‹æ¥è¯´æ¯”è¾ƒå¤ªéº»çƒ¦ï¼Œç›´æ¥ä¸‹è½½è§£å‹å°±çœå»è¿™äº›éº»çƒ¦å’¯ã€‚ ä¸‹è½½å¥½åè§£å‹åˆ°åšå®¢æ ¹ç›®å½•ï¼ˆä¸æ˜¯ä¸»é¢˜ç›®å½•å“¦ï¼Œé‡å¤çš„é€‰æ‹©æ›¿æ¢ï¼‰ã€‚æ¥ç€åœ¨å‘½ä»¤è¡Œï¼ˆcmdã€bashï¼‰è¿è¡Œnpm iå®‰è£…ä¾èµ–ã€‚ 2ã€ä¸»é¢˜é…ç½® åšå®¢æ ¹ç›®å½•ä¸‹çš„_configé…ç½® ç«™ç‚¹ # Site title: ä½ çš„ç«™ç‚¹å subtitle: description: ç«™ç‚¹ç®€ä»‹ keywords: author: ä½œè€…å language: zh-cn timezone: éƒ¨ç½² deploy: type: git repo: github: ä½ çš„githubä»“åº“åœ°å€ # coding: ä½ çš„codingä»“åº“åœ°å€ branch: master å¤‡ä»½ ï¼ˆä½¿ç”¨hexo bå‘å¸ƒå¤‡ä»½åˆ°è¿œç¨‹ä»“åº“ï¼‰ backup: type: git message: backup my blog of https://honjun.github.io/ repository: # ä½ çš„githubä»“åº“åœ°å€,å¤‡ä»½åˆ†æ”¯å ï¼ˆå»ºè®®æ–°å»ºbackupåˆ†æ”¯ï¼‰ github: https://github.com/honjun/honjun.github.io.git,backup # coding: https://git.coding.net/hojun/hojun.git,backup ä¸»é¢˜ç›®å½•ä¸‹çš„_configé…ç½® å…¶ä¸­æ ‡æ˜ã€æ”¹ã€‘çš„æ˜¯éœ€è¦ä¿®æ”¹éƒ¨é—¨ï¼Œæ ‡æ˜ã€é€‰ã€‘æ˜¯å¯æ”¹å¯ä¸æ”¹ï¼Œæ ‡æ˜ã€éã€‘æ˜¯ä¸ç”¨æ”¹çš„éƒ¨åˆ† # site name # ç«™ç‚¹å ã€æ”¹ã€‘ prefixName: ã•ãã‚‰è˜ãã® siteName: hojun # favicon and site master avatar # ç«™ç‚¹çš„faviconå’Œå¤´åƒ è¾“å…¥å›¾ç‰‡è·¯å¾„ï¼ˆä¸‹é¢çš„é…ç½®æ˜¯éƒ½æ˜¯cdnçš„ç›¸å¯¹è·¯å¾„ï¼Œæ²¡æœ‰cdnè¯·å¡«å†™å®Œæ•´è·¯å¾„ï¼Œå»ºè®®ä½¿ç”¨jsdeliveræ­å»ºä¸€ä¸ªcdnå•¦ï¼Œå…ˆå»ä¸‹è½½æˆ‘çš„cdnæ›¿æ¢ä¸‹å›¾ç‰‡å°±è¡Œäº†ï¼Œç®€å•æ–¹ä¾¿~ï¼‰ã€æ”¹ã€‘ favicon: /images/favicon.ico avatar: /img/custom/avatar.jpg # ç«™ç‚¹url ã€æ”¹ã€‘ url: https://sakura.hojun.cn # ç«™ç‚¹ä»‹ç»ï¼ˆæˆ–è€…è¯´æ˜¯ä¸ªäººç­¾åï¼‰ã€æ”¹ã€‘ description: Live your life with passion! With some drive! # ç«™ç‚¹cdnï¼Œæ²¡æœ‰å°±ä¸ºç©º ã€æ”¹ã€‘ è‹¥æ˜¯cdnä¸ºç©ºï¼Œä¸€äº›å›¾ç‰‡åœ°å€å°±è¦å¡«å®Œæ•´åœ°å€äº†ï¼Œæ¯”å¦‚ä¹‹å‰avatarå°±è¦å¡«https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/custom/avatar.jpg cdn: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6 # å¼€å¯pjax ã€é€‰ã€‘ pjax: 1 # ç«™ç‚¹é¦–é¡µçš„å…¬å‘Šä¿¡æ¯ ã€æ”¹ã€‘ notice: hexo-Sakuraä¸»é¢˜å·²ç»å¼€æºï¼Œç›®å‰æ­£åœ¨å¼€å‘ä¸­... # æ‡’åŠ è½½çš„åŠ è½½ä¸­å›¾ç‰‡ ã€é€‰ã€‘ lazyloadImg: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg # ç«™ç‚¹èœå•é…ç½® ã€é€‰ã€‘ menus: é¦–é¡µ: { path: /, fa: fa-fort-awesome faa-shake } å½’æ¡£: { path: /archives, fa: fa-archive faa-shake, submenus: { æŠ€æœ¯: {path: /categories/æŠ€æœ¯/, fa: fa-code }, ç”Ÿæ´»: {path: /categories/ç”Ÿæ´»/, fa: fa-file-text-o }, èµ„æº: {path: /categories/èµ„æº/, fa: fa-cloud-download }, éšæƒ³: {path: /categories/éšæƒ³/, fa: fa-commenting-o }, è½¬è½½: {path: /categories/è½¬è½½/, fa: fa-book } } } æ¸…å•: { path: javascript:;, fa: fa-list-ul faa-vertical, submenus: { ä¹¦å•: {path: /tags/æ‚¦è¯»/, fa: fa-th-list faa-bounce }, ç•ªç»„: {path: /bangumi/, fa: fa-film faa-vertical }, æ­Œå•: {path: /music/, fa: fa-headphones }, å›¾é›†: {path: /tags/å›¾é›†/, fa: fa-photo } } } ç•™è¨€æ¿: { path: /comment/, fa: fa-pencil-square-o faa-tada } å‹äººå¸: { path: /links/, fa: fa-link faa-shake } èµèµ: { path: /donate/, fa: fa-heart faa-pulse } å…³äº: { path: /, fa: fa-leaf faa-wrench , submenus: { æˆ‘ï¼Ÿ: {path: /about/, fa: fa-meetup}, ä¸»é¢˜: {path: /theme-sakura/, fa: iconfont icon-sakura }, Lab: {path: /lab/, fa: fa-cogs }, } } å®¢æˆ·ç«¯: { path: /client/, fa: fa-android faa-vertical } RSS: { path: /atom.xml, fa: fa-rss faa-pulse } # Home page sort type: -1: newer firstï¼Œ1: older first. ã€éã€‘ homePageSortType: -1 # Home page article shown number) ã€éã€‘ homeArticleShown: 10 # èƒŒæ™¯å›¾ç‰‡ ã€é€‰ã€‘ bgn: 8 # startdashé¢æ¿ url, title, desc img ã€æ”¹ã€‘ startdash: - {url: /theme-sakura/, title: Sakura, desc: æœ¬ç«™ hexo ä¸»é¢˜, img: /img/startdash/sakura.md.png} - {url: http://space.bilibili.com/271849279, title: Bilibili, desc: åšä¸»çš„bç«™è§†é¢‘, img: /img/startdash/bilibili.jpg} - {url: /, title: hojunçš„ä¸‡äº‹å±‹, desc: æŠ€æœ¯æœåŠ¡, img: /img/startdash/wangshiwu.jpg} # your site build time or founded date # ä½ çš„ç«™ç‚¹å»ºç«‹æ—¥æœŸ ã€æ”¹ã€‘ siteBuildingTime: 07/17/2018 # ç¤¾äº¤æŒ‰é’®(social) url, img PCç«¯é…ç½® ã€æ”¹ã€‘ social: github: {url: http://github.com/honjun, img: /img/social/github.png} sina: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/sina.png} wangyiyun: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/wangyiyun.png} zhihu: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/zhihu.png} email: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/email.svg} wechat: {url: /#, qrcode: /img/custom/wechat.jpg, img: /img/social/wechat.png} # ç¤¾äº¤æŒ‰é’®(msocial) url, img ç§»åŠ¨ç«¯é…ç½® ã€æ”¹ã€‘ msocial: github: {url: http://github.com/honjun, fa: fa-github, color: 333} weibo: {url: http://weibo.com/mashirozx?is_all=1, fa: fa-weibo, color: dd4b39} qq: {url: https://wpa.qq.com/msgrd?v=3&amp;uin=954655431&amp;site=qq&amp;menu=yes, fa: fa-qq, color: 25c6fe} # èµèµäºŒç»´ç ï¼ˆå…¶ä¸­wechatSQæ˜¯èµèµå•é¡µé¢çš„èµèµç å›¾ç‰‡ï¼‰ã€æ”¹ã€‘ donate: alipay: /img/custom/donate/AliPayQR.jpg wechat: /img/custom/donate/WeChanQR.jpg wechatSQ: /img/custom/donate/WeChanSQ.jpg # é¦–é¡µè§†é¢‘åœ°å€ä¸ºhttps://cdn.jsdelivr.net/gh/honjun/hojun@1.2/Unbroken.mp4ï¼Œé…ç½®å¦‚ä¸‹ ã€æ”¹ã€‘ movies: url: https://cdn.jsdelivr.net/gh/honjun/hojun@1.2 # å¤šä¸ªè§†é¢‘ç”¨é€—å·éš”å¼€ï¼Œéšæœºè·å–ã€‚æ”¯æŒçš„æ ¼å¼ç›®å‰å·²çŸ¥MP4,Flvã€‚å…¶ä»–çš„å¯ä»¥è¯•ä¸‹ï¼Œä¸ä¿è¯æœ‰ç”¨ name: Unbroken.mp4 # å·¦ä¸‹è§’aplayeræ’­æ”¾å™¨é…ç½® ä¸»è¦æ”¹idå’Œserverè¿™ä¸¤é¡¹ï¼Œä¿®æ”¹è¯¦è§[aplayeræ–‡æ¡£] ã€æ”¹ã€‘ aplayer: id: 2660651585 server: netease type: playlist fixed: true mini: false autoplay: false loop: all order: random preload: auto volume: 0.7 mutex: true # Valineè¯„è®ºé…ç½®ã€æ”¹ã€‘ valine: true v_appId: GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz v_appKey: mgOpfzbkHYqU92CV4IDlAUHQ åˆ†ç±»é¡µå’Œæ ‡ç­¾é¡µé…ç½® åˆ†ç±»é¡µ æ ‡ç­¾é¡µ é…ç½®é¡¹åœ¨\\themes\\Sakura\\languages\\zh-cn.ymlé‡Œã€‚æ–°å¢ä¸€ä¸ªåˆ†ç±»æˆ–æ ‡ç­¾æœ€å¥½åŠ ä¸‹å“¦ï¼Œå½“ç„¶å«Œéº»çƒ¦å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€å¼ é»˜è®¤å›¾ç‰‡ï¼ˆå¯ä»¥æ”¹ä¸»é¢˜æˆ–è€…ç›´æ¥æŠŠ404å›¾ç‰‡æ›¿æ¢ä¸‹ï¼Œå¾æ±‚ä¸‹æ„è§è¦ä¸è¦ç»™è¿™ä¸ªåœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸ªå¼€å…³ï¼Œå¯ä»¥issueæˆ–ç¾¤é‡Œæå‡ºæ¥ï¼‰ï¼Œç°åœ¨æ˜¯æ²¡è®¾ç½®çš„è¯ä¼šä½¿ç”¨é‚£ç§å€’ç«‹å°ç‹—404å“¦ã€‚ #category # æŒ‰åˆ†ç±»ååˆ›å»º æŠ€æœ¯: #ä¸­æ–‡æ ‡é¢˜ zh: é‡ç”ŸæŠ€æœ¯åä¼š # è‹±æ–‡æ ‡é¢˜ en: Geek â€“ Only for Love # å°é¢å›¾ç‰‡ img: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/banner/coding.jpg ç”Ÿæ´»: zh: ç”Ÿæ´» en: live img: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/banner/writing.jpg #tag # æ ‡ç­¾åå³æ˜¯æ ‡é¢˜ æ‚¦è¯»: # å°é¢å›¾ç‰‡ img: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/banner/reading.jpg å•é¡µé¢å°é¢é…ç½® å¦‚ç•™è¨€æ¿é¡µé¢é¡µé¢ï¼Œä½äºsourceä¸‹çš„commentä¸‹ï¼Œæ‰“å¼€index.mdå¦‚ä¸‹ï¼š --- title: comment date: 2018-12-20 23:13:48 keywords: ç•™è¨€æ¿ description: comments: true # åœ¨è¿™é‡Œé…ç½®å•é¡µé¢å¤´éƒ¨å›¾ç‰‡ï¼Œè‡ªå®šä¹‰æ›¿æ¢å“¦~ photos: https://cdn.jsdelivr.net/gh/honjun/cdn@1.4/img/banner/comment.jpg --- å•é¡µé¢é…ç½® ç•ªç»„è®¡åˆ’é¡µ ï¼ˆè¯·ç›´æ¥åœ¨ä¸‹è½½åçš„æ–‡ä»¶ä¸­æ”¹ï¼Œä¸‹é¢çš„æ·»åŠ äº†æ³¨é‡Šå¯èƒ½ä¼šæœ‰äº›å½±å“ï¼‰ --- layout: bangumi title: bangumi comments: false date: 2019-02-10 21:32:48 keywords: description: bangumis: # ç•ªç»„å›¾ç‰‡ - img: https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg # ç•ªç»„å title: æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ± # è¿½ç•ªçŠ¶æ€ ï¼ˆè¿½ç•ªing/å·²è¿½å®Œï¼‰ status: å·²è¿½å®Œ # è¿½ç•ªè¿›åº¦ progress: 100 # ç•ªå‰§æ—¥æ–‡åç§° jp: ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã† # æ”¾é€æ—¶é—´ time: æ”¾é€æ—¶é—´: 2018-02-24 SUN. # ç•ªå‰§ä»‹ç» desc: ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚ - img: https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg title: æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ± status: å·²è¿½å®Œ progress: 50 jp: ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã† time: æ”¾é€æ—¶é—´: 2018-02-24 SUN. desc: ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚ --- å‹é“¾é¡µ ï¼ˆè¯·ç›´æ¥åœ¨ä¸‹è½½åçš„æ–‡ä»¶ä¸­æ”¹ï¼Œä¸‹é¢çš„æ·»åŠ äº†æ³¨é‡Šå¯èƒ½ä¼šæœ‰äº›å½±å“ï¼‰ --- layout: links title: links # åˆ›å»ºæ—¥æœŸï¼Œå¯ä»¥æ”¹ä¸‹ date: 2018-12-19 23:11:06 # å›¾ç‰‡ä¸Šçš„æ ‡é¢˜ï¼Œè‡ªå®šä¹‰ä¿®æ”¹ keywords: å‹äººå¸ description: # true/false å¼€å¯/å…³é—­è¯„è®º comments: true # é¡µé¢å¤´éƒ¨å›¾ç‰‡ï¼Œè‡ªå®šä¹‰ä¿®æ”¹ photos: https://cdn.jsdelivr.net/gh/honjun/cdn@1.4/img/banner/links.jpg # å‹é“¾é…ç½® links: # ç±»å‹åˆ†ç»„ - group: ä¸ªäººé¡¹ç›® # ç±»å‹ç®€ä»‹ desc: å……åˆ†è¯´æ˜è¿™å®¶ä¼™æ˜¯æ¡å’¸é±¼ &lt; (ï¿£ï¸¶ï¿£)&gt; items: # å‹é“¾é“¾æ¥ - url: https://shino.cc/fgvf # å‹é“¾å¤´åƒ img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg # å‹é“¾ç«™ç‚¹å name: Google # å‹é“¾ä»‹ç» ä¸‹é¢é›·åŒ desc: Google é•œåƒ - url: https://shino.cc/fgvf img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg name: Google desc: Google é•œåƒ # ç±»å‹åˆ†ç»„... - group: å°ä¼™ä¼´ä»¬ desc: æ¬¢è¿äº¤æ¢å‹é“¾ ê‰‚(ËŠá—œË‹) items: - url: https://shino.cc/fgvf img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg name: Google desc: Google é•œåƒ - url: https://shino.cc/fgvf img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg name: Google desc: Google é•œåƒ --- å†™æ–‡ç« é…ç½® ä¸»é¢˜é›†æˆäº†ä¸ªäººæ’ä»¶hexo-tag-biliå’Œhexo-tag-fancybox_imgã€‚å…¶ä¸­hexo-tag-biliç”¨æ¥åœ¨æ–‡ç« æˆ–å•é¡µé¢ä¸­æ’å…¥Bç«™å¤–é“¾è§†é¢‘ï¼Œä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š è¯¦ç»†ä½¿ç”¨æ•™ç¨‹è¯¦è§hexo-tag-biliã€‚ hexo-tag-fancybox_imgç”¨æ¥åœ¨æ–‡ç« æˆ–å•é¡µé¢ä¸­å›¾ç‰‡ï¼Œä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š è¯¦ç»†ä½¿ç”¨æ•™ç¨‹è¯¦è§hexo-tag-fancybox_img è¿˜æœ‰å•¥ï¼Œä¸€æ—¶æƒ³ä¸èµ·æ¥â€¦ To be continuedâ€¦","categories":[{"name":"å…¶å®ƒ","slug":"å…¶å®ƒ","permalink":"/categories/å…¶å®ƒ/"}],"tags":[{"name":"web","slug":"web","permalink":"/tags/web/"},{"name":"æ‚¦è¯»","slug":"æ‚¦è¯»","permalink":"/tags/æ‚¦è¯»/"}],"keywords":[{"name":"å…¶å®ƒ","slug":"å…¶å®ƒ","permalink":"/categories/å…¶å®ƒ/"}]},{"title":"neural ode","slug":"Neural ODE","date":"2020-03-04T03:38:00.000Z","updated":"2020-03-09T13:33:54.527Z","comments":true,"path":"2020/03/04/Neural ODE/","link":"","permalink":"/2020/03/04/Neural ODE/","excerpt":"","text":"åŸæ–‡ï¼šNeural ordinary differential equations NIPS2018æœ€ä½³è®ºæ–‡ ç®€ä»‹ ç®€å•å¤ä¹ ä¸€ä¸‹ResNetï¼š é€šè¿‡æ®‹å·®å—è§£å†³åå‘ä¼ æ’­è¿‡ç¨‹ä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ ResNetã€RNNã€Normalizing flow ç­‰æ¨¡å‹éƒ½æ˜¯è¿™ç§å½¢å¼ï¼š ht+1=ht+f(ht,Î¸t)h_{t+1}=h_t+f(h_t,\\theta_t) ht+1â€‹=htâ€‹+f(htâ€‹,Î¸tâ€‹) å¦‚æœé‡‡ç”¨æ›´å¤šçš„å±‚æ•°å’Œæ›´å°çš„æ­¥é•¿ï¼Œå¯ä»¥ä¼˜åŒ–ä¸ºä¸€ä¸ªå¸¸å¾®åˆ†æ–¹ç¨‹ï¼š dh(t)dt=f(h(t),t,Î¸)\\frac{d \\mathbf{h}(t)}{d t}=f(\\mathbf{h}(t), t, \\theta) dtdh(t)â€‹=f(h(t),t,Î¸) è¿™å°±æ˜¯ODE Netçš„æ ¸å¿ƒideaäº†â€¦â€¦ä¸‹é¢è¿›è¡Œå…·ä½“çš„åˆ†æ ç»™å®šå¸¸å¾®åˆ†æ–¹ç¨‹ï¼Œæ•°å­¦ç†è®ºä¸Šå¯ä»¥å¯¹å…¶è¿›è¡Œè§£ææ³•æ±‚è§£ï¼Œä½†é€šå¸¸æˆ‘ä»¬åªå…³å¿ƒæ•°å€¼è§£ï¼šåœ¨å·²çŸ¥h(t0)h(t_0)h(t0â€‹) çš„æƒ…å†µä¸‹ï¼Œæ±‚å‡ºh(t1)h(t_1)h(t1â€‹) ã€‚è¿™åœ¨ç¥ç»ç½‘ç»œé‡Œå¯¹åº”çš„æ˜¯æ­£å‘ä¼ æ’­ã€‚ç”¨ResNetå¯¹æ¯”ä¸€ä¸‹ï¼š ResNetçš„æ­£å‘ä¼ æ’­ï¼š ht+1=ht+f(ht,Î¸t)h_{t+1}=h_t+f(h_t,\\theta_t) ht+1â€‹=htâ€‹+f(htâ€‹,Î¸tâ€‹) ODEç½‘ç»œçš„æ­£å‘ä¼ æ’­ï¼š dh(t)dt=f(h(t),t,Î¸)âˆ«t0t1dh(t)=âˆ«t0t1f(h(t),t,Î¸)dth(t1)=h(t0)+âˆ«t0t1f(h(t),t,Î¸)dt\\begin{array}{c} \\frac{d h(t)}{d t}=f(h(t), t, \\theta) \\\\ \\int_{t_{0}}^{t_{1}} d h(t)=\\int_{t_{0}}^{t_{1}} f(h(t), t, \\theta) d t \\\\ h\\left(t_{1}\\right)=h\\left(t_{0}\\right)+\\int_{t_{0}}^{t_{1}} f(h(t), t, \\theta) d t \\end{array} dtdh(t)â€‹=f(h(t),t,Î¸)âˆ«t0â€‹t1â€‹â€‹dh(t)=âˆ«t0â€‹t1â€‹â€‹f(h(t),t,Î¸)dth(t1â€‹)=h(t0â€‹)+âˆ«t0â€‹t1â€‹â€‹f(h(t),t,Î¸)dtâ€‹ æ±‚è§£è¿™ä¸ªå¸¸å¾®åˆ†æ–¹ç¨‹æ•°å€¼è§£çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæœ€åŸå§‹çš„æ˜¯æ¬§æ‹‰æ³•ï¼šå›ºå®šÎ”t\\Delta tÎ”t ,é€šè¿‡é€æ­¥è¿­ä»£æ¥æ±‚è§£ï¼š h(t+Î”t)=h(t)+Î”tâˆ—f(h(t),t,Î¸)h(t+\\Delta t)=h(t)+\\Delta t * f(h(t),t,\\theta) h(t+Î”t)=h(t)+Î”tâˆ—f(h(t),t,Î¸) æˆ‘ä»¬çœ‹åˆ°ï¼Œå¦‚æœä»¤Î”t=1\\Delta t=1Î”t=1 ,ç¦»æ•£åŒ–çš„æ¬§æ‹‰æ³•å°±é€€åŒ–æˆæ®‹å·®æ¨¡å—çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ResNetå¯ä»¥çœ‹æˆæ˜¯ODENetçš„ç‰¹æ®Šæƒ…å†µã€‚ ä½†æ¬§æ‹‰æ³•åªæ˜¯è§£å¸¸å¾®åˆ†æ–¹ç¨‹æœ€åŸºç¡€çš„è§£æ³•ï¼Œå®ƒæ¯èµ°ä¸€æ­¥éƒ½ä¼šäº§ç”Ÿè¯¯å·®ï¼Œå¹¶ä¸”è¯¯å·®ä¼šå±‚å±‚ç´¯ç§¯èµ·æ¥ã€‚è¿‘ç™¾å¹´æ¥ï¼Œåœ¨æ•°å­¦å’Œç‰©ç†å­¦é¢†åŸŸå·²ç»æœ‰æ›´æˆç†Ÿçš„ODE Solveæ–¹æ³•ï¼Œå®ƒä»¬ä¸ä»…èƒ½ä¿è¯æ”¶æ•›åˆ°çœŸå®è§£ï¼Œè€Œä¸”èƒ½å¤Ÿæ§åˆ¶è¯¯å·®ï¼Œæœ¬æ–‡åœ¨ä¸æ¶‰åŠODE Solveå†…éƒ¨ç»“æ„çš„å‰æä¸‹(å°†ODE Solveä½œä¸ºä¸€ä¸ªé»‘ç›’æ¥ä½¿ç”¨)ï¼Œç ”ç©¶å¦‚ä½•ç”¨ODE Solveå¸®åŠ©æœºå™¨å­¦ä¹ ã€‚ è¿™ç¯‡æ–‡ç« ä½¿ç”¨äº†ä¸€ç§é€‚åº”æ€§çš„ODE solverï¼Œå®ƒä¸åƒResNeté‚£æ ·å›ºå®šæ­¥é•¿ï¼Œè€Œæ˜¯æ ¹æ®ç»™å®šçš„è¯¯å·®å®¹å¿åº¦è‡ªåŠ¨è°ƒæ•´æ­¥é•¿ï¼Œé»‘è‰²çš„è¯„ä¼°ä½ç½®å¯ä»¥è§†ä½œç¥ç»å…ƒï¼Œä»–çš„ä½ç½®ä¹Ÿä¼šæ ¹æ®è¯¯å·®å®¹å¿åº¦è‡ªåŠ¨è°ƒæ•´ï¼š ä½¿ç”¨ODENetçš„å‡ ä¸ªå¥½å¤„ï¼ˆå’ŒåŸæ–‡ä¸å®Œå…¨ä¸€è‡´ï¼Œè¯¦ç»†å¯çœ‹åŸæ–‡ï¼‰ï¼š ä¸€èˆ¬çš„ç¥ç»ç½‘ç»œåˆ©ç”¨é“¾å¼æ³•åˆ™ï¼Œå°†æ¢¯åº¦ä»æœ€å¤–å±‚çš„å‡½æ•°é€å±‚å‘å†…ä¼ æ’­ï¼Œå¹¶æ›´æ–°æ¯ä¸€å±‚çš„å‚æ•°Î¸\\thetaÎ¸ ,è¿™å°±éœ€è¦åœ¨å‰å‘ä¼ æ’­ä¸­éœ€è¦ä¿ç•™æ‰€æœ‰å±‚çš„æ¿€æ´»å€¼ï¼Œå¹¶åœ¨æ²¿è®¡ç®—è·¯å¾„åä¼ æ¢¯åº¦æ—¶åˆ©ç”¨è¿™äº›æ¿€æ´»å€¼ã€‚è¿™å¯¹å†…å­˜çš„å ç”¨éå¸¸å¤§ï¼Œå±‚æ•°è¶Šå¤šï¼Œå ç”¨çš„å†…å­˜ä¹Ÿè¶Šå¤§ï¼Œè¿™é™åˆ¶äº†æ·±åº¦æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚ æœ¬æ–‡ç»™å‡ºçš„ç”¨ODENetåå‘ä¼ æ’­çš„æ–¹æ³•ä¸å­˜å‚¨ä»»ä½•ä¸­é—´è¿‡ç¨‹ï¼Œå› è€Œä¸ç®¡å±‚æ•°å¦‚ä½•åŠ æ·±ï¼Œåªéœ€è¦å¸¸æ•°çº§çš„å†…å­˜æˆæœ¬ã€‚ è‡ªé€‚åº”çš„è®¡ç®—ã€‚ä¼ ç»Ÿçš„æ¬§æ‹‰æ³•ä¼šæœ‰è¯¯å·®é€å±‚ç´¯ç§¯çš„ç¼ºé™·ï¼Œè€ŒODENetå¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å®æ—¶çš„ç›‘æµ‹è¯¯å·®æ°´å¹³ï¼Œå¹¶å¯ä»¥è°ƒæ•´ç²¾åº¦æ¥æ§åˆ¶æ¨¡å‹çš„æˆæœ¬ã€‚ä¾‹å¦‚ï¼šåœ¨è®­ç»ƒæ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¾ƒé«˜çš„ç²¾åº¦ä½¿è®­ç»ƒçš„æ¨¡å‹å°½å¯èƒ½å‡†ç¡®ï¼Œè€Œåœ¨æµ‹è¯•æ—¶å¯ä»¥ä½¿ç”¨è¾ƒä½çš„ç²¾åº¦ï¼Œå‡å°‘æµ‹è¯•æˆæœ¬ã€‚ åº”ç”¨åœ¨æµæ¨¡å‹ä¸Šä¼šæå¤§ç®€åŒ–å˜åˆ†å…¬å¼çš„è®¡ç®—ï¼Œåœ¨ä¸‹æ–‡ä¸­è¯¦ç»†è®²è§£ åœ¨æ—¶é—´ä¸Šçš„è¿ç»­æ€§ï¼Œå¥½ç†è§£ä¸å±•å¼€ åå‘ä¼ æ’­ åœ¨è®­ç»ƒè¿ç»­ç¥ç»ç½‘ç»œçš„è¿‡ç¨‹ä¸­ï¼Œæ­£å‘ä¼ æ’­å¯ä»¥ä½¿ç”¨ODE sloveã€‚ä½†å¯¹ODE solveæ±‚å¯¼æ¥è¿›è¡Œåå‘ä¼ æ’­æ±‚è§£æ¢¯åº¦æ˜¯å¾ˆå›°éš¾çš„ï¼Œæœ¬ç¯‡æ–‡ç« ä½¿ç”¨Pontryaginçš„ä¼´éšæ–¹æ³•(adjoint method) æ¥æ±‚è§£æ¢¯åº¦ï¼Œè¯¥æ–¹æ³•ä¸ä»…åœ¨è®¡ç®—å’Œå†…å­˜ä¸Šæœ‰æ›´å¤§ä¼˜åŠ¿ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿç²¾ç¡®åœ°æ§åˆ¶æ•°å€¼è¯¯å·®ã€‚ å…·ä½“è€Œè¨€ï¼Œå¯¹äºï¼š L(z(t1))=L(âˆ«t0t1f(z(t),t,Î¸)dt)=L( ODESolve(z (t0),f,t0,t1,Î¸))(1)\\left.L\\left(\\mathbf{z}\\left(t_{1}\\right)\\right)=L\\left(\\int_{t_{0}}^{t_{1}} f(\\mathbf{z}(t), t, \\theta) d t\\right)=L\\left(\\text { ODESolve(z }\\left(t_{0}\\right), f, t_{0}, t_{1}, \\theta\\right)\\right)\\tag{1} L(z(t1â€‹))=L(âˆ«t0â€‹t1â€‹â€‹f(z(t),t,Î¸)dt)=L( ODESolve(z (t0â€‹),f,t0â€‹,t1â€‹,Î¸))(1) ä¸ºä¼˜åŒ–LLL ,æˆ‘ä»¬éœ€è¦è®¡ç®—ä»–å¯¹äºå‚æ•°z(t0),t0,t1z(t_0),t_0,t_1z(t0â€‹),t0â€‹,t1â€‹ å’ŒÎ¸\\thetaÎ¸ çš„æ¢¯åº¦ã€‚ ç¬¬ä¸€æ­¥æ˜¯ç¡®å®šlossçš„æ¢¯åº¦å¦‚ä½•å–å†³äºéšè—çŠ¶æ€z(t)z(t)z(t) çš„å˜åŒ–ï¼Œè¿™åœ¨æ–‡ç« ä¸­è¢«ç§°ä½œä¼´éša(t)a(t)a(t) (adjointa(t)adjoint \\quad a(t)adjointa(t) ) a(t)=âˆ’âˆ‚L/âˆ‚z(t)a(t) = - \\partial L / \\partial \\mathbf{z}(t) a(t)=âˆ’âˆ‚L/âˆ‚z(t) è¿™ä¸ªa(t)a(t)a(t) å¯ä»¥ç”±å¦ä¸€ä¸ªODEç»™å®š(è¯æ˜è¡¥å……åœ¨åé¢)ï¼š da(t)dt=âˆ’a(t)âŠ¤âˆ‚f(z(t),t,Î¸)âˆ‚z(2)\\frac{d a(t)}{d t}=-a(t)^{\\top} \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial \\mathbf{z}}\\tag{2} dtda(t)â€‹=âˆ’a(t)âŠ¤âˆ‚zâˆ‚f(z(t),t,Î¸)â€‹(2) åœ¨ä¼ ç»Ÿçš„åŸºäºé“¾å¼æ³•åˆ™çš„åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åä¸€å±‚å¯¹å‰ä¸€å±‚è¿›è¡Œæ±‚å¯¼ä»¥ä¼ é€’æ¢¯åº¦(âˆ‚L/âˆ‚z(t0)=âˆ‚L/âˆ‚z(t1)âˆ—âˆ‚z(t1)/âˆ‚z(t0)\\partial L/\\partial z(t_0)=\\partial L/\\partial z(t_1) * \\partial z(t_1) / \\partial z(t_0)âˆ‚L/âˆ‚z(t0â€‹)=âˆ‚L/âˆ‚z(t1â€‹)âˆ—âˆ‚z(t1â€‹)/âˆ‚z(t0â€‹))ï¼Œè€Œåœ¨ODENetä¸­ï¼Œå¯ä»¥å†æ¬¡è°ƒç”¨ODESolveè®¡ç®—âˆ‚L/âˆ‚z(t0)\\partial L/\\partial z(t_0)âˆ‚L/âˆ‚z(t0â€‹)ã€‚ å¯¹äºè®¡ç®—ç›¸å¯¹äºå‚æ•°Î¸\\thetaÎ¸ çš„æ¢¯åº¦ï¼Œå…¬å¼ç±»ä¼¼ï¼š dLdÎ¸=âˆ«t1t0a(t)âŠ¤âˆ‚f(z(t),t,Î¸)âˆ‚Î¸dt(3)\\frac{d L}{d \\theta}=\\int_{t_{1}}^{t_{0}} a(t)^{\\top} \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial \\theta} d t\\tag{3} dÎ¸dLâ€‹=âˆ«t1â€‹t0â€‹â€‹a(t)âŠ¤âˆ‚Î¸âˆ‚f(z(t),t,Î¸)â€‹dt(3) è¿™ä¸‰ä¸ªç§¯åˆ†(å¸¦æ ‡å·çš„ä¸‰ä¸ª)å¯ä»¥åœ¨åŒä¸€ä¸ªODE solverè¿‡ç¨‹ä¸­è¿›è¡Œè®¡ç®—ï¼š emmmâ€¦â€¦æ–‡ç« å†™çš„æ˜¯ä¸‰ä¸ªï¼Œæˆ‘æ„Ÿè§‰ç®—æ³•é‡Œæ˜¯å››ä¸ªâ€¦â€¦ ä¹Ÿæœ‰å¯èƒ½ä¸‰ä¸ªæ˜¯è¯´ä¸‰ä¸ªæ¢¯åº¦å§=_= ç®€å•è§£é‡Šå¦‚ä½•ç†è§£ä¸Šé¢è¿™ä¸ªç®—æ³•ï¼š ä»¥å‰å‘ä¼ æ’­ä¸ºä¾‹ï¼ŒODESolve(h(t0),f,t0,t1,Î¸)ODESolve(h(t_0),f,t_0,t_1,\\theta)ODESolve(h(t0â€‹),f,t0â€‹,t1â€‹,Î¸) è¡¨ç¤ºæ±‚è§£å¸¸å¾®åˆ†æ–¹ç¨‹dh(t)dt=f(h(t),t,Î¸)\\frac{d \\mathbf{h}(t)}{d t}=f(\\mathbf{h}(t), t, \\theta)dtdh(t)â€‹=f(h(t),t,Î¸) çš„æ•°å€¼è§£h(t1)h(t_1)h(t1â€‹) ã€‚ å°†ç§¯åˆ†ä¸²è”åœ¨ä¸€èµ·ä»¥ä½¿ç”¨ä¸€æ¬¡ODESolverè§£å‡ºæ‰€æœ‰é‡ã€‚ å¦‚æœLossä¸ä»…ä»…å–å†³äºæœ€ç»ˆçŠ¶æ€ï¼Œé‚£ä¹ˆåœ¨ç”¨ODENetè¿›è¡Œåå‘ä¼ æ’­æ—¶ï¼Œéœ€è¦åœ¨è¿™äº›çŠ¶æ€ä¸­è¿›è¡Œä¸€ç³»åˆ—çš„å•ç‹¬æ±‚è§£ï¼Œæ¯æ¬¡éƒ½è¦è°ƒæ•´ç®—æ³•ä¸­çš„ adjoint a(t)a(t)a(t) ã€‚ ç”¨ODEç½‘ç»œæ›¿ä»£ResNet å¯¹å›¾åƒè¿›è¡Œä¸¤æ¬¡ä¸‹é‡‡æ ·ï¼Œç„¶ååˆ†åˆ«åº”ç”¨å…­ä¸ªæ®‹å·®å—å’Œä¸€ä¸ªODENetè¿›è¡Œå¯¹æ¯”ï¼š RK-Netæ˜¯ç”¨Runge-Kuttaç§¯åˆ†å™¨ï¼Œç›´æ¥è¿›è¡Œåå‘è¯¯å·®çš„ä¼ æ’­ LLL è¡¨ç¤ºResNetçš„éšè—å±‚æ•°ï¼ŒL~\\tilde{L}L~ è¡¨ç¤ºè°ƒç”¨ODESolveçš„æ¬¡æ•°ã€‚ è¯¯å·®æ§åˆ¶ï¼Œå‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­çš„æ±‚å€¼æ¬¡æ•°ï¼Œç½‘ç»œæ·±åº¦è¡¨ç°åœ¨ä¸‹å›¾ï¼š aï¼šæ±‚å€¼æ¬¡æ•°å’Œç²¾åº¦æˆåæ¯” bï¼šæ±‚å€¼æ¬¡æ•°ä¸æ—¶é—´æˆæ­£æ¯” cï¼šæ±‚å€¼æ¬¡æ•°ä¸åå‘ä¼ æ’­æ—¶é—´æˆæ­£æ¯”ï¼Œå¹¶ä¸”åå‘ä¼ æ’­çš„æ—¶é—´å¤§æ¦‚æ˜¯æ­£å‘ä¼ æ’­çš„ä¸€åŠ dï¼šç½‘ç»œæ·±åº¦ï¼Œç”±äºODENetæ˜¯ä¸€ä¸ªè¿ç»­ç½‘ç»œï¼Œæ²¡æœ‰éšè—å±‚ï¼Œå› æ­¤å°†è¯„ä¼°ç‚¹çš„æ•°é‡ä½œä¸ºæ·±åº¦ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç½‘ç»œæ·±åº¦é€æ¸å¢åŠ  è¿ç»­çš„å½’ä¸€åŒ–æµæ¨¡å‹ æµæ¨¡å‹çš„è§£è¯»åœ¨å‰ä¸€ç¯‡åšå®¢ä¸­ æµæ¨¡å‹ä½¿ç”¨ä¸€ä¸ªå¯é€†å‡½æ•°fff è¿›è¡Œä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„æ˜ å°„ï¼Œå˜æ¢å‰åçš„ä¸¤ä¸ªåˆ†å¸ƒæ»¡è¶³å˜é‡ä»£æ¢å®šç†ï¼š z1=f(z0)âŸ¹logâ¡p(z1)=logâ¡p(z0)âˆ’logâ¡âˆ£detâ¡âˆ‚fâˆ‚z0âˆ£\\mathrm{z}_{1}=f\\left(\\mathrm{z}_{0}\\right) \\Longrightarrow \\log p\\left(\\mathrm{z}_{1}\\right)=\\log p\\left(\\mathrm{z}_{0}\\right)-\\log \\left|\\operatorname{det} \\frac{\\partial f}{\\partial \\mathrm{z}_{0}}\\right| z1â€‹=f(z0â€‹)âŸ¹logp(z1â€‹)=logp(z0â€‹)âˆ’logâˆ£âˆ£âˆ£âˆ£â€‹detâˆ‚z0â€‹âˆ‚fâ€‹âˆ£âˆ£âˆ£âˆ£â€‹ å¹³é¢å½’ä¸€åŒ–æµ(NICEä¹‹åçš„ä¸€ç¯‡æµæ¨¡å‹çš„æ–‡ç« ï¼Œè¿™ç¯‡è®ºæ–‡æ²¡çœ‹â€¦â€¦)ä½¿ç”¨çš„å˜æ¢ï¼š z(t+1)=z(t)+uh(wâŠ¤z(t)+b),logâ¡p(z(t+1))=logâ¡p(z(t))âˆ’logâ¡âˆ£1+uâŠ¤âˆ‚hâˆ‚zâˆ£\\mathbf{z}(t+1)=\\mathbf{z}(t)+u h\\left(w^{\\top} \\mathbf{z}(t)+b\\right), \\quad \\log p(\\mathbf{z}(t+1))=\\log p(\\mathbf{z}(t))-\\log \\left|1+u^{\\top} \\frac{\\partial h}{\\partial \\mathbf{z}}\\right| z(t+1)=z(t)+uh(wâŠ¤z(t)+b),logp(z(t+1))=logp(z(t))âˆ’logâˆ£âˆ£âˆ£âˆ£â€‹1+uâŠ¤âˆ‚zâˆ‚hâ€‹âˆ£âˆ£âˆ£âˆ£â€‹ åœ¨æµæ¨¡å‹ä¸­ï¼Œä¸ºä½¿âˆ‚f/âˆ‚z\\partial f/\\partial zâˆ‚f/âˆ‚z çš„é›…å¯æ¯”è¡Œåˆ—å¼æ˜“äºè®¡ç®—ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç²¾å¿ƒæ„å»ºå‡½æ•°fff æ¥å®ç°ã€‚å¹¶ä¸”fff è¿˜éœ€è¦æ˜¯å¯é€†çš„ã€‚è€Œåœ¨è¿™ç¯‡æ–‡ç« é‡Œå‘ç°ï¼Œå°†ç¦»æ•£çš„æµæ¨¡å‹æ¢æˆè¿ç»­æµæ¨¡å‹ï¼Œå¯ä»¥æå¤§çš„ç®€åŒ–è®¡ç®—ï¼šä¸éœ€è¦å»è®¡ç®—âˆ‚f/âˆ‚z\\partial f/ \\partial zâˆ‚f/âˆ‚z çš„è¡Œåˆ—å¼ï¼Œåªéœ€è¦è®¡ç®—è¿¹ï¼Œå¹¶ä¸”ä¸éœ€è¦æ„å»ºfff å¯é€†ï¼šfff å¯ä»¥æ˜¯ä»»æ„å‡½æ•°ï¼Œå®ƒæ˜¯å¤©ç„¶å¯é€†çš„(å¸¸å¾®åˆ†æ–¹ç¨‹å†³å®šçš„å‡½æ•°åªè¦æ»¡è¶³å”¯ä¸€æ€§ï¼Œå°±ä¸€å®šæ˜¯åŒå°„çš„)ï¼Œå› æ­¤fff ç†è®ºä¸Šå¯ä»¥æ˜¯ä»»ä½•ç½‘ç»œã€‚ æ ¸å¿ƒå®šç†ï¼ˆæ¢¯åº¦å˜å…ƒå®šç†ï¼‰ï¼š è¯æ˜è¿‡ç¨‹è§é™„å½• äºæ˜¯æˆ‘ä»¬å°†å¹³é¢å½’ä¸€åŒ–æµæ¨¡å‹è¿ç»­åŒ–ï¼š dz(t)dt=uh(wâŠ¤z(t)+b),âˆ‚logâ¡p(z(t))âˆ‚t=âˆ’uâŠ¤âˆ‚hâˆ‚z(t)\\frac{d \\mathbf{z}(t)}{d t}=u h\\left(w^{\\top} \\mathbf{z}(t)+b\\right), \\quad \\frac{\\partial \\log p(\\mathbf{z}(t))}{\\partial t}=-u^{\\top} \\frac{\\partial h}{\\partial \\mathbf{z}(t)} dtdz(t)â€‹=uh(wâŠ¤z(t)+b),âˆ‚tâˆ‚logp(z(t))â€‹=âˆ’uâŠ¤âˆ‚z(t)âˆ‚hâ€‹ ä¸åŒäºæ±‚è¡Œåˆ—å¼çš„å€¼ï¼Œæ±‚è¿¹è¿˜æ˜¯ä¸€ä¸ªè¿ç»­å‡½æ•°ï¼Œå› æ­¤å¦‚æœå¸¸å¾®åˆ†æ–¹ç¨‹dz/dtdz/dtdz/dt æ˜¯ç”±ä¸€ç»„å‡½æ•°çš„å’Œç»™å‡ºçš„ï¼Œé‚£ä¹ˆå¯¹æ•°æ¦‚ç‡å¯†åº¦ä¹Ÿå¯ä»¥ç›´æ¥ç”¨è¿¹çš„å’Œè¡¨ç¤ºï¼š dz(t)dt=âˆ‘n=1Mfn(z(t)),dlogâ¡p(z(t))dt=âˆ‘n=1Mtrâ¡(âˆ‚fnâˆ‚z)\\frac{d \\mathbf{z}(t)}{d t}=\\sum_{n=1}^{M} f_{n}(\\mathbf{z}(t)), \\quad \\frac{d \\log p(\\mathbf{z}(t))}{d t}=\\sum_{n=1}^{M} \\operatorname{tr}\\left(\\frac{\\partial f_{n}}{\\partial \\mathbf{z}}\\right) dtdz(t)â€‹=n=1âˆ‘Mâ€‹fnâ€‹(z(t)),dtdlogp(z(t))â€‹=n=1âˆ‘Mâ€‹tr(âˆ‚zâˆ‚fnâ€‹â€‹) å› æ­¤å¯¹äºæœ‰Mä¸ªéšè—çŠ¶æ€çš„è¿ç»­æµæ¨¡å‹æ¥è¯´ï¼Œè®¡ç®—æˆæœ¬ä»…ä»…æ˜¯O(M)\\mathcal{O}\\left(M\\right)O(M),è€Œå¹³é¢å½’ä¸€åŒ–æµçš„è®¡ç®—æˆæœ¬æ˜¯O(M3)\\mathcal{O}\\left(M^{3}\\right)O(M3) ã€‚ NFå’ŒCNFçš„æ¯”è¾ƒï¼š é€šè¿‡ODEå¯¹æ—¶é—´åºåˆ—å»ºæ¨¡ zt0âˆ¼p(zt0)z_{t_{0}} \\sim p\\left(z_{t_{0}}\\right) zt0â€‹â€‹âˆ¼p(zt0â€‹â€‹) zt1,zt2,â€¦,ztN=ODESolve(zt0,f,Î¸f,t0,â€¦,tN)z_{t_{1}}, z_{t_{2}}, \\ldots, z_{t_{N}} =ODESolve(z_{t_0},f,\\theta_f,t_0,\\ldots,t_N) zt1â€‹â€‹,zt2â€‹â€‹,â€¦,ztNâ€‹â€‹=ODESolve(zt0â€‹â€‹,f,Î¸fâ€‹,t0â€‹,â€¦,tNâ€‹) eachxtiâˆ¼p(xâˆ£zti,Î¸X)each \\quad x_{t_i} \\sim p(x|z_{t_i},\\theta_X) eachxtiâ€‹â€‹âˆ¼p(xâˆ£ztiâ€‹â€‹,Î¸Xâ€‹) å…·ä½“è€Œè¨€ï¼Œåœ¨ç»™å®šåˆå§‹çŠ¶æ€ z0z_0z0â€‹ å’Œè§‚æµ‹æ—¶é—´ t0,â€¦tNt_0,\\ldots t_Nt0â€‹,â€¦tNâ€‹ çš„æƒ…å†µä¸‹ï¼Œè¯¥æ¨¡å‹è®¡ç®—æ½œåœ¨çŠ¶æ€ zt1â€¦ztNz_{t_1} \\ldots z_{t_N}zt1â€‹â€‹â€¦ztNâ€‹â€‹ å’Œè¾“å‡º xt1â€¦xtNx_{t_1} \\ldots x_{t_N}xt1â€‹â€‹â€¦xtNâ€‹â€‹ã€‚åœ¨å®éªŒéƒ¨åˆ†ï¼Œåˆå§‹çŠ¶æ€z0z_0z0â€‹ç”±RNNç¼–ç äº§ç”Ÿï¼Œæ½œåœ¨çŠ¶æ€zt1â€¦ztNz_{t_1} \\ldots z_{t_N}zt1â€‹â€‹â€¦ztNâ€‹â€‹ ç”±ODESolveäº§ç”Ÿï¼Œå…¶ä¸­çš„fff ç”¨ç¥ç»ç½‘ç»œè®­ç»ƒï¼Œç„¶ååˆ©ç”¨VAEçš„æ–¹å¼ä»æ½œåœ¨çŠ¶æ€ä¸­ç”Ÿæˆæ•°æ®ã€‚ å®éªŒï¼šä»é‡‡æ ·ç‚¹è¿›è¡Œèºæ—‹çº¿é‡å»º å‡æ–¹å·®æ¯”è¾ƒï¼š é™„å½• ä¼´éšæ³•çš„è¯æ˜ å¯¹äºz(t)z(t)z(t) ç»™å®šå¸¸å¾®åˆ†æ–¹ç¨‹ï¼š dz(t)d(t)=f(z(t),t,Î¸)\\frac{dz(t)}{d(t)}=f(z(t),t,\\theta) d(t)dz(t)â€‹=f(z(t),t,Î¸) L(z(t1))=L(âˆ«t0t1f(z(t),t,Î¸)dt)=L( ODESolve(z (t0),f,t0,t1,Î¸))\\left.L\\left(\\mathbf{z}\\left(t_{1}\\right)\\right)=L\\left(\\int_{t_{0}}^{t_{1}} f(\\mathbf{z}(t), t, \\theta) d t\\right)=L\\left(\\text { ODESolve(z }\\left(t_{0}\\right), f, t_{0}, t_{1}, \\theta\\right)\\right) L(z(t1â€‹))=L(âˆ«t0â€‹t1â€‹â€‹f(z(t),t,Î¸)dt)=L( ODESolve(z (t0â€‹),f,t0â€‹,t1â€‹,Î¸)) å®šä¹‰ä¾¿éšçŠ¶æ€ï¼š a(t)=âˆ’âˆ‚L/âˆ‚z(t)a(t) = - \\partial L / \\partial \\mathbf{z}(t) a(t)=âˆ’âˆ‚L/âˆ‚z(t) åˆ™ï¼š da(t)dt=âˆ’a(t)âŠ¤âˆ‚f(z(t),t,Î¸)âˆ‚z(2)\\frac{d a(t)}{d t}=-a(t)^{\\top} \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial \\mathbf{z}}\\tag{2} dtda(t)â€‹=âˆ’a(t)âŠ¤âˆ‚zâˆ‚f(z(t),t,Î¸)â€‹(2) è¯æ˜ï¼š z(t+Îµ)=âˆ«tt+Îµf(z(t),t,Î¸)dt+z(t)=TÎµ(z(t),t)\\mathbf{z}(t+\\varepsilon)=\\int_{t}^{t+\\varepsilon} f(\\mathbf{z}(t), t, \\theta) d t+\\mathbf{z}(t)=T_{\\varepsilon}(\\mathbf{z}(t), t) z(t+Îµ)=âˆ«tt+Îµâ€‹f(z(t),t,Î¸)dt+z(t)=TÎµâ€‹(z(t),t) ç„¶ååº”ç”¨é“¾å¼æ³•åˆ™ï¼Œæœ‰ï¼š dLâˆ‚z(t)=dLdz(t+Îµ)dz(t+Îµ)dz(t) or a(t)=a(t+Îµ)âˆ‚TÎµ(z(t),t)âˆ‚z(t)\\frac{d L}{\\partial \\mathbf{z}(t)}=\\frac{d L}{d \\mathbf{z}(t+\\varepsilon)} \\frac{d \\mathbf{z}(t+\\varepsilon)}{d \\mathbf{z}(t)} \\quad \\text { or } \\quad \\mathbf{a}(t)=\\mathbf{a}(t+\\varepsilon) \\frac{\\partial T_{\\varepsilon}(\\mathbf{z}(t), t)}{\\partial \\mathbf{z}(t)} âˆ‚z(t)dLâ€‹=dz(t+Îµ)dLâ€‹dz(t)dz(t+Îµ)â€‹ or a(t)=a(t+Îµ)âˆ‚z(t)âˆ‚TÎµâ€‹(z(t),t)â€‹ åˆ©ç”¨å¯¼æ•°å®šä¹‰ï¼Œå¹¶è¿›è¡Œæ³°å‹’å±•å¼€è¿›è¡ŒåŒ–ç®€è®¡ç®—ï¼š da(t)dt=limâ¡Îµâ†’0+a(t+Îµ)âˆ’a(t)Îµ=limâ¡Îµâ†’0+a(t+Îµ)âˆ’a(t+Îµ)âˆ‚âˆ‚z(t)TÎµ(z(t))Îµ=limâ¡Îµâ†’0+a(t+Îµ)âˆ’a(t+Îµ)âˆ‚âˆ‚z(t)(z(t)+Îµf(z(t),t,Î¸)+O(Îµ2))Îµ=limâ¡Îµâ†’0+a(t+Îµ)âˆ’a(t+Îµ)(I+Îµâˆ‚f(z(t),t,Î¸)Î¸z(t)+O(Îµ2))Îµ=limâ¡Îµâ†’0+âˆ’Îµa(t+Îµ)âˆ‚f(z(t),t,Î¸)âˆ‚z(t)+O(Îµ2)Îµ=limâ¡Îµâ†’0+âˆ’a(t+Îµ)âˆ‚f(z(t),t,Î¸)âˆ‚z(t)+O(Îµ)=âˆ’a(t)âˆ‚f(z(t),t,Î¸)âˆ‚z(t)\\begin{aligned} \\frac{d \\mathbf{a}(t)}{d t} &amp;=\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\mathbf{a}(t+\\varepsilon)-\\mathbf{a}(t)}{\\varepsilon} \\\\ &amp;=\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\mathbf{a}(t+\\varepsilon)-\\mathbf{a}(t+\\varepsilon) \\frac{\\partial}{\\partial \\mathbf{z}(t)} T_{\\varepsilon}(\\mathbf{z}(t))}{\\varepsilon} \\\\ &amp;=\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\mathbf{a}(t+\\varepsilon)-\\mathbf{a}(t+\\varepsilon) \\frac{\\partial}{\\partial \\mathbf{z}(t)}\\left(\\mathbf{z}(t)+\\varepsilon f(\\mathbf{z}(t), t, \\theta)+\\mathcal{O}\\left(\\varepsilon^{2}\\right)\\right)}{\\varepsilon} \\\\ &amp;=\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\mathbf{a}(t+\\varepsilon)-\\mathbf{a}(t+\\varepsilon)\\left(I+\\varepsilon \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\theta \\mathbf{z}(t)}+\\mathcal{O}\\left(\\varepsilon^{2}\\right)\\right)}{\\varepsilon} \\\\ &amp;=\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{-\\varepsilon \\mathbf{a}(t+\\varepsilon) \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial \\mathbf{z}(t)}+\\mathcal{O}\\left(\\varepsilon^{2}\\right)}{\\varepsilon} \\\\ &amp;=\\lim _{\\varepsilon \\rightarrow 0^{+}}-\\mathbf{a}(t+\\varepsilon) \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial \\mathbf{z}(t)}+\\mathcal{O}(\\varepsilon) \\\\ &amp;=-\\mathbf{a}(t) \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial \\mathbf{z}(t)} \\end{aligned} dtda(t)â€‹â€‹=Îµâ†’0+limâ€‹Îµa(t+Îµ)âˆ’a(t)â€‹=Îµâ†’0+limâ€‹Îµa(t+Îµ)âˆ’a(t+Îµ)âˆ‚z(t)âˆ‚â€‹TÎµâ€‹(z(t))â€‹=Îµâ†’0+limâ€‹Îµa(t+Îµ)âˆ’a(t+Îµ)âˆ‚z(t)âˆ‚â€‹(z(t)+Îµf(z(t),t,Î¸)+O(Îµ2))â€‹=Îµâ†’0+limâ€‹Îµa(t+Îµ)âˆ’a(t+Îµ)(I+ÎµÎ¸z(t)âˆ‚f(z(t),t,Î¸)â€‹+O(Îµ2))â€‹=Îµâ†’0+limâ€‹Îµâˆ’Îµa(t+Îµ)âˆ‚z(t)âˆ‚f(z(t),t,Î¸)â€‹+O(Îµ2)â€‹=Îµâ†’0+limâ€‹âˆ’a(t+Îµ)âˆ‚z(t)âˆ‚f(z(t),t,Î¸)â€‹+O(Îµ)=âˆ’a(t)âˆ‚z(t)âˆ‚f(z(t),t,Î¸)â€‹â€‹ å¯¹äºÎ¸\\thetaÎ¸ å’Œttt å®šä¹‰å¢å¼ºçŠ¶æ€ï¼š ddt[zÎ¸t](t)=faugâ¡([z,Î¸,t]):=[f([z,Î¸,t])01],aaug:=[aaÎ¸at],aÎ¸(t):=dLdÎ¸(t),at(t):=dLdt(t)\\frac{d}{d t}\\left[\\begin{array}{l} \\mathrm{z} \\\\ \\theta \\\\ t \\end{array}\\right](t)=f_{\\operatorname{aug}}([\\mathrm{z}, \\theta, t]):=\\left[\\begin{array}{c} f([\\mathrm{z}, \\theta, t]) \\\\ 0 \\\\ 1 \\end{array}\\right], \\mathbf{a}_{a u g}:=\\left[\\begin{array}{l} \\mathrm{a} \\\\ \\mathrm{a}_{\\theta} \\\\ \\mathrm{a}_{t} \\end{array}\\right], \\mathrm{a}_{\\theta}(t):=\\frac{d L}{d \\theta(t)}, \\mathrm{a}_{t}(t):=\\frac{d L}{d t(t)} dtdâ€‹â£â¡â€‹zÎ¸tâ€‹â¦â¤â€‹(t)=faugâ€‹([z,Î¸,t]):=â£â¡â€‹f([z,Î¸,t])01â€‹â¦â¤â€‹,aaugâ€‹:=â£â¡â€‹aaÎ¸â€‹atâ€‹â€‹â¦â¤â€‹,aÎ¸â€‹(t):=dÎ¸(t)dLâ€‹,atâ€‹(t):=dt(t)dLâ€‹ å…¶ä¸­Î¸\\thetaÎ¸ å’Œttt æ— å…³ï¼Œå³dÎ¸(t)/dt=0,dt(t)/dt=1d\\theta(t) /dt=0,dt(t)/dt=1dÎ¸(t)/dt=0,dt(t)/dt=1 è®¡ç®—é›…å¯æ¯”è¡Œåˆ—å¼ï¼š âˆ‚faugâˆ‚[z,Î¸,t]=[âˆ‚fâˆ‚zâˆ‚fâˆ‚Î¸âˆ‚fâˆ‚t000000]\\frac{\\partial f_{a u g}}{\\partial[\\mathbf{z}, \\theta, t]}=\\left[\\begin{array}{ccc} \\frac{\\partial f}{\\partial z} &amp; \\frac{\\partial f}{\\partial \\theta} &amp; \\frac{\\partial f}{\\partial t} \\\\ 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 \\end{array}\\right] âˆ‚[z,Î¸,t]âˆ‚faugâ€‹â€‹=â£â¡â€‹âˆ‚zâˆ‚fâ€‹00â€‹âˆ‚Î¸âˆ‚fâ€‹00â€‹âˆ‚tâˆ‚fâ€‹00â€‹â¦â¤â€‹ ç›´æ¥å°†faugf_{aug}faugâ€‹ å’Œaauga_{aug}aaugâ€‹ ä»£å…¥ä¸Šä¸€å°èŠ‚çš„ä¼´éšæ³•å…¬å¼ï¼š daaug(t)dt=âˆ’[a(t)aÎ¸(t)at(t)]âˆ‚faugâˆ‚[z,Î¸,t](t)=âˆ’[aâˆ‚fâˆ‚zaâˆ‚fâˆ‚Î¸aâˆ‚fâˆ‚t](t)\\frac{d \\mathbf{a}_{a u g}(t)}{d t}=-\\left[\\begin{array}{lllll} \\mathbf{a}(t) &amp; \\mathbf{a}_{\\theta}(t) &amp; \\mathbf{a}_{t}(t) \\end{array}\\right] \\frac{\\partial f_{\\text {aug}}}{\\partial[\\mathbf{z}, \\theta, t]}(t)=-\\left[\\begin{array}{lll} \\mathbf{a} \\frac{\\partial f}{\\partial \\mathbf{z}} &amp; \\mathbf{a} \\frac{\\partial f}{\\partial \\theta} &amp; \\mathbf{a} \\frac{\\partial f}{\\partial t} \\end{array}\\right](t) dtdaaugâ€‹(t)â€‹=âˆ’[a(t)â€‹aÎ¸â€‹(t)â€‹atâ€‹(t)â€‹]âˆ‚[z,Î¸,t]âˆ‚faugâ€‹â€‹(t)=âˆ’[aâˆ‚zâˆ‚fâ€‹â€‹aâˆ‚Î¸âˆ‚fâ€‹â€‹aâˆ‚tâˆ‚fâ€‹â€‹](t) äºæ˜¯å¾—åˆ°äº†æœ€ç»ˆçš„ç»“è®ºï¼š dLdÎ¸=âˆ«tNt0a(t)âˆ‚f(z(t),t,Î¸)âˆ‚Î¸dt\\frac{d L}{d \\theta}=\\int_{t_{N}}^{t_{0}} \\mathbf{a}(t) \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial \\theta} d t dÎ¸dLâ€‹=âˆ«tNâ€‹t0â€‹â€‹a(t)âˆ‚Î¸âˆ‚f(z(t),t,Î¸)â€‹dt dLdtN=âˆ’a(tN)âˆ‚f(z(tN),tN,Î¸)âˆ‚tNdLdt0=âˆ«tNt0a(t)âˆ‚f(z(t),t,Î¸)âˆ‚tdt\\frac{d L}{d t_{N}}=-\\mathbf{a}\\left(t_{N}\\right) \\frac{\\partial f\\left(\\mathbf{z}\\left(t_{N}\\right), t_{N}, \\theta\\right)}{\\partial t_{N}} \\quad \\frac{d L}{d t_{0}}=\\int_{t_{N}}^{t_{0}} \\mathbf{a}(t) \\frac{\\partial f(\\mathbf{z}(t), t, \\theta)}{\\partial t} d t dtNâ€‹dLâ€‹=âˆ’a(tNâ€‹)âˆ‚tNâ€‹âˆ‚f(z(tNâ€‹),tNâ€‹,Î¸)â€‹dt0â€‹dLâ€‹=âˆ«tNâ€‹t0â€‹â€‹a(t)âˆ‚tâˆ‚f(z(t),t,Î¸)â€‹dt æ¢¯åº¦å˜å…ƒå®šç†çš„è¯æ˜ ç»™å®šå¸¸å¾®åˆ†æ–¹ç¨‹ï¼š dz(t)d(t)=f(z(t),t)\\frac{dz(t)}{d(t)}=f(z(t),t) d(t)dz(t)â€‹=f(z(t),t) fff è¦æ±‚å¯¹zzz Lipschitzè¿ç»­ï¼Œå¯¹ttt è¿ç»­ã€‚åˆ™å¯¹æ•°æ¦‚ç‡å¯†åº¦æ»¡è¶³ï¼š âˆ‚logâ¡p(z(t))âˆ‚t=âˆ’trâ¡(dfdz(t))\\frac{\\partial \\log p(\\mathbf{z}(t))}{\\partial t}=-\\operatorname{tr}\\left(\\frac{d f}{d \\mathbf{z}}(t)\\right) âˆ‚tâˆ‚logp(z(t))â€‹=âˆ’tr(dzdfâ€‹(t)) è¯æ˜ï¼š é¦–å…ˆç±»ä¼¼ä¸Šé¢ä¼´éšæ³•è¯æ˜çš„è¿‡ç¨‹ï¼Œå°†z(t+Îµ)z(t+\\varepsilon)z(t+Îµ) è¡¨ç¤ºä¸ºTÎµ(z(t))T_{\\varepsilon}(\\mathbf{z}(t))TÎµâ€‹(z(t)) fff è¦æ±‚å¯¹zzz Lipschitzè¿ç»­ï¼Œå¯¹ttt è¿ç»­ã€‚è¿™æ˜¯ä¸ºäº†ä½¿æ–¹ç¨‹æ»¡è¶³Picardå­˜åœ¨å®šç†ï¼Œä½¿å¾—è§£å­˜åœ¨ä¸”å”¯ä¸€ã€‚ é¦–å…ˆæ˜¯è¦æ¨å¯¼å‡º âˆ‚logâ¡p(z(t))âˆ‚t=âˆ’trâ¡(limâ¡Îµâ†’0+âˆ‚âˆ‚Ïµâˆ‚âˆ‚zTÎµ(z(t)))\\frac{\\partial \\log p(z(t))}{\\partial t}=-\\operatorname{tr}\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\partial}{\\partial \\epsilon} \\frac{\\partial}{\\partial z} T_{\\varepsilon}(z(t))\\right) âˆ‚tâˆ‚logp(z(t))â€‹=âˆ’tr(Îµâ†’0+limâ€‹âˆ‚Ïµâˆ‚â€‹âˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))) è¿‡ç¨‹ï¼š âˆ‚logâ¡p(z(t))âˆ‚t=limâ¡Îµâ†’0+logâ¡p(z(t))âˆ’logâ¡âˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£âˆ’logâ¡p(z(t))Îµ=âˆ’limâ¡Îµâ†’0+logâ¡âˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£Îµ=âˆ’limâ¡Îµâ†’0+âˆ‚âˆ‚Îµlogâ¡âˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£âˆ‚âˆ‚ÎµÎµ=âˆ’limâ¡Îµâ†’0+âˆ‚âˆ‚Îµâˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£âˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£(âˆ‚logâ¡(z)âˆ‚zâˆ£z=1=1)=âˆ’(limâ¡Îµâ†’0+âˆ‚âˆ‚Îµâˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£)âŸbounded (limâ¡Îµâ†’0+1âˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£)=âˆ’limâ¡Îµâ†’0+âˆ‚âˆ‚Îµâˆ£detâ¡âˆ‚âˆ‚zTÎµ(z(t))âˆ£\\begin{aligned} \\frac{\\partial \\log p(\\mathbf{z}(t))}{\\partial t} &amp;=\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\log p(\\mathbf{z}(t))-\\log \\left|\\operatorname{det} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right|-\\log p(\\mathbf{z}(t))}{\\varepsilon} \\\\ &amp;=-\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\log \\left|\\operatorname{det} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right|}{\\varepsilon}\\\\ &amp;=-\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\frac{\\partial}{\\partial \\varepsilon} \\log \\left|\\operatorname{det} \\frac{\\partial}{\\partial z} T_{\\varepsilon}(\\mathbf{z}(t))\\right|}{\\frac{\\partial}{\\partial \\varepsilon} \\varepsilon}\\\\ &amp;=-\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\frac{\\partial}{\\partial \\varepsilon}\\left|\\operatorname{det} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right|}{\\left|\\operatorname{det} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right|} \\qquad \\qquad \\quad \\left(\\left.\\frac{\\partial \\log (\\mathbf{z})}{\\partial \\mathbf{z}}\\right|_{\\mathbf{z}=1}=1\\right)\\\\ &amp;=-\\underbrace{\\left(\\lim _{\\varepsilon \\rightarrow 0+} \\frac{\\partial}{\\partial \\varepsilon}\\left|\\operatorname{det} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right|\\right)}_{\\text {bounded }}\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{1}{\\left|\\operatorname{det} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right|}\\right)\\\\ &amp;=-\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\partial}{\\partial \\varepsilon}\\left|\\operatorname{det} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right| \\end{aligned} âˆ‚tâˆ‚logp(z(t))â€‹â€‹=Îµâ†’0+limâ€‹Îµlogp(z(t))âˆ’logâˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£â€‹âˆ’logp(z(t))â€‹=âˆ’Îµâ†’0+limâ€‹Îµlogâˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£â€‹â€‹=âˆ’Îµâ†’0+limâ€‹âˆ‚Îµâˆ‚â€‹Îµâˆ‚Îµâˆ‚â€‹logâˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£â€‹â€‹=âˆ’Îµâ†’0+limâ€‹âˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£â€‹âˆ‚Îµâˆ‚â€‹âˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£â€‹â€‹(âˆ‚zâˆ‚log(z)â€‹âˆ£âˆ£âˆ£âˆ£â€‹z=1â€‹=1)=âˆ’bounded (Îµâ†’0+limâ€‹âˆ‚Îµâˆ‚â€‹âˆ£âˆ£âˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£âˆ£âˆ£â€‹)â€‹â€‹(Îµâ†’0+limâ€‹âˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£â€‹1â€‹)=âˆ’Îµâ†’0+limâ€‹âˆ‚Îµâˆ‚â€‹âˆ£âˆ£âˆ£âˆ£â€‹detâˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))âˆ£âˆ£âˆ£âˆ£â€‹â€‹ ç¬¬ä¸€æ­¥ç”¨åˆ°çš„æ˜¯æµæ¨¡å‹ä¸­çš„å…¬å¼(æœ¬è´¨æ˜¯æ¦‚ç‡å¯†åº¦ä¸Šçš„é›…å¯æ¯”å…¬å¼)ï¼Œåé¢ä»…ç”¨åˆ°æ´›å¿…è¾¾æ³•åˆ™ã€é“¾å¼æ³•åˆ™ç­‰ç®€å•æŠ€å·§ã€‚ ç„¶ååº”ç”¨é›…å¯æ¯”å…¬å¼ï¼š âˆ‚logâ¡p(z(t))âˆ‚t=âˆ’limâ¡Îµâ†’0+trâ¡(adjâ¡(âˆ‚âˆ‚zTÎµ(z(t)))âˆ‚âˆ‚Îµâˆ‚âˆ‚zTÎµ(z(t)))=âˆ’trâ¡((limâ¡Îµâ†’0+adjâ¡(âˆ‚âˆ‚zTÎµ(z(t))))âŸ=I(limâ¡Îµâ†’0+âˆ‚âˆ‚Îµâˆ‚âˆ‚zTÎµ(z(t))))=âˆ’trâ¡(limâ¡Îµâ†’0+âˆ‚âˆ‚Îµâˆ‚âˆ‚zTÎµ(z(t)))\\begin{aligned} \\frac{\\partial \\log p(\\mathbf{z}(t))}{\\partial t} &amp;=-\\lim _{\\varepsilon \\rightarrow 0^{+}} \\operatorname{tr}\\left(\\operatorname{adj}\\left(\\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right) \\frac{\\partial}{\\partial \\varepsilon} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right) \\\\ &amp;=-\\operatorname{tr}\\left(\\underbrace{\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}} \\operatorname{adj}\\left(\\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right)\\right)}_{=I}\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\partial}{\\partial \\varepsilon} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right)\\right) \\\\ &amp;=-\\operatorname{tr}\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\partial}{\\partial \\varepsilon} \\frac{\\partial}{\\partial \\mathbf{z}} T_{\\varepsilon}(\\mathbf{z}(t))\\right) \\end{aligned} âˆ‚tâˆ‚logp(z(t))â€‹â€‹=âˆ’Îµâ†’0+limâ€‹tr(adj(âˆ‚zâˆ‚â€‹TÎµâ€‹(z(t)))âˆ‚Îµâˆ‚â€‹âˆ‚zâˆ‚â€‹TÎµâ€‹(z(t)))=âˆ’trââœâœâ›â€‹=I(Îµâ†’0+limâ€‹adj(âˆ‚zâˆ‚â€‹TÎµâ€‹(z(t))))â€‹â€‹(Îµâ†’0+limâ€‹âˆ‚Îµâˆ‚â€‹âˆ‚zâˆ‚â€‹TÎµâ€‹(z(t)))â âŸâŸââ€‹=âˆ’tr(Îµâ†’0+limâ€‹âˆ‚Îµâˆ‚â€‹âˆ‚zâˆ‚â€‹TÎµâ€‹(z(t)))â€‹ é›…å¯æ¯”å…¬å¼æ˜¯ï¼š ddtdet(A(t))=tr(adj(A(t))ddtA(t))\\frac{d}{dt}det(A(t))=tr(adj(A(t))\\frac{d}{dt}A(t)) dtdâ€‹det(A(t))=tr(adj(A(t))dtdâ€‹A(t)) æœ€åè¿›è¡Œæ³°å‹’å±•å¼€å³å¯ï¼š âˆ‚logâ¡p(z(t))âˆ‚t=âˆ’trâ¡(limâ¡Îµâ†’0+âˆ‚âˆ‚Îµâˆ‚âˆ‚z(z+Îµf(z(t),t)+O(Îµ2)+O(Îµ3)+â€¦))=âˆ’trâ¡(limâ¡Îµâ†’0+âˆ‚âˆ‚Îµ(I+âˆ‚âˆ‚zÎµf(z(t),t)+O(Îµ2)+O(Îµ3)+â€¦))=âˆ’trâ¡(limâ¡Îµâ†’0+(âˆ‚âˆ‚zf(z(t),t)+O(Îµ)+O(Îµ2)+â€¦))=âˆ’trâ¡(âˆ‚âˆ‚zf(z(t),t))\\begin{aligned} \\frac{\\partial \\log p(\\mathbf{z}(t))}{\\partial t} &amp;=-\\operatorname{tr}\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\partial}{\\partial \\varepsilon} \\frac{\\partial}{\\partial \\mathbf{z}}\\left(\\mathbf{z}+\\varepsilon f(\\mathbf{z}(t), t)+\\mathcal{O}\\left(\\varepsilon^{2}\\right)+\\mathcal{O}\\left(\\varepsilon^{3}\\right)+\\ldots\\right)\\right) \\\\ &amp;=-\\operatorname{tr}\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}} \\frac{\\partial}{\\partial \\varepsilon}\\left(I+\\frac{\\partial}{\\partial \\mathbf{z}} \\varepsilon f(\\mathbf{z}(t), t)+\\mathcal{O}\\left(\\varepsilon^{2}\\right)+\\mathcal{O}\\left(\\varepsilon^{3}\\right)+\\ldots\\right)\\right) \\\\ &amp;=-\\operatorname{tr}\\left(\\lim _{\\varepsilon \\rightarrow 0^{+}}\\left(\\frac{\\partial}{\\partial \\mathbf{z}} f(\\mathbf{z}(t), t)+\\mathcal{O}(\\varepsilon)+\\mathcal{O}\\left(\\varepsilon^{2}\\right)+\\ldots\\right)\\right) \\\\ &amp;=-\\operatorname{tr}\\left(\\frac{\\partial}{\\partial \\mathbf{z}} f(\\mathbf{z}(t), t)\\right) \\end{aligned} âˆ‚tâˆ‚logp(z(t))â€‹â€‹=âˆ’tr(Îµâ†’0+limâ€‹âˆ‚Îµâˆ‚â€‹âˆ‚zâˆ‚â€‹(z+Îµf(z(t),t)+O(Îµ2)+O(Îµ3)+â€¦))=âˆ’tr(Îµâ†’0+limâ€‹âˆ‚Îµâˆ‚â€‹(I+âˆ‚zâˆ‚â€‹Îµf(z(t),t)+O(Îµ2)+O(Îµ3)+â€¦))=âˆ’tr(Îµâ†’0+limâ€‹(âˆ‚zâˆ‚â€‹f(z(t),t)+O(Îµ)+O(Îµ2)+â€¦))=âˆ’tr(âˆ‚zâˆ‚â€‹f(z(t),t))â€‹","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"/categories/å­¦ä¹ /"}],"tags":[{"name":"neural ode","slug":"neural-ode","permalink":"/tags/neural-ode/"}],"keywords":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"/categories/å­¦ä¹ /"}]},{"title":"gan,vaeå’Œflow","slug":"GAN VAE and Flow","date":"2020-02-15T13:19:00.000Z","updated":"2020-03-09T13:36:05.975Z","comments":true,"path":"2020/02/15/GAN VAE and Flow/","link":"","permalink":"/2020/02/15/GAN VAE and Flow/","excerpt":"","text":"å‰è¨€ GANï¼ŒVAEå’ŒFLOWçš„ç›®æ ‡æ˜¯ä¸€è‡´çš„â€”â€”å¸Œæœ›æ„å»ºä¸€ä¸ªä»éšå˜é‡ZZZç”Ÿæˆç›®æ ‡æ•°æ®XXXçš„æ¨¡å‹ï¼Œå…¶ä¸­å…ˆéªŒåˆ†å¸ƒP(z)P(z)P(z)é€šå¸¸è¢«è®¾ç½®ä¸ºé«˜æ–¯åˆ†å¸ƒã€‚æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªå˜æ¢å‡½æ•°f(x)f(x)f(x)ï¼Œä»–èƒ½å»ºç«‹ä¸€ä¸ªä»zzzåˆ°xxxçš„æ˜ å°„ï¼šf:zâ†’xf:z\\to xf:zâ†’xï¼Œç„¶ååœ¨P(Z)P(Z)P(Z)ä¸­éšæœºé‡‡æ ·ä¸€ä¸ªç‚¹zâ€²z&#x27;zâ€²ï¼Œé€šè¿‡æ˜ å°„fffï¼Œå°±å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªæ–°çš„æ ·æœ¬ç‚¹xâ€²x&#x27;xâ€²ã€‚ ä¸¾ä¸ªæ —å­ï¼š å¦‚ä½•å°†å‡åŒ€åˆ†å¸ƒU[0,1]U[0,1]U[0,1]æ˜ å°„æˆæ­£æ€åˆ†å¸ƒN(0,1)N(0,1)N(0,1)ï¼Ÿ å°†Xâˆ¼U[0,1]X \\sim U[0,1]Xâˆ¼U[0,1]ç»è¿‡å‡½æ•°Y=f(x)Y = f(x)Y=f(x)æ˜ å°„ä¹‹åï¼Œå°±æœ‰Yâˆ¼N(0,1)Y\\sim N(0,1)Yâˆ¼N(0,1)äº†é‚£ä¹ˆ[x,x+dx][x,x+dx][x,x+dx]å’Œ[y,y+dy][y,y+dy][y,y+dy]ä¸¤ä¸ªåŒºé—´ä¸Šçš„æ¦‚ç‡åº”è¯¥ç›¸ç­‰ï¼Œå³ï¼š Ï(x)dx=12Ï€expâ¡(âˆ’y22)dy\\rho(x) d x=\\frac{1}{\\sqrt{2 \\pi}} \\exp \\left(-\\frac{y^{2}}{2}\\right) d y Ï(x)dx=2Ï€â€‹1â€‹exp(âˆ’2y2â€‹)dy å¯¹å…¶è¿›è¡Œç§¯åˆ†ï¼Œæœ‰ï¼š âˆ«0xÏ(t)dt=âˆ«âˆ’âˆy12Ï€expâ¡(âˆ’t22)dt=Î¦(y)\\int_{0}^{x} \\rho(t) d t=\\int_{-\\infty}^{y} \\frac{1}{\\sqrt{2 \\pi}} \\exp \\left(-\\frac{t^{2}}{2}\\right) d t=\\Phi(y) âˆ«0xâ€‹Ï(t)dt=âˆ«âˆ’âˆyâ€‹2Ï€â€‹1â€‹exp(âˆ’2t2â€‹)dt=Î¦(y) y=Î¦âˆ’1(âˆ«0xÏ(t)dt)=f(x)y=\\Phi^{-1}\\left(\\int_{0}^{x} \\rho(t) d t\\right)=f(x) y=Î¦âˆ’1(âˆ«0xâ€‹Ï(t)dt)=f(x) å¯ä»¥çœ‹åˆ°Y=f(X)Y = f(X)Y=f(X)çš„è§£æ˜¯å­˜åœ¨çš„ï¼Œä½†å¾ˆå¤æ‚ï¼Œæ— æ³•ç”¨åˆç­‰å‡½æ•°è¿›è¡Œæ˜¾ç¤ºçš„è¡¨ç¤ºï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ç¥ç»ç½‘ç»œæ¥æ‹Ÿåˆè¿™ä¸ªå‡½æ•°ã€‚ å‡è®¾æˆ‘ä»¬ç°åœ¨å·²ç»æœ‰ä¸€ä¸ªæ˜ å°„fffï¼Œæˆ‘ä»¬å¦‚ä½•è¡¡é‡æ˜ å°„fffæ„é€ å‡ºæ¥çš„æ•°æ®é›†f(z1),f(z2),...,f(zn)f(z_1),f(z_2),...,f(z_n)f(z1â€‹),f(z2â€‹),...,f(znâ€‹)ï¼Œæ˜¯å¦å’Œç›®æ ‡æ•°æ®XXXåˆ†å¸ƒç›¸åŒï¼Ÿ(æ³¨ï¼šKLå’ŒJSè·ç¦»æ ¹æ®ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„è¡¨è¾¾å¼è®¡ç®—åˆ†å¸ƒçš„ç›¸ä¼¼åº¦ï¼Œè€Œæˆ‘ä»¬ç°åœ¨åªæœ‰ä»æ„é€ çš„åˆ†å¸ƒé‡‡æ ·çš„æ•°æ®å’ŒçœŸå®åˆ†å¸ƒé‡‡æ ·çš„æ•°æ®ï¼Œè€Œç¦»æ•£åŒ–çš„KLå’ŒJSè·ç¦»å› ä¸ºå›¾åƒç»´åº¦é—®é¢˜ï¼Œè®¡ç®—é‡éå¸¸å¤§)ã€‚åœ¨è¿™é‡ŒGANé‡‡ç”¨äº†ä¸€ä¸ªæš´åŠ›çš„åŠæ³•ï¼šè®­ç»ƒä¸€ä¸ªåˆ¤åˆ«å™¨ä½œä¸ºä¸¤è€…ç›¸ä¼¼æ€§çš„åº¦é‡ï¼Œè€ŒVAE(å˜åˆ†è‡ªç¼–ç å™¨)å’ŒFLOW(æµæ¨¡å‹)åœ¨æœ€å¤§åŒ–æœ€å¤§ä¼¼ç„¶ã€‚ VAE(å˜åˆ†è‡ªç¼–ç å™¨) VAEçš„åŸºæœ¬æ€è·¯ å¯¹äºè¿ç»­éšæœºå˜é‡ï¼Œæ¦‚ç‡åˆ†å¸ƒPPPå’ŒQQQï¼ŒKLæ•£åº¦(åˆç§°ç›¸å¯¹ç†µ)çš„å®šä¹‰ä¸ºï¼š DKL(Pâˆ¥Q)=âˆ«âˆ’âˆâˆp(x)lnâ¡p(x)q(x)dx=Exâˆ¼P(x)[logP(x)âˆ’logQ(x)]D_{\\mathrm{KL}}(P \\| Q)=\\int_{-\\infty}^{\\infty} p(x) \\ln \\frac{p(x)}{q(x)} \\mathrm{d} x=E_{x \\sim P(x)}[logP(x)-logQ(x)] DKLâ€‹(Pâˆ¥Q)=âˆ«âˆ’âˆâˆâ€‹p(x)lnq(x)p(x)â€‹dx=Exâˆ¼P(x)â€‹[logP(x)âˆ’logQ(x)] ç»™å®šä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒDDD,å·²çŸ¥å…¶æ¦‚ç‡å¯†åº¦å‡½æ•°(è¿ç»­åˆ†å¸ƒ)æˆ–æ¦‚ç‡è´¨é‡å‡½æ•°()ç¦»æ•£åˆ†å¸ƒä¸ºfDf_DfDâ€‹ï¼Œä»¥åŠä¸€ä¸ªåˆ†å¸ƒå‚æ•°Î¸\\thetaÎ¸ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªåˆ†å¸ƒä¸­æŠ½å‡ºä¸€ä¸ªå…·æœ‰nnnä¸ªå€¼çš„é‡‡æ ·X1,X2,...,XnX_1,X_2,...,X_nX1â€‹,X2â€‹,...,Xnâ€‹ï¼Œåˆ©ç”¨fDf_DfDâ€‹è®¡ç®—å‡ºå…¶ä¼¼ç„¶å‡½æ•°ï¼š L(Î¸âˆ£x1,â€¦,xn)=fÎ¸(x1,â€¦,xn)\\mathbf{L}\\left(\\theta | x_{1}, \\ldots, x_{n}\\right)=f_{\\theta}\\left(x_{1}, \\ldots, x_{n}\\right) L(Î¸âˆ£x1â€‹,â€¦,xnâ€‹)=fÎ¸â€‹(x1â€‹,â€¦,xnâ€‹) è‹¥DDDæ˜¯ç¦»æ•£åˆ†å¸ƒï¼ŒfÎ¸f_{\\theta}fÎ¸â€‹å³æ˜¯åœ¨å‚æ•°ä¸ºÎ¸\\thetaÎ¸æ—¶è§‚æµ‹åˆ°è¿™ä¸€é‡‡æ ·çš„æ¦‚ç‡ã€‚è‹¥å…¶æ˜¯è¿ç»­åˆ†å¸ƒï¼ŒfÎ¸f_{\\theta}fÎ¸â€‹åˆ™ä¸ºX1,X2,...,XnX_1,X_2,...,X_nX1â€‹,X2â€‹,...,Xnâ€‹è”åˆåˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°åœ¨è§‚æµ‹å€¼å¤„çš„å–å€¼ã€‚ä¸€æ—¦æˆ‘ä»¬è·å¾—X1,X2,...,XnX_1,X_2,...,X_nX1â€‹,X2â€‹,...,Xnâ€‹ï¼Œæˆ‘ä»¬å°±èƒ½æ±‚å¾—ä¸€ä¸ªå…³äºÎ¸\\thetaÎ¸çš„ä¼°è®¡ã€‚æœ€å¤§ä¼¼ç„¶ä¼°è®¡ä¼šå¯»æ‰¾å…³äºçš„æœ€å¯èƒ½çš„å€¼ï¼ˆå³ï¼Œåœ¨æ‰€æœ‰å¯èƒ½çš„å–å€¼ä¸­ï¼Œå¯»æ‰¾ä¸€ä¸ªå€¼ä½¿è¿™ä¸ªé‡‡æ ·çš„â€œå¯èƒ½æ€§â€æœ€å¤§åŒ–ï¼‰ã€‚ä»æ•°å­¦ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çš„æ‰€æœ‰å¯èƒ½å–å€¼ä¸­å¯»æ‰¾ä¸€ä¸ªå€¼ä½¿å¾—ä¼¼ç„¶å‡½æ•°å–åˆ°æœ€å¤§å€¼ã€‚è¿™ä¸ªä½¿å¯èƒ½æ€§æœ€å¤§çš„å€¼å³ç§°ä¸ºçš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ã€‚ç”±å®šä¹‰ï¼Œæœ€å¤§ä¼¼ç„¶ä¼°è®¡æ˜¯æ ·æœ¬çš„å‡½æ•°ã€‚ VAEåšæœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œä¹Ÿå°±æ˜¯è¦æœ€å¤§åŒ–æ¦‚ç‡ï¼š P(X)=âˆ‘iP(Xâˆ£zi;Î¸)P(zi)P(X)=\\sum_{i} P\\left(X | z_{i} ; \\theta\\right) P\\left(z_{i}\\right) P(X)=iâˆ‘â€‹P(Xâˆ£ziâ€‹;Î¸)P(ziâ€‹) è¿™é‡Œå¯ä»¥ç†è§£ä¸ºä½¿ç”¨ç§¯åˆ†åˆ›é€ æ›´å¤šçš„åˆ†å¸ƒï¼Œä¸€èˆ¬é€‰æ‹©P(Z)P(Z)P(Z)æœä»ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Œè€Œp(Xâˆ£z)p(X|z)p(Xâˆ£z)å¯ä»¥æ˜¯ä»»æ„åˆ†å¸ƒï¼Œä¾‹å¦‚æ¡ä»¶é«˜æ–¯åˆ†å¸ƒæˆ–ç‹„æ‹‰å…‹åˆ†å¸ƒï¼Œç†è®ºä¸Šè®²ï¼Œè¿™ä¸ªç§¯åˆ†å½¢å¼çš„åˆ†å¸ƒå¯ä»¥æ‹Ÿåˆä»»æ„åˆ†å¸ƒã€‚ ä½†æ˜¯è¿™é‡Œçš„P(X)P(X)P(X)æ˜¯ç§¯åˆ†å½¢å¼çš„ï¼Œå¾ˆéš¾è¿›è¡Œè®¡ç®—ã€‚VAEä»è®©äººæœ›è€Œç”Ÿç•çš„å˜åˆ†å’Œè´å¶æ–¯ç†è®ºå‡ºå‘ï¼Œæ¨å¯¼å‡ºäº†ä¸€ä¸ªå¾ˆæ¥åœ°æ°”çš„å…¬å¼ï¼š logâ¡P(X)âˆ’D[Q(zâˆ£X)âˆ¥P(zâˆ£X)]=Ezâˆ¼Q[logâ¡P(Xâˆ£z)]âˆ’D[Q(zâˆ£X)âˆ¥P(z)](1)\\log P(X)-\\mathcal{D}[Q(z | X) \\| P(z | X)]=E_{z \\sim Q}[\\log P(X | z)]-\\mathcal{D}[Q(z | X) \\| P(z)] \\tag{1} logP(X)âˆ’D[Q(zâˆ£X)âˆ¥P(zâˆ£X)]=Ezâˆ¼Qâ€‹[logP(Xâˆ£z)]âˆ’D[Q(zâˆ£X)âˆ¥P(z)](1) VAEå¹¶æ²¡æœ‰é€‰æ‹©ç›´æ¥å»ä¼˜åŒ–P(X)P(X)P(X)ï¼Œè€Œæ˜¯é€‰æ‹©å»ä¼˜åŒ–ä»–çš„ä¸€ä¸ªå˜åˆ†ä¸‹ç•Œï¼ˆå…¬å¼1å³ç«¯ï¼‰ã€‚ è€ŒVAEçš„è‡ªç¼–ç å™¨æ€§è´¨ä¹Ÿä»è¿™ä¸ªå…¬å¼é‡Œå¼€å§‹ä½“ç°å‡ºæ¥ï¼šæˆ‘ä»¬å¯ä»¥å°†D[Q(zâˆ£X)âˆ¥P(z)]\\mathcal{D}[Q(z | X) \\| P(z)]D[Q(zâˆ£X)âˆ¥P(z)]è§†ä½œç¼–ç å™¨çš„ä¼˜åŒ–ï¼Œä½¿ç”±çœŸå®æ•°æ®ç¼–ç å‡ºçš„éšå˜é‡åˆ†å¸ƒQ(zâˆ£X)Q(z|X)Q(zâˆ£X)å»å°½é‡è¿‘ä¼¼P(z)P(z)P(z)ï¼ˆæ ‡å‡†é«˜æ–¯åˆ†å¸ƒï¼‰ï¼Œè€Œå°†Ezâˆ¼Q[logâ¡P(Xâˆ£z)]E_{z \\sim Q}[\\log P(X | z)]Ezâˆ¼Qâ€‹[logP(Xâˆ£z)]è§†ä½œè§£ç å™¨çš„ä¼˜åŒ–ï¼Œä½¿å¾—æœä»åˆ†å¸ƒQQQçš„éšå˜é‡zzzè§£ç å‡ºçš„xxxå°½å¯èƒ½åœ°æœä»çœŸæ˜¯æ•°æ®åˆ†å¸ƒï¼Œè€Œå°†D[Q(zâˆ£X)âˆ¥P(zâˆ£X)]\\mathcal{D}[Q(z | X) \\| P(z | X)]D[Q(zâˆ£X)âˆ¥P(zâˆ£X)]è§†ä½œè¯¯å·®é¡¹ã€‚ ä½†VAEä¹Ÿå› ä¸ºå®ƒå¹¶æ²¡æœ‰ç›´æ¥å»ä¼˜åŒ–P(X)P(X)P(X)ï¼Œè€Œé€‰æ‹©å»ä¼˜åŒ–å®ƒçš„å˜åˆ†ä¸‹ç•Œï¼Œä½¿å¾—ä»–åªæ˜¯ä¸€ä¸ªè¿‘ä¼¼æ¨¡å‹ï¼Œæ— æ³•ä¿è¯è‰¯å¥½çš„ç”Ÿæˆæ•ˆæœã€‚ VAEçš„ä¼˜åŒ–è¿‡ç¨‹ é¦–å…ˆè¦ç¡®å®šæ¦‚ç‡å¯†åº¦Q(zâˆ£X)Q(z|X)Q(zâˆ£X)çš„å½¢å¼ï¼Œä¸€èˆ¬é€‰æ‹©æ­£æ€åˆ†å¸ƒï¼Œå³N(Î¼,Ïƒ2)\\mathcal{N}\\left(\\mu, \\sigma^{2}\\right)N(Î¼,Ïƒ2)ï¼Œå…¶ä¸­Î¼(X;Î¸Î¼),Ïƒ2(X;Î¸Ïƒ)\\mu\\left(X ; \\theta_{\\mu}\\right) , \\sigma^{2}\\left(X ; \\theta_{\\sigma}\\right)Î¼(X;Î¸Î¼â€‹),Ïƒ2(X;Î¸Ïƒâ€‹)é€šè¿‡ä¸¤ä¸ªç¥ç»ç½‘ç»œ(ç¼–ç å™¨)è®­ç»ƒå‡ºæ¥ã€‚å…¬å¼ä¸­çš„D[Q(zâˆ£X)âˆ¥P(z)]\\mathcal{D}[Q(z | X) \\| P(z)]D[Q(zâˆ£X)âˆ¥P(z)]å˜ä¸ºD[N(Î¼(X;Î¸Î¼),Ïƒ2(X;Î¸Ïƒ))âˆ¥N(0,I)]D\\left[\\mathcal{N}\\left(\\mu\\left(X ; \\theta_{\\mu}\\right), \\sigma^{2}\\left(X ; \\theta_{\\sigma}\\right)\\right) \\| \\mathcal{N}(0, I)\\right]D[N(Î¼(X;Î¸Î¼â€‹),Ïƒ2(X;Î¸Ïƒâ€‹))âˆ¥N(0,I)]ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡ä¸¤ä¸ªæ­£æ€åˆ†å¸ƒçš„KLæ•£åº¦çš„è®¡ç®—å…¬å¼æ¥è®¡ç®—è¿™ä¸€é¡¹ã€‚ å¯¹äºç¬¬ä¸€é¡¹Ezâˆ¼Q[logâ¡P(Xâˆ£z)]E_{z \\sim Q}[\\log P(X | z)]Ezâˆ¼Qâ€‹[logP(Xâˆ£z)]ï¼Œå¯¹äºä¸€ä¸ªbatchæ¥è¯´ï¼Œå¯ä»¥åœ¨QQQä¸­é‡‡æ ·ï¼Œç„¶åå°†å•ä¸ªæ ·æœ¬çš„logâ¡P(Xâˆ£z)\\log P(X|z)logP(Xâˆ£z)æ±‚å’Œå–å¹³å‡æ•°ä½œä¸ºæœŸæœ›çš„ä¼°è®¡ã€‚ä½†è¿™æ ·å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šæŠŠQ(zâˆ£X)Q(z|X)Q(zâˆ£X)å¼„ä¸¢äº†ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è®­ç»ƒçš„æ—¶å€™æ¢¯åº¦ä¸ä¼ è¿›QQQé‡Œï¼Œè®ºæ–‡é‡Œé‡‡ç”¨äº†ä¸€ä¸ªç§°ä¸ºé‡å‚æ•°åŒ–æŠ€å·§(reparamenterization trick)çš„æ–¹æ³•ï¼Œå¦‚å›¾ï¼š è‡³æ­¤ï¼Œæ•´ä¸ªVAEç½‘ç»œå°±å¯ä»¥è®­ç»ƒäº†ã€‚ å…¬å¼æ¨å¯¼éƒ¨åˆ† D[Q(zâˆ£X)âˆ£âˆ£P(zâˆ£X)]=Ezâˆ¼Q[logâ¡Q(zâˆ£X)âˆ’logâ¡P(zâˆ£X)]=Ezâˆ¼Q[logâ¡Q(zâˆ£X)âˆ’logâ¡P(zâˆ£X)âˆ’logâ¡P(X)]+logâ¡P(X)\\begin{aligned} \\mathcal{D}[Q(z|X)||P(z|X)] &amp;= E_{z \\sim Q}[\\log Q(z|X) - \\log P(z|X)] \\\\ &amp;= E_{z \\sim Q}[\\log Q(z|X) - \\log P(z|X) - \\log P(X)] + \\log P(X) \\end{aligned} D[Q(zâˆ£X)âˆ£âˆ£P(zâˆ£X)]â€‹=Ezâˆ¼Qâ€‹[logQ(zâˆ£X)âˆ’logP(zâˆ£X)]=Ezâˆ¼Qâ€‹[logQ(zâˆ£X)âˆ’logP(zâˆ£X)âˆ’logP(X)]+logP(X)â€‹ ç§»é¡¹å¾— logâ¡P(X)âˆ’D[Q(zâˆ£X)âˆ¥P(zâˆ£X)]=Ezâˆ¼Q[logâ¡P(Xâˆ£z)]âˆ’D[Q(zâˆ£X)âˆ¥P(z)]\\log P(X)-\\mathcal{D}[Q(z | X) \\| P(z | X)]=E_{z \\sim Q}[\\log P(X | z)]-\\mathcal{D}[Q(z | X) \\| P(z)] logP(X)âˆ’D[Q(zâˆ£X)âˆ¥P(zâˆ£X)]=Ezâˆ¼Qâ€‹[logP(Xâˆ£z)]âˆ’D[Q(zâˆ£X)âˆ¥P(z)] GAN æ¨¡å‹æ„å»º ç”±äºå¤§å®¶éƒ½å¯¹GANæ¯”è¾ƒç†Ÿæ‚‰ï¼Œæœ¬æ–‡ç›´æ¥ä»å˜åˆ†æ¨æ–­çš„è§’åº¦å»ç†è§£GANã€‚ ä¸åŒäºVAEå°†P(Xâˆ£z)P(X|z)P(Xâˆ£z)é€‰ä¸ºé«˜æ–¯åˆ†å¸ƒï¼ŒGANçš„é€‰æ‹©æ˜¯ï¼š P(xâˆ£z)=Î´(xâˆ’G(z)),P(x)=âˆ«P(xâˆ£z)P(z)dzP(x | z)=\\delta(x-G(z)), \\quad P(x)=\\int P(x | z) P(z) d z P(xâˆ£z)=Î´(xâˆ’G(z)),P(x)=âˆ«P(xâˆ£z)P(z)dz å…¶ä¸­Î´(x)\\delta (x)Î´(x)æ˜¯ç‹„æ‹‰å…‹å‡½æ•°ï¼ŒG(z)G(z)G(z)ä¸ºç”Ÿæˆå™¨ç½‘ç»œã€‚ åœ¨VAEä¸­zè¢«å½“ä½œæ˜¯ä¸€ä¸ªéšå˜é‡ï¼Œä½†åœ¨GANä¸­ï¼Œç‹„æ‹‰å…‹å‡½æ•°æ„å‘³ç€å•ç‚¹åˆ†å¸ƒï¼Œå³xå’Œzä¸ºä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚äºæ˜¯åœ¨GANä¸­zæ²¡æœ‰è¢«å½“ä½œéšå˜é‡å¤„ç†(ä¸éœ€è¦è€ƒè™‘åéªŒåˆ†å¸ƒP(zâˆ£x)P(z|x)P(zâˆ£x)) åˆ¤åˆ«å™¨çš„ç†è§£ï¼š åœ¨GANä¸­å¼•å…¥äº†ä¸€ä¸ªäºŒå…ƒçš„éšå˜é‡yæ¥æ„æˆè”åˆåˆ†å¸ƒï¼Œå…¶ä¸­p~(x)\\tilde{p}(x)p~â€‹(x) ä¸ºçœŸå®æ ·æœ¬çš„åˆ†å¸ƒï¼š q(x,y)={p~(x)p1,y=1p(x)p0,y=0q(x, y)=\\left\\{\\begin{array}{l} {\\tilde{p}(x) p_{1}, y=1} \\\\ {p(x) p_{0}, y=0} \\end{array}\\right. q(x,y)={p~â€‹(x)p1â€‹,y=1p(x)p0â€‹,y=0â€‹ è¿™é‡Œyæ˜¯å›¾åƒçš„çœŸå®æ ‡ç­¾ï¼Œå½“å›¾ç‰‡ä¸ºçœŸå®å›¾ç‰‡æ—¶ï¼Œy=1ï¼Œå½“å›¾ç‰‡æ˜¯ç”Ÿæˆå›¾ç‰‡æ—¶ï¼Œy=0ã€‚ å…¶ä¸­p1+p0=1p_1+p_0=1p1â€‹+p0â€‹=1æè¿°äº†ä¸€ä¸ªäºŒå…ƒæ¦‚ç‡åˆ†å¸ƒï¼Œæ¯”å¦‚ï¼šä»çœŸå®æ ·æœ¬é‡‡é›†mä¸ªæ ·æœ¬ï¼Œä»ç”Ÿæˆæ ·æœ¬ä¸­é‡‡é›†mä¸ªæ ·æœ¬ï¼ŒåŒæ—¶ä¼ å…¥åˆ¤åˆ«å™¨ï¼Œåˆ™p0=p1=1/2p_0=p_1=1/2p0â€‹=p1â€‹=1/2ã€‚åœ¨ä¸‹é¢è®¨è®ºä¸­æˆ‘ä»¬ç›´æ¥å–p0=p1=1/2p_0=p_1=1/2p0â€‹=p1â€‹=1/2 å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬éœ€è¦ä½¿åˆ¤åˆ«å™¨çš„åˆ¤åˆ«ç»“æœå°½å¯èƒ½çœŸå®ï¼Œè®¾p(x,y)=p(yâˆ£x)p~(x)p(x,y)=p(y|x)\\tilde{p}(x)p(x,y)=p(yâˆ£x)p~â€‹(x)ï¼Œp(yâˆ£x)p(y|x)p(yâˆ£x)ä¸ºä¸€ä¸ªæ¡ä»¶ä¼¯åŠªåˆ©åˆ†å¸ƒ(åˆ¤åˆ«å™¨çš„åˆ¤åˆ«ç»“æœ)ã€‚ä¼˜åŒ–ç›®æ ‡æ˜¯KL(q(x,y)âˆ£âˆ£p(x,y))KL(q(x,y)||p(x,y))KL(q(x,y)âˆ£âˆ£p(x,y))ï¼š KL(q(x,y)âˆ¥p(x,y))=âˆ«p~(x)p1logâ¡p~(x)p1p(1âˆ£x)p~(x)dx+âˆ«p(x)p0logâ¡p(x)p0p(0âˆ£x)p~(x)dxâˆ¼âˆ«p~(x)logâ¡12p(1âˆ£x)dx+âˆ«p(x)logâ¡p(x)2p(0âˆ£x)p~(x)dx=âˆ’Exâˆ¼p~(x)[logâ¡2p(1âˆ£x)]âˆ’Exâˆ¼p(x)[logâ¡2p(0âˆ£x)]+KL(p(x)âˆ£âˆ£p~(x))\\begin{aligned} K L(q(x, y) \\| p(x, y)) &amp;=\\int \\tilde{p}(x) p_{1} \\log \\frac{\\tilde{p}(x) p_{1}}{p(1 | x) \\tilde{p}(x)} d x+\\int p(x) p_{0} \\log \\frac{p(x) p_{0}}{p(0 | x) \\tilde{p}(x)} d x \\\\ &amp; \\sim \\int \\tilde{p}(x) \\log \\frac{1}{2p(1 | x)} d x+\\int p(x) \\log \\frac{p(x)}{2p(0 | x) \\tilde{p}(x)} d x\\\\ &amp; = -E_{x \\sim \\tilde{p}(x)}[\\log 2p(1|x)]-E_{x \\sim p(x)}[\\log 2p(0|x)]+KL(p(x)||\\tilde{p}(x)) \\end{aligned} KL(q(x,y)âˆ¥p(x,y))â€‹=âˆ«p~â€‹(x)p1â€‹logp(1âˆ£x)p~â€‹(x)p~â€‹(x)p1â€‹â€‹dx+âˆ«p(x)p0â€‹logp(0âˆ£x)p~â€‹(x)p(x)p0â€‹â€‹dxâˆ¼âˆ«p~â€‹(x)log2p(1âˆ£x)1â€‹dx+âˆ«p(x)log2p(0âˆ£x)p~â€‹(x)p(x)â€‹dx=âˆ’Exâˆ¼p~â€‹(x)â€‹[log2p(1âˆ£x)]âˆ’Exâˆ¼p(x)â€‹[log2p(0âˆ£x)]+KL(p(x)âˆ£âˆ£p~â€‹(x))â€‹ ä¸€æ—¦æˆåŠŸä¼˜åŒ–ï¼Œå°±æœ‰q(x,y)â†’p(x,y)q(x,y)\\to p(x,y)q(x,y)â†’p(x,y)ï¼Œå¯¹äºxæ±‚è¾¹ç¼˜æ¦‚ç‡åˆ†å¸ƒï¼Œæœ‰ï¼š 12p~(x)+12p(x)â†’p(1âˆ£x)p~(x)+p(0âˆ£x)p~(x)=p~(x)\\frac{1}{2}\\tilde{p}(x)+\\frac{1}{2}p(x)\\to p(1|x)\\tilde{p}(x)+p(0|x)\\tilde{p}(x)=\\tilde{p}(x) 21â€‹p~â€‹(x)+21â€‹p(x)â†’p(1âˆ£x)p~â€‹(x)+p(0âˆ£x)p~â€‹(x)=p~â€‹(x) å³ï¼š p(x)â†’p~(x)p(x)\\to \\tilde{p}(x) p(x)â†’p~â€‹(x) è¿™å°±å®Œæˆäº†å¯¹æ¨¡å‹çš„æ„å»ºã€‚ ç›®æ ‡ä¼˜åŒ– ç°åœ¨æˆ‘ä»¬æœ‰ä¼˜åŒ–ç›®æ ‡ï¼šp(1âˆ£x)p(1|x)p(1âˆ£x)å’ŒG(z)G(z)G(z)ï¼Œåˆ†åˆ«æ˜¯åˆ¤åˆ«å™¨(p(yâˆ£x)p(y|x)p(yâˆ£x)æœä»æ¡ä»¶ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œå¯ä»¥ç›´æ¥ç”±p(1âˆ£x)p(1|x)p(1âˆ£x)ç¡®å®š)å’Œç”Ÿæˆå™¨(p(x)p(x)p(x)ç”±G(z)G(z)G(z)å†³å®š)ã€‚ç±»ä¼¼EMç®—æ³•ï¼Œæˆ‘ä»¬è¿›è¡Œäº¤æ›¿ä¼˜åŒ–ï¼šå…ˆå›ºå®šG(z)G(z)G(z),è¿™ä¹Ÿæ„å‘³ç€p(x)p(x)p(x)å›ºå®šäº†ï¼Œç„¶åä¼˜åŒ–p(yâˆ£x)p(y|x)p(yâˆ£x)ï¼Œä¼˜åŒ–ç›®æ ‡ä¸ºï¼š D=argâ¡minâ¡D{âˆ’Exâˆ¼p~(x)[logâ¡2D(x)]âˆ’Exâˆ¼p(x)[logâ¡2(1âˆ’D(x))]}D=\\underset{D}{\\arg \\min }\\{-E_{x \\sim \\tilde{p}(x)}[\\log 2D(x)]-\\mathbb{E}_{x \\sim p(x)}[\\log 2(1-D(x))]\\} D=Dargminâ€‹{âˆ’Exâˆ¼p~â€‹(x)â€‹[log2D(x)]âˆ’Exâˆ¼p(x)â€‹[log2(1âˆ’D(x))]} ç„¶åå›ºå®šD(x)D(x)D(x)æ¥ä¼˜åŒ–G(x)G(x)G(x)ï¼Œç›¸å…³lossä¸ºï¼š G=argâ¡minâ¡Gâˆ«p(x)logâ¡p0p(x)(1âˆ’D(x))p~(x)dxG=\\underset{G}{\\arg \\min } \\int p(x) \\log \\frac{p_0 p(x)}{(1-D(x)) \\tilde{p}(x)} d x G=Gargminâ€‹âˆ«p(x)log(1âˆ’D(x))p~â€‹(x)p0â€‹p(x)â€‹dx å‡è®¾D(x)D(x)D(x)æœ‰è¶³å¤Ÿçš„æ‹Ÿåˆèƒ½åŠ›ï¼Œæ³¨æ„åˆ°å½“D(x)=p~(x)p~(x)+p0(x)D(x)=\\frac{\\tilde{p}(x)}{\\tilde{p}(x)+p^0(x)}D(x)=p~â€‹(x)+p0(x)p~â€‹(x)â€‹æ—¶ï¼Œæœ‰ KL(q(x,y)âˆ¥p0(x,y))=âˆ«p~(x)logâ¡12D(x)dx+âˆ«p0(x)logâ¡p0(x)2(1âˆ’D(x))p~(x)dx=âˆ«p~(x)logâ¡p~(x)+p0(x)2p~(x)+p0(x)logâ¡p~(x)+p0(x)2p~(x)=KL(p~(x)+p0(x)âˆ£âˆ£2p~(x))\\begin{aligned} K L(q(x, y) \\| p^0(x, y)) &amp;= \\int \\tilde{p}(x) \\log \\frac{1}{2D(x)} d x+\\int p^0(x) \\log \\frac{p^0(x)}{2(1-D(x)) \\tilde{p}(x)} d x\\\\ &amp;= \\int\\tilde{p}(x) \\log \\frac{\\tilde{p}(x)+p^0(x)}{2\\tilde{p}(x)}+p^0(x) \\log \\frac{\\tilde{p}(x)+p^0(x)}{2\\tilde{p}(x)}\\\\ &amp;= KL(\\tilde{p}(x) +p^0(x)||2\\tilde{p}(x) ) \\end{aligned} KL(q(x,y)âˆ¥p0(x,y))â€‹=âˆ«p~â€‹(x)log2D(x)1â€‹dx+âˆ«p0(x)log2(1âˆ’D(x))p~â€‹(x)p0(x)â€‹dx=âˆ«p~â€‹(x)log2p~â€‹(x)p~â€‹(x)+p0(x)â€‹+p0(x)log2p~â€‹(x)p~â€‹(x)+p0(x)â€‹=KL(p~â€‹(x)+p0(x)âˆ£âˆ£2p~â€‹(x))â€‹ ä¸ä¸¥æ ¼çš„è¯´æ³•ï¼šç”±äºç°åœ¨å¯¹p0(x)p^0(x)p0(x) å’Œ p~(x)\\tilde{p}(x)p~â€‹(x)æ²¡æœ‰çº¦æŸï¼Œå¯ä»¥ç›´æ¥p0(x)=p~(x)p^0(x)=\\tilde{p}(x)p0(x)=p~â€‹(x)ä½¿å¾—lossç­‰äº0ï¼Œä¹Ÿå°±æ˜¯è¯´D(x)=p~(x)p~(x)+p0(x)D(x)=\\frac{\\tilde{p}(x)}{\\tilde{p}(x)+p^0(x)}D(x)=p~â€‹(x)+p0(x)p~â€‹(x)â€‹ä¸ºç†è®ºæœ€ä¼˜è§£ã€‚åœ¨ä¼˜åŒ–åˆ¤åˆ«å™¨æ—¶ï¼Œp0(x)p^0(x)p0(x)åº”è¯¥ä¸ºä¸Šä¸€é˜¶æ®µç”Ÿæˆå™¨ä¼˜åŒ–çš„p(x)p(x)p(x) ã€‚å°†è¿™ä¸ªD(x)D(x)D(x)ä»£å…¥ç”Ÿæˆå™¨çš„ç›¸å…³lossï¼š G=argâ¡minâ¡Gâˆ«p(x)logâ¡p0p(x)(1âˆ’D(x))p~(x)dx=argâ¡minâ¡Gâˆ«p(x)logâ¡p(x)2D(x)p0(x)dx=argâ¡minâ¡G[âˆ’Exâˆ¼p(x)2D(x)+KL(p(x)âˆ£âˆ£p0(x))]=argâ¡minâ¡G[âˆ’Exâˆ¼p(x)2D(G(z))+KL(p(x)âˆ£âˆ£p0(x))]\\begin{aligned} G &amp;= \\underset{G}{\\arg \\min } \\int p(x) \\log \\frac{p_0 p(x)}{(1-D(x)) \\tilde{p}(x)} d x\\\\ &amp;= \\underset{G}{\\arg \\min } \\int p(x) \\log \\frac{ p(x)}{2D(x) p^0(x)} d x\\\\ &amp;= \\underset{G}{\\arg \\min }[-E_{x \\sim p(x)}2D(x)+KL(p(x)||p^0(x))]\\\\ &amp;= \\underset{G}{\\arg \\min }[-E_{x \\sim p(x)}2D(G(z))+KL(p(x)||p^0(x))] \\end{aligned} Gâ€‹=Gargminâ€‹âˆ«p(x)log(1âˆ’D(x))p~â€‹(x)p0â€‹p(x)â€‹dx=Gargminâ€‹âˆ«p(x)log2D(x)p0(x)p(x)â€‹dx=Gargminâ€‹[âˆ’Exâˆ¼p(x)â€‹2D(x)+KL(p(x)âˆ£âˆ£p0(x))]=Gargminâ€‹[âˆ’Exâˆ¼p(x)â€‹2D(G(z))+KL(p(x)âˆ£âˆ£p0(x))]â€‹ å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶çš„ç¬¬ä¸€é¡¹âˆ’Exâˆ¼p(x)2D(G(z))-E_{x \\sim p(x)}2D(G(z))âˆ’Exâˆ¼p(x)â€‹2D(G(z))å°±æ˜¯æ ‡å‡†çš„GANæ‰€é‡‡ç”¨çš„lossä¹‹ä¸€ã€‚è€Œæˆ‘ä»¬çŸ¥é“ï¼Œç›®å‰æ ‡å‡†çš„GANç”Ÿæˆå™¨çš„losséƒ½ä¸åŒ…å«KL(p(x)âˆ£âˆ£p0(x))KL(p(x)||p^0(x))KL(p(x)âˆ£âˆ£p0(x))ï¼Œè¿™å®é™…ä¸Šé€ æˆäº†lossçš„ä¸å®Œå¤‡ã€‚ é¡ºä¾¿æä¸€å¥ï¼ŒVAEä¸­ä¹Ÿæœ‰ç±»ä¼¼GANä¸­äº¤æ›¿ä¼˜åŒ–çš„æ–¹æ³•ï¼Œç§°ä¸ºEMç®—æ³•ã€‚ ç¬¬äºŒä¸ªlossæ˜¯åœ¨é™åˆ¶è¦æ±‚æ–°çš„ç”Ÿæˆå™¨è·Ÿæ—§çš„ç”Ÿæˆå™¨ç”Ÿæˆç»“æœä¸èƒ½å·®åˆ«å¤ªå¤§ ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆå™¨ä¸èƒ½å‰§çƒˆå˜åŒ–ã€‚åœ¨lossä¸å®Œå¤‡çš„æƒ…å†µä¸‹ï¼Œå‡è®¾æœ‰ä¸€ä¸ªä¼˜åŒ–ç®—æ³•æ€»èƒ½æ‰¾åˆ°G(z)G(z)G(z)çš„ç†è®ºæœ€ä¼˜è§£ã€å¹¶ä¸”G(z)G(z)G(z)å…·æœ‰æ— é™çš„æ‹Ÿåˆèƒ½åŠ›ï¼Œé‚£ä¹ˆG(z)G(z)G(z)åªéœ€è¦ç”Ÿæˆå”¯ä¸€ä¸€ä¸ªä½¿å¾—D(x)D(x)D(x)æœ€å¤§çš„æ ·æœ¬ï¼ˆä¸ç®¡è¾“å…¥çš„zzzæ˜¯ä»€ä¹ˆï¼‰ï¼Œè¿™å°±æ˜¯æ¨¡å‹åç¼©ã€‚æ¨¡å‹å¡Œç¼©çš„è§†é¢‘(éœ€è¦æ¢¯å­)ã€‚ ç„¶åå¯¹ç¬¬äºŒé¡¹è¿›è¡Œä¼°ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨å®éªŒä¸­ä½¿ç”¨çš„æ­£åˆ™é¡¹ï¼š è®°po(x)=qÎ¸âˆ’Î”Î¸(x),p(x)=qÎ¸(x)p^{o}(x)=q_{\\theta-\\Delta \\theta}(x), \\quad p(x)=q_{\\theta}(x)po(x)=qÎ¸âˆ’Î”Î¸â€‹(x),p(x)=qÎ¸â€‹(x)ï¼Œå…¶ä¸­Î”Î¸\\Delta \\thetaÎ”Î¸ä¸ºç”Ÿæˆå™¨çš„å‚æ•°å˜åŒ–ï¼Œå¯¹qo(x)=qÎ¸âˆ’Î”Î¸(x)q^{o}(x)=q_{\\theta-\\Delta \\theta}(x)qo(x)=qÎ¸âˆ’Î”Î¸â€‹(x)åšæ³°å‹’å±•å¼€ï¼Œæœ‰ï¼š qo(x)=qÎ¸âˆ’Î”Î¸(x)=qÎ¸(x)âˆ’Î”Î¸â‹…âˆ‡Î¸qÎ¸(x)+O((Î”Î¸)2)q^{o}(x)=q_{\\theta-\\Delta \\theta}(x)=q_{\\theta}(x)-\\Delta \\theta \\cdot \\nabla_{\\theta} q_{\\theta}(x)+O\\left((\\Delta \\theta)^{2}\\right) qo(x)=qÎ¸âˆ’Î”Î¸â€‹(x)=qÎ¸â€‹(x)âˆ’Î”Î¸â‹…âˆ‡Î¸â€‹qÎ¸â€‹(x)+O((Î”Î¸)2) KL(q(x)âˆ¥qo(x))â‰ˆâˆ«qÎ¸(x)logâ¡qÎ¸(x)qÎ¸(x)âˆ’Î”Î¸â‹…âˆ‡Î¸qÎ¸(x)dx=âˆ’âˆ«qÎ¸(x)logâ¡[1âˆ’Î”Î¸â‹…âˆ‡Î¸qÎ¸(x)qÎ¸(x)]dxâ‰ˆâˆ’âˆ«qÎ¸(x)[âˆ’Î”Î¸â‹…âˆ‡Î¸qÎ¸(x)qÎ¸(x)âˆ’(Î”Î¸â‹…âˆ‡Î¸qÎ¸(x)qÎ¸(x))2]dx=Î”Î¸â‹…âˆ‡Î¸âˆ«qÎ¸(x)dx+(Î”Î¸)2â‹…âˆ«(âˆ‡Î¸qÎ¸(x))22qÎ¸(x)dx=(Î”Î¸)2â‹…âˆ«(âˆ‡Î¸qÎ¸(x))22qÎ¸(x)dxâ‰ˆ(Î”Î¸â‹…c)2\\begin{aligned} K L\\left(q(x) \\| q^{o}(x)\\right) &amp; \\approx \\int q_{\\theta}(x) \\log \\frac{q_{\\theta}(x)}{q_{\\theta}(x)-\\Delta \\theta \\cdot \\nabla_{\\theta} q_{\\theta}(x)} d x \\\\ &amp;=-\\int q_{\\theta}(x) \\log \\left[1-\\frac{\\Delta \\theta \\cdot \\nabla_{\\theta} q_{\\theta}(x)}{q_{\\theta}(x)}\\right] d x \\\\ &amp; \\approx-\\int q_{\\theta}(x)\\left[-\\frac{\\Delta \\theta \\cdot \\nabla_{\\theta} q_{\\theta}(x)}{q_{\\theta}(x)}-\\left(\\frac{\\Delta \\theta \\cdot \\nabla_{\\theta} q_{\\theta}(x)}{q_{\\theta}(x)}\\right)^{2}\\right] d x \\\\ &amp;=\\Delta \\theta \\cdot \\nabla_{\\theta} \\int q_{\\theta}(x) d x+(\\Delta \\theta)^{2} \\cdot \\int \\frac{\\left(\\nabla_{\\theta} q_{\\theta}(x)\\right)^{2}}{2 q_{\\theta}(x)} d x \\\\ &amp;=(\\Delta \\theta)^{2} \\cdot \\int \\frac{\\left(\\nabla_{\\theta} q_{\\theta}(x)\\right)^{2}}{2 q_{\\theta}(x)} d x \\\\ &amp; \\approx(\\Delta \\theta \\cdot c)^{2} \\end{aligned} KL(q(x)âˆ¥qo(x))â€‹â‰ˆâˆ«qÎ¸â€‹(x)logqÎ¸â€‹(x)âˆ’Î”Î¸â‹…âˆ‡Î¸â€‹qÎ¸â€‹(x)qÎ¸â€‹(x)â€‹dx=âˆ’âˆ«qÎ¸â€‹(x)log[1âˆ’qÎ¸â€‹(x)Î”Î¸â‹…âˆ‡Î¸â€‹qÎ¸â€‹(x)â€‹]dxâ‰ˆâˆ’âˆ«qÎ¸â€‹(x)[âˆ’qÎ¸â€‹(x)Î”Î¸â‹…âˆ‡Î¸â€‹qÎ¸â€‹(x)â€‹âˆ’(qÎ¸â€‹(x)Î”Î¸â‹…âˆ‡Î¸â€‹qÎ¸â€‹(x)â€‹)2]dx=Î”Î¸â‹…âˆ‡Î¸â€‹âˆ«qÎ¸â€‹(x)dx+(Î”Î¸)2â‹…âˆ«2qÎ¸â€‹(x)(âˆ‡Î¸â€‹qÎ¸â€‹(x))2â€‹dx=(Î”Î¸)2â‹…âˆ«2qÎ¸â€‹(x)(âˆ‡Î¸â€‹qÎ¸â€‹(x))2â€‹dxâ‰ˆ(Î”Î¸â‹…c)2â€‹ ä¸Šå¼ä¸­åº”ç”¨äº†logâ¡(1+x)\\log(1+x)log(1+x)çš„æ³°å‹’å±•å¼€å¼ä»¥åŠæ±‚å¯¼å’Œç§¯åˆ†å¯äº’æ¢ã€å¯ç§¯åˆ†çš„å‡è®¾ã€‚ä¸Šé¢çš„ç²—ç•¥ä¼°è®¡è¡¨æ˜ï¼Œç”Ÿæˆå™¨çš„å‚æ•°ä¸èƒ½å˜åŒ–å¤ªå¤§ã€‚è€Œæˆ‘ä»¬ç”¨çš„æ˜¯åŸºäºæ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–ç®—æ³•ï¼Œæ‰€ä»¥Î”Î¸\\Delta \\thetaÎ”Î¸æ­£æ¯”äºæ¢¯åº¦ï¼Œå› æ­¤æ ‡å‡†GANè®­ç»ƒæ—¶çš„å¾ˆå¤štrickï¼Œæ¯”å¦‚æ¢¯åº¦è£å‰ªã€ç”¨Adamä¼˜åŒ–å™¨ã€ç”¨BNï¼Œéƒ½å¯ä»¥è§£é‡Šå¾—é€šäº†ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸ºäº†ç¨³å®šæ¢¯åº¦ï¼Œä½¿å¾—Î”Î¸\\Delta \\thetaÎ”Î¸ä¸è‡³äºè¿‡å¤§ï¼ŒåŒæ—¶ï¼ŒG(z)G(z)G(z)çš„è¿­ä»£æ¬¡æ•°ä¹Ÿä¸èƒ½è¿‡å¤šï¼Œå› ä¸ºè¿‡å¤šåŒæ ·ä¼šå¯¼è‡´Î”Î¸\\Delta \\thetaÎ”Î¸è¿‡å¤§ã€‚ æ­£åˆ™é¡¹ è€ƒè™‘å¦‚ä½•æ·»åŠ æ­£åˆ™é¡¹ä»¥æ”¹è¿›GANçš„ç¨³å®šæ€§ï¼š ç›´æ¥å¯¹KL(q(x)âˆ¥qo(x))K L\\left(q(x) \\| q^{o}(x)\\right)KL(q(x)âˆ¥qo(x))è¿›è¡Œä¼°ç®—æ˜¯å¾ˆå›°éš¾çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸Šé¢æåˆ°q(zâˆ£x)q(z|x)q(zâˆ£x)å’Œqo(zâˆ£x)q^o(z|x)qo(zâˆ£x)æ˜¯ç‹„æ‹‰å…‹åˆ†å¸ƒï¼Œè€Œç‹„æ‹‰å…‹åˆ†å¸ƒå¯ä»¥çœ‹ä½œæ–¹å·®ä¸º0çš„é«˜æ–¯åˆ†å¸ƒï¼Œäºæ˜¯è€ƒè™‘ç”¨KL(q(x,z)âˆ¥qo(x,z))K L\\left(q(x,z) \\| q^{o}(x,z)\\right)KL(q(x,z)âˆ¥qo(x,z))è¿›è¡Œä¼°ç®—ï¼š KL(q(x,z)âˆ¥q~(x,z))=âˆ¬q(xâˆ£z)q(z)logâ¡q(xâˆ£z)q(z)q~(xâˆ£z)q(z)dxdz=âˆ¬Î´(xâˆ’G(z))q(z)logâ¡Î´(xâˆ’G(z))Î´(xâˆ’Go(z))dxdz=âˆ«q(z)logâ¡Î´(0)Î´(G(z)âˆ’Go(z))dz\\begin{aligned} K L(q(x, z) \\| \\tilde{q}(x, z)) &amp;=\\iint q(x | z) q(z) \\log \\frac{q(x | z) q(z)}{\\tilde{q}(x | z) q(z)} d x d z \\\\ &amp;=\\iint \\delta(x-G(z)) q(z) \\log \\frac{\\delta(x-G(z))}{\\delta\\left(x-G^{o}(z)\\right)} d x d z \\\\ &amp;=\\int q(z) \\log \\frac{\\delta(0)}{\\delta\\left(G(z)-G^{o}(z)\\right)} d z \\end{aligned} KL(q(x,z)âˆ¥q~â€‹(x,z))â€‹=âˆ¬q(xâˆ£z)q(z)logq~â€‹(xâˆ£z)q(z)q(xâˆ£z)q(z)â€‹dxdz=âˆ¬Î´(xâˆ’G(z))q(z)logÎ´(xâˆ’Go(z))Î´(xâˆ’G(z))â€‹dxdz=âˆ«q(z)logÎ´(G(z)âˆ’Go(z))Î´(0)â€‹dzâ€‹ å°†ç‹„æ‹‰å…‹åˆ†å¸ƒå¯ä»¥çœ‹ä½œæ–¹å·®ä¸º0çš„é«˜æ–¯åˆ†å¸ƒ,å¹¶ä»£å…¥ï¼š Î´(x)=limâ¡Ïƒâ†’01(2Ï€Ïƒ2)d/2expâ¡(âˆ’x22Ïƒ2)\\delta(x)=\\lim _{\\sigma \\rightarrow 0} \\frac{1}{\\left(2 \\pi \\sigma^{2}\\right)^{d / 2}} \\exp \\left(-\\frac{x^{2}}{2 \\sigma^{2}}\\right) Î´(x)=Ïƒâ†’0limâ€‹(2Ï€Ïƒ2)d/21â€‹exp(âˆ’2Ïƒ2x2â€‹) KL(q(x,z)âˆ¥q~(x,z))=âˆ«q(z)logâ¡Î´(0)Î´(G(z)âˆ’Go(z))dz=limâ¡Ïƒâ†’0âˆ«q(x)logâ¡[1/expâ¡(âˆ’(G(z)âˆ’G0(z))22Ïƒ2)]dx=limâ¡Ïƒâ†’0âˆ«q(x)(âˆ’(G(z)âˆ’G0(z))22Ïƒ2)dxâˆ¼Î»âˆ«q(z)âˆ¥G(z)âˆ’Go(z)âˆ¥2dz\\begin{aligned} K L(q(x, z) \\| \\tilde{q}(x, z)) &amp;=\\int q(z) \\log \\frac{\\delta(0)}{\\delta\\left(G(z)-G^{o}(z)\\right)} d z \\\\ &amp;= \\lim _{\\sigma \\rightarrow 0} \\int q(x) \\log \\left[ 1/{\\exp \\left(-\\frac{(G(z)-G^0(z))^{2}}{2 \\sigma^{2}}\\right)} \\right]dx \\\\ &amp;= \\lim _{\\sigma \\rightarrow 0} \\int q(x) \\left(-\\frac{(G(z)-G^0(z))^{2}}{2 \\sigma^{2}}\\right)dx \\\\ &amp; \\sim \\lambda \\int q(z)\\left\\|G(z)-G^{o}(z)\\right\\|^{2} d z \\end{aligned} KL(q(x,z)âˆ¥q~â€‹(x,z))â€‹=âˆ«q(z)logÎ´(G(z)âˆ’Go(z))Î´(0)â€‹dz=Ïƒâ†’0limâ€‹âˆ«q(x)log[1/exp(âˆ’2Ïƒ2(G(z)âˆ’G0(z))2â€‹)]dx=Ïƒâ†’0limâ€‹âˆ«q(x)(âˆ’2Ïƒ2(G(z)âˆ’G0(z))2â€‹)dxâˆ¼Î»âˆ«q(z)âˆ¥G(z)âˆ’Go(z)âˆ¥2dzâ€‹ äºæ˜¯æœ‰ KL(q(x)âˆ¥qo(x))âˆ¼Î»âˆ«q(z)âˆ¥G(z)âˆ’Go(z)âˆ¥2dzK L\\left(q(x) \\| q^{o}(x)\\right) \\sim \\lambda \\int q(z)\\left\\|G(z)-G^{o}(z)\\right\\|^{2} d z KL(q(x)âˆ¥qo(x))âˆ¼Î»âˆ«q(z)âˆ¥G(z)âˆ’Go(z)âˆ¥2dz ä»è€Œå®Œæ•´çš„ç”Ÿæˆå™¨losså¯ä»¥é€‰æ‹©ä¸º Ezâˆ¼q(z)[âˆ’logâ¡D(G(z))+Î»âˆ¥G(z)âˆ’Go(z)âˆ¥2]\\mathbb{E}_{z \\sim q(z)}\\left[-\\log D(G(z))+\\lambda\\left\\|G(z)-G^{o}(z)\\right\\|^{2}\\right] Ezâˆ¼q(z)â€‹[âˆ’logD(G(z))+Î»âˆ¥G(z)âˆ’Go(z)âˆ¥2] å®éªŒç»“æœ FLOW åŸºæœ¬æ€è·¯ï¼šç›´æ¥ç¡¬ç®—ç§¯åˆ†å¼ âˆ«zp(xâˆ£z)p(z)dz\\int_{z} p(x | z) p(z) d z âˆ«zâ€‹p(xâˆ£z)p(z)dz æµæ¨¡å‹æœ‰ä¸€ä¸ªéå¸¸ä¸ä¼—ä¸åŒçš„ç‰¹ç‚¹æ˜¯ï¼Œå®ƒçš„è½¬æ¢é€šå¸¸æ˜¯å¯é€†çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæµæ¨¡å‹ä¸ ä»…èƒ½æ‰¾åˆ°ä» A åˆ†å¸ƒå˜åŒ–åˆ° B åˆ†å¸ƒçš„ç½‘ç»œé€šè·¯ï¼Œå¹¶ä¸”è¯¥é€šè·¯ä¹Ÿèƒ½è®© B å˜åŒ–åˆ° Aï¼Œç®€è¨€ä¹‹æµæ¨¡ å‹æ‰¾åˆ°çš„æ˜¯ä¸€æ¡ Aã€B åˆ†å¸ƒé—´çš„åŒå·¥é€šè·¯ã€‚å½“ç„¶ï¼Œè¿™æ ·çš„å¯é€†æ€§æ˜¯å…·æœ‰ä»£ä»·çš„â€”â€”Aã€B çš„ æ•°æ®ç»´åº¦å¿…é¡»æ˜¯ä¸€è‡´çš„ã€‚ Aã€B åˆ†å¸ƒé—´çš„è½¬æ¢å¹¶ä¸æ˜¯è½»æ˜“èƒ½åšåˆ°çš„ï¼Œæµæ¨¡å‹ä¸ºå®ç°è¿™ä¸€ç‚¹ç»å†äº†ä¸‰ä¸ªæ­¥éª¤ï¼šæœ€åˆ çš„ NICE å®ç°äº†ä» A åˆ†å¸ƒåˆ°é«˜æ–¯åˆ†å¸ƒçš„å¯é€†æ±‚è§£ï¼›åæ¥ RealNVP å®ç°äº†ä» A åˆ†å¸ƒåˆ°æ¡ä»¶é é«˜æ–¯åˆ†å¸ƒçš„å¯é€†æ±‚è§£ï¼›è€Œæœ€æ–°çš„ GLOWï¼Œå®ç°äº†ä» A åˆ†å¸ƒåˆ° B åˆ†å¸ƒçš„å¯é€†æ±‚è§£ï¼Œå…¶ä¸­ B åˆ† å¸ƒå¯ä»¥æ˜¯ä¸ A åˆ†å¸ƒåŒæ ·å¤æ‚çš„åˆ†å¸ƒï¼Œè¿™æ„å‘³ç€ç»™å®šä¸¤å †å›¾ç‰‡ï¼ŒGLOW èƒ½å¤Ÿå®ç°è¿™ä¸¤å †å›¾ç‰‡ é—´çš„ä»»æ„è½¬æ¢ã€‚ NICE ä¸¤ä¸ªä¸€ç»´åˆ†å¸ƒä¹‹é—´çš„è½¬åŒ–å‚è€ƒå‰è¨€ä¸­çš„æ —å­ï¼Œä¸‹é¢è€ƒè™‘é«˜ç»´åˆ†å¸ƒï¼š ç±»ä¼¼ä¸€ç»´åˆ†å¸ƒï¼Œä¸¤ä¸ªåˆ†å¸ƒåœ¨æ˜ å°„å‰åçš„ç›¸åŒåŒºåŸŸåº”è¯¥æœ‰ç›¸åŒçš„æ¦‚ç‡ã€‚ p(xâ€²)âˆ£detâ¡(Jf)âˆ£=Ï€(zâ€²)p\\left(x^{\\prime}\\right)\\left|\\operatorname{det}\\left(J_{f}\\right)\\right|=\\pi\\left(z^{\\prime}\\right) p(xâ€²)âˆ£det(Jfâ€‹)âˆ£=Ï€(zâ€²) å…¶ä¸­JfJ_fJfâ€‹ä¸ºé›…å¯æ¯”è¡Œåˆ—å¼ï¼Œå‡½æ•°fffå°†zzzä¸Šçš„åˆ†å¸ƒå˜æ¢åˆ°xxxä¸Šçš„åˆ†å¸ƒã€‚ æ ¹æ®é›…å¯æ¯”è¡Œåˆ—å¼çš„é€†è¿ç®—ï¼ŒåŒæ ·æœ‰ï¼š p(xâ€²)=Ï€(zâ€²)âˆ£detâ¡(Jfâˆ’1)âˆ£p\\left(x^{\\prime}\\right)=\\pi\\left(z^{\\prime}\\right)\\left|\\operatorname{det}\\left(J_{f^{-1}}\\right)\\right| p(xâ€²)=Ï€(zâ€²)âˆ£âˆ£â€‹det(Jfâˆ’1â€‹)âˆ£âˆ£â€‹ è‡³æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç»“è®ºï¼šå¦‚æœ zzz ä¸ xxx åˆ†åˆ«æ»¡è¶³ä¸¤ç§åˆ†å¸ƒï¼Œå¹¶ä¸” zzz é€šè¿‡ å‡½æ•° fff èƒ½å¤Ÿè½¬å˜ä¸º xxxï¼Œé‚£ä¹ˆ zzz ä¸ xxx ä¸­çš„ä»»æ„ä¸€ç»„å¯¹åº”é‡‡æ ·ç‚¹ ğ‘§â€²ğ‘§â€²zâ€² ä¸ ğ‘¥â€²ğ‘¥â€²xâ€² ä¹‹é—´çš„å…³ç³»ä¸ºï¼š {Ï€(zâ€²)=p(xâ€²)âˆ£detâ¡(Jf)âˆ£p(xâ€²)=Ï€(zâ€²)âˆ£detâ¡(Jfâˆ’1)âˆ£\\left\\{\\begin{array}{c} {\\pi\\left(z^{\\prime}\\right)=p\\left(x^{\\prime}\\right)\\left|\\operatorname{det}\\left(J_{f}\\right)\\right|} \\\\ {p\\left(x^{\\prime}\\right)=\\pi\\left(z^{\\prime}\\right)\\left|\\operatorname{det}\\left(J_{f^{-1}}\\right)\\right|} \\end{array}\\right. {Ï€(zâ€²)=p(xâ€²)âˆ£det(Jfâ€‹)âˆ£p(xâ€²)=Ï€(zâ€²)âˆ£âˆ£â€‹det(Jfâˆ’1â€‹)âˆ£âˆ£â€‹â€‹ ä»è¿™ä¸ªå…¬å¼å¼•å…¥äº†Flow_based_model çš„åŸºæœ¬æ€è·¯ï¼šè®¾è®¡ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œå°†åˆ†å¸ƒ xxx æ˜ å°„åˆ°åˆ†å¸ƒ zzz ï¼Œå…·ä½“æ¥è¯´ï¼Œæµæ¨¡å‹é€‰æ‹© q(z)q(z)q(z) ä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œq(xâˆ£z)q(x|z)q(xâˆ£z) ä¸ºç‹„æ‹‰å…‹åˆ†å¸ƒ Î´(xâˆ’g(z)\\delta(x-g(z)Î´(xâˆ’g(z) ï¼Œå…¶ä¸­ggg æ˜¯å¯é€†çš„ï¼š x=g(z)â‡”z=f(x)x=g(z) \\Leftrightarrow z=f(x) x=g(z)â‡”z=f(x) è¦ä»ç†è®ºä¸Šå®ç°å¯é€†ï¼Œéœ€è¦ xxx å’Œ zzz çš„ç»´æ•°ç›¸åŒï¼Œå°† zzz çš„åˆ†å¸ƒä»£å…¥ï¼Œåˆ™æœ‰ï¼š q(z)=1(2Ï€)D/2expâ¡(âˆ’12âˆ¥zâˆ¥2)q(z)=\\frac{1}{(2 \\pi)^{D / 2}} \\exp \\left(-\\frac{1}{2}\\|z\\|^{2}\\right) q(z)=(2Ï€)D/21â€‹exp(âˆ’21â€‹âˆ¥zâˆ¥2) q(x)=1(2Ï€)D/2expâ¡(âˆ’12âˆ¥f(x)âˆ¥2)âˆ£detâ¡[âˆ‚fâˆ‚x]âˆ£(2)q(\\boldsymbol{x})=\\frac{1}{(2 \\pi)^{D / 2}} \\exp \\left(-\\frac{1}{2}\\|\\boldsymbol{f}(\\boldsymbol{x})\\|^{2}\\right)\\left|\\operatorname{det}\\left[\\frac{\\partial \\boldsymbol{f}}{\\partial \\boldsymbol{x}}\\right]\\right|\\tag{2} q(x)=(2Ï€)D/21â€‹exp(âˆ’21â€‹âˆ¥f(x)âˆ¥2)âˆ£âˆ£âˆ£âˆ£â€‹det[âˆ‚xâˆ‚fâ€‹]âˆ£âˆ£âˆ£âˆ£â€‹(2) å…¬å¼(2)(2)(2)å¯¹ fff æå‡ºäº†ä¸‰ä¸ªåŸºæœ¬è¦æ±‚ï¼š å¯é€†ï¼Œä¸”é€†å‡½æ•°å®¹æ˜“è®¡ç®—ã€‚ å¯¹åº”çš„é›…å¯æ¯”è¡Œåˆ—å¼æ–¹ä¾¿è®¡ç®— æ‹Ÿåˆèƒ½åŠ›å¼º è¿™æ ·çš„è¯ï¼Œå°±æœ‰ logâ¡q(x)=âˆ’D2logâ¡(2Ï€)âˆ’12âˆ¥f(x)âˆ¥2+logâ¡âˆ£detâ¡[âˆ‚fâˆ‚x]âˆ£\\log q(x)=-\\frac{D}{2} \\log (2 \\pi)-\\frac{1}{2}\\|f(x)\\|^{2}+\\log \\left|\\operatorname{det}\\left[\\frac{\\partial f}{\\partial x}\\right]\\right| logq(x)=âˆ’2Dâ€‹log(2Ï€)âˆ’21â€‹âˆ¥f(x)âˆ¥2+logâˆ£âˆ£âˆ£âˆ£â€‹det[âˆ‚xâˆ‚fâ€‹]âˆ£âˆ£âˆ£âˆ£â€‹ è¿™ä¸ªä¼˜åŒ–ç›®æ ‡æ˜¯å¯è®¡ç®—çš„ï¼Œå¹¶ä¸”å› ä¸º fff å¯é€†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨zzz ä¸­å–æ ·ï¼Œå°±å¯ä»¥ç”Ÿæˆç›¸åº”çš„ xxx x=fâˆ’1(z)=g(z)x=f^{-1}(z)=g(z) x=fâˆ’1(z)=g(z) ä¸ºäº†æ»¡è¶³è¿™ä¸‰ä¸ªæ¡ä»¶ï¼ŒNICEå’ŒREAL NVPã€GLOWéƒ½é‡‡ç”¨äº†æ¨¡å—åŒ–æ€æƒ³ï¼Œå°† fff è®¾è®¡æˆä¸€ç»„å‡½æ•°çš„å¤åˆï¼Œå…¶ä¸­æ¯ä¸ªå‡½æ•°éƒ½æ»¡è¶³è¦æ±‚ä¸€å’Œè¦æ±‚äºŒï¼Œç»è¿‡å¤åˆä¹‹åå‡½æ•°ä¹Ÿå®¹æ˜“æ»¡è¶³è¦æ±‚ä¸‰ã€‚ f=fLâˆ˜â€¦âˆ˜f2âˆ˜f1f=f_{L} \\circ \\ldots \\circ f_{2} \\circ f_{1} f=fLâ€‹âˆ˜â€¦âˆ˜f2â€‹âˆ˜f1â€‹ ç›¸å¯¹è€Œè¨€ï¼Œé›…å¯æ¯”è¡Œåˆ—å¼çš„è®¡ç®—è¦æ¯”å‡½æ•°æ±‚é€†æ›´åŠ å¤æ‚ï¼Œè€ƒè™‘ç¬¬äºŒä¸ªè¦æ±‚ï¼Œæˆ‘ä»¬çŸ¥é“ä¸‰è§’è¡Œåˆ—å¼æœ€å®¹æ˜“è®¡ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è®©å˜æ¢ fff çš„é›…å¯æ¯”çŸ©é˜µä¸ºä¸‰è§’é˜µã€‚NICEçš„åšæ³•æ˜¯ï¼šå°† DDD çš„ xxx åˆ†ä¸ºä¸¤éƒ¨åˆ† x1,x2x_1,x_2x1â€‹,x2â€‹ï¼Œç„¶åå–ä¸‹è¿°å˜æ¢ï¼š h1=x1h2=x2+m(x1)\\begin{array}{l} {\\boldsymbol{h}_{1}=\\boldsymbol{x}_{1}} \\\\ {\\boldsymbol{h}_{2}=\\boldsymbol{x}_{2}+\\boldsymbol{m}\\left(\\boldsymbol{x}_{1}\\right)} \\end{array} h1â€‹=x1â€‹h2â€‹=x2â€‹+m(x1â€‹)â€‹ å…¶ä¸­ mmm ä¸ºä»»æ„å‡½æ•°ï¼Œè¿™ä¸ªå˜æ¢ç§°ä¸ºâ€œåŠ æ€§è€¦åˆå±‚â€ ï¼Œè¿™ä¸ªå˜æ¢çš„é›…å¯æ¯”çŸ©é˜µ [âˆ‚hâˆ‚x][\\frac{\\partial h}{\\partial x}][âˆ‚xâˆ‚hâ€‹] æ˜¯ä¸€ä¸ªä¸‰è§’é˜µï¼Œä¸”å¯¹è§’çº¿å…ƒç´ å…¨éƒ¨ä¸º1ï¼Œç”¨åˆ†å—çŸ©é˜µè¡¨ç¤ºä¸ºï¼š [âˆ‚hâˆ‚x]=(IdOâˆ‚mâˆ‚x1IDâˆ’d)\\left[\\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{x}}\\right]=\\left(\\begin{array}{cc} {\\mathrm{I}_{d}} &amp; {\\mathrm{O}} \\\\ \\frac{\\partial m}{\\partial x_1} &amp; I_{D-d} \\end{array}\\right) [âˆ‚xâˆ‚hâ€‹]=(Idâ€‹âˆ‚x1â€‹âˆ‚mâ€‹â€‹OIDâˆ’dâ€‹â€‹) åŒæ—¶è¿™ä¸ªå˜æ¢ä¹Ÿæ˜¯å¯é€†çš„ï¼Œå…¶é€†å˜æ¢ä¸º x1=xhx2=h2âˆ’m(h1)\\begin{array}{l} {\\boldsymbol{x}_{1}=\\boldsymbol{x}_{h}} \\\\ {\\boldsymbol{x}_{2}=\\boldsymbol{h}_{2}-\\boldsymbol{m}\\left(\\boldsymbol{h}_{1}\\right)} \\end{array} x1â€‹=xhâ€‹x2â€‹=h2â€‹âˆ’m(h1â€‹)â€‹ æ»¡è¶³äº†è¦æ±‚ä¸€å’Œè¦æ±‚äºŒï¼ŒåŒæ—¶è¿™ä¸ªé›…å¯æ¯”è¡Œåˆ—å¼çš„å€¼ä¸º1ï¼Œè¡Œåˆ—å¼çš„å€¼çš„ç‰©ç†å«ä¹‰æ˜¯ä½“ç§¯ï¼Œæ‰€ä»¥è¿™ä¸ªå˜æ¢æš—å«äº†å˜æ¢å‰åçš„ä½“ç§¯ä¸å˜æ€§ã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼šè¯¥å˜æ¢çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯å¹³å‡¡çš„ï¼ˆæ’ç­‰å˜æ¢ï¼‰ï¼Œå› æ­¤éœ€è¦å¯¹è°ƒI1å’ŒI2ä¸¤ç»„ç»´åº¦ï¼Œå†è¾“å…¥åŠ å’Œè€¦åˆå±‚ï¼Œå¹¶å°†è¿™ä¸ªè¿‡ç¨‹é‡å¤è‹¥å¹²æ¬¡ï¼Œ ä»¥è¾¾åˆ°ä¿¡æ¯å……åˆ†æ··åˆçš„ç›®çš„ï¼Œå¦‚å›¾ï¼š å› ä¸ºè¯¥å˜æ¢éœ€è¦æ»¡è¶³ zzz å’Œ xxx çš„ç»´åº¦ç›¸åŒï¼Œè¿™ä¼šäº§ç”Ÿå¾ˆä¸¥é‡çš„å”¯ç‹¬æµªè´¹é—®é¢˜ï¼ŒNICEåœ¨æœ€åä¸€å±‚é‡Œå¼•å…¥äº†ä¸€ä¸ªå°ºåº¦å˜æ¢å¯¹ç»´åº¦è¿›è¡Œç¼©æ”¾ï¼š z=sâŠ—h(n)z=s \\otimes h^{(n)} z=sâŠ—h(n) å…¶ä¸­s=(s1,s2,...,sD)s=(s_1,s_2,...,s_D)s=(s1â€‹,s2â€‹,...,sDâ€‹)ä¹Ÿæ˜¯ä¸€ä¸ªè¦ä¼˜åŒ–çš„å‚æ•°å‘é‡ï¼Œè¿™ä¸ª sss å‘é‡èƒ½å¤Ÿè¯†åˆ«æ¯ä¸ªç»´åº¦çš„é‡è¦ç¨‹åº¦ï¼Œ sss è¶Šå°ï¼Œè¿™ä¸ªç»´åº¦è¶Šä¸é‡è¦ï¼Œèµ·åˆ°å‹ç¼©æµå½¢çš„ä½œç”¨ã€‚è¿™ä¸ªå°ºåº¦å˜æ¢å±‚çš„é›…å¯æ¯”è¡Œåˆ—å¼å°±ä¸æ˜¯ä¸€äº†ï¼Œè€Œæ˜¯ï¼š [âˆ‚zâˆ‚h(n)]=diagâ¡(s)\\left[\\frac{\\partial z}{\\partial \\boldsymbol{h}^{(n)}}\\right]=\\operatorname{diag}(\\boldsymbol{s}) [âˆ‚h(n)âˆ‚zâ€‹]=diag(s) ä»–çš„è¡Œåˆ—å¼çš„å€¼ä¸º âˆisi\\prod_{i} s_{i}âˆiâ€‹siâ€‹,äºæ˜¯æœ€åçš„å¯¹æ•°ä¼¼ç„¶ä¸ºï¼š logâ¡q(x)âˆ¼âˆ’12âˆ¥sâŠ—f(x)âˆ¥2+âˆ‘ilogâ¡si\\log q(\\boldsymbol{x}) \\sim-\\frac{1}{2}\\|\\boldsymbol{s} \\otimes \\boldsymbol{f}(\\boldsymbol{x})\\|^{2}+\\sum_{i} \\log \\boldsymbol{s}_{i} logq(x)âˆ¼âˆ’21â€‹âˆ¥sâŠ—f(x)âˆ¥2+iâˆ‘â€‹logsiâ€‹ è¿™ä¸ªå°ºåº¦å˜æ¢å®é™…ä¸Šæ˜¯å°†å…ˆéªŒåˆ†å¸ƒ q(z)q(z)q(z) çš„æ–¹å·®ä¹Ÿä½œä¸ºè®­ç»ƒå‚æ•°ï¼Œæ–¹å·®è¶Šå°ï¼Œè¯´æ˜è¿™ä¸ªç»´åº¦çš„â€œå¼¥æ•£â€è¶Šå°ï¼Œè‹¥æ–¹å·®ä¸º0ï¼Œè¿™ä¸€ç»´çš„ç‰¹å¾å°±æ’ä¸ºå‡å€¼ï¼Œäºæ˜¯æµè¡Œå‡å°ä¸€ç»´ã€‚ æˆ‘ä»¬å†™å‡ºå¸¦æ–¹å·®çš„æ­£æ€åˆ†å¸ƒï¼š q(z)=1(2Ï€)D/2âˆi=1DÏƒiexpâ¡(âˆ’12âˆ‘i=1Dzi2Ïƒi2)q(z)=\\frac{1}{(2 \\pi)^{D / 2} \\prod_{i=1}^{D} \\sigma_{i}} \\exp \\left(-\\frac{1}{2} \\sum_{i=1}^{D} \\frac{z_{i}^{2}}{\\sigma_{i}^{2}}\\right) q(z)=(2Ï€)D/2âˆi=1Dâ€‹Ïƒiâ€‹1â€‹exp(âˆ’21â€‹i=1âˆ‘Dâ€‹Ïƒi2â€‹zi2â€‹â€‹) å°† z=f(x)z=f(x)z=f(x) ä»£å…¥ï¼Œå¹¶å–å¯¹æ•°ï¼Œç±»ä¼¼å¾—ï¼š logâ¡q(x)âˆ¼âˆ’12âˆ‘i=1Dfi2(x)Ïƒi2âˆ’âˆ‘i=1Dlogâ¡Ïƒi\\log q(\\boldsymbol{x}) \\sim-\\frac{1}{2} \\sum_{i=1}^{D} \\frac{\\boldsymbol{f}_{i}^{2}(\\boldsymbol{x})}{\\boldsymbol{\\sigma}_{i}^{2}}-\\sum_{i=1}^{D} \\log \\boldsymbol{\\sigma}_{i} logq(x)âˆ¼âˆ’21â€‹i=1âˆ‘Dâ€‹Ïƒi2â€‹fi2â€‹(x)â€‹âˆ’i=1âˆ‘Dâ€‹logÏƒiâ€‹ ä¸ä¹‹å‰é‚£ä¸ªå…¬å¼å¯¹æ¯”ï¼Œå°±æœ‰ si=1/Ïƒis_i=1/\\sigma_isiâ€‹=1/Ïƒiâ€‹ ï¼Œæ‰€ä»¥å°ºåº¦å˜æ¢å±‚ç­‰ä»·äºå°†å…ˆéªŒåˆ†å¸ƒçš„æ–¹å·®ä½œä¸ºè®­ç»ƒå‚æ•°ï¼Œè‹¥æ–¹å·®è¶³å¤Ÿå°ï¼Œåˆ™ç»´åº¦å‡ä¸€ï¼Œæš—å«äº†é™ç»´çš„å¯èƒ½ã€‚ REALNVP NICEæ„æ€å·§å¦™ï¼Œä½†åœ¨å®éªŒéƒ¨åˆ†åªæ˜¯é‡‡å–äº†ç®€å•çš„åŠ æ€§è€¦åˆå±‚å’Œå°†å…¨è¿æ¥å±‚è¿›è¡Œç®€å•çš„å †å ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨å·ç§¯ã€‚REALNVPä¸€èˆ¬åŒ–äº†è€¦åˆæ›¾ï¼Œå¹¶åœ¨è€¦åˆæ¨¡å‹ä¸­å¼•å…¥äº†å·ç§¯å±‚ï¼Œä½¿å¾—æ¨¡å‹å¯ä»¥æ›´å¥½åœ°å¤„ç†å›¾åƒé—®é¢˜ã€‚è®ºæ–‡é‡Œè¿˜å¼•å…¥äº†ä¸€ä¸ªå¤šå°ºåº¦ç»“æ„æ¥å¤„ç†ç»´åº¦æµªè´¹é—®é¢˜ã€‚ å°†åŠ æ€§è€¦åˆå±‚æ¢æˆä»¿å°„è€¦åˆå±‚ï¼š h1=x1h2=s(x1)âŠ—x2+t(x1)(x1)\\begin{array}{l} {\\boldsymbol{h}_{1}=\\boldsymbol{x}_{1}} \\\\ {\\boldsymbol{h}_{2}=\\boldsymbol{s}\\left(\\boldsymbol{x}_{1}\\right) \\otimes \\boldsymbol{x}_{2}+t\\left(\\boldsymbol{x}_{1}\\right)\\left(\\boldsymbol{x}_{1}\\right)} \\end{array} h1â€‹=x1â€‹h2â€‹=s(x1â€‹)âŠ—x2â€‹+t(x1â€‹)(x1â€‹)â€‹ ä»¿å°„è€¦åˆå±‚çš„é›…å¯æ¯”è¡Œåˆ—å¼ä»ç„¶æ˜¯ä¸€ä¸ªå¯¹è§’é˜µ [âˆ‚hâˆ‚x]=(IdO[âˆ‚mâˆ‚x1]s)\\left[\\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{x}}\\right]=\\left(\\begin{array}{cc} {\\mathbb{I}_{d}} &amp; {\\mathbb{O}} \\\\ {\\left[\\frac{\\partial m}{\\partial x_{1}}\\right]} &amp; {s} \\end{array}\\right) [âˆ‚xâˆ‚hâ€‹]=(Idâ€‹[âˆ‚x1â€‹âˆ‚mâ€‹]â€‹Osâ€‹) é›…å¯æ¯”è¡Œåˆ—å¼çš„å€¼ä¸å†æ˜¯1ï¼Œæ²¡æœ‰ä¿æŒå˜æ¢å‰åçš„ä½“ç§¯ä¸å˜ã€‚ åœ¨NICEä¸­ï¼Œé€šè¿‡äº¤é”™çš„æ–¹å¼æ¥æ··åˆä¿¡æ¯æµ(ç›´æ¥åè½¬åŸæ¥çš„å‘é‡)ï¼Œåœ¨REALNVPä¸­å‘ç°ï¼šéšæœºæ‰“ä¹±ç»´åº¦å¯ä»¥ä½¿ä¿¡æ¯æ··åˆçš„æ›´åŠ å……åˆ†ã€‚ å¼•å…¥å·ç§¯å±‚ï¼šä½¿ç”¨å·ç§¯çš„æ¡ä»¶æ˜¯å…·æœ‰å±€éƒ¨ç›¸å…³æ€§ï¼Œå› æ­¤æŒ‡å®šå‘é‡çš„æ‰“ä¹±å’Œé‡æ’éƒ½æ˜¯åœ¨channelç»´åº¦ä¸Šè¿›è¡Œï¼Œåœ¨heightå’Œwidthç»´åº¦ä¸Šè¿›è¡Œå·ç§¯ã€‚å¯¹é€šé“çš„åˆ†å‰²è®ºæ–‡é‡Œè¿˜æå‡ºæ£‹ç›˜å¼åˆ†å‰²çš„ç­–ç•¥ï¼Œä½†è¾ƒä¸ºå¤æ‚ï¼Œå¯¹æ¨¡å‹çš„æå‡ä¹Ÿä¸å¤§ï¼Œå› æ­¤åœ¨GLOWä¸­è¢«èˆå¼ƒäº†ã€‚ ä¸€èˆ¬çš„å›¾åƒé€šé“æ•°åªæœ‰ä¸‰å±‚ï¼ŒMNISTç­‰ç°åº¦å›¾åªæœ‰ä¸€å±‚ï¼Œå› æ­¤REALNVPå¼•å…¥äº†squeezeæ“ä½œæ¥å¢åŠ é€šé“æ•°ã€‚ å…¶æ€æƒ³å¾ˆç®€å•ï¼šç›´æ¥ reshapeï¼Œä½† reshape æ—¶å±€éƒ¨åœ°è¿›è¡Œã€‚å…·ä½“æ¥è¯´ï¼Œå‡è®¾åŸæ¥å›¾åƒä¸º hÃ—wÃ—c å¤§å°ï¼Œå‰ä¸¤ä¸ªè½´æ˜¯ç©ºé—´ç»´åº¦ï¼Œç„¶åæ²¿ç€ç©ºé—´ç»´åº¦åˆ†ä¸ºä¸€ä¸ªä¸ª 2Ã—2Ã—c çš„å—ï¼ˆ 2 å¯ä»¥è‡ªå®šä¹‰ï¼‰ï¼Œç„¶åå°†æ¯ä¸ªå—ç›´æ¥ reshape ä¸º 1Ã—1Ã—4cï¼Œæœ€åå˜æˆäº† h/2Ã—w/2Ã—4cã€‚ REALNVPä¸­è¿˜å¼•å…¥äº†ä¸€ä¸ªå¤šå°ºåº¦ç»“æ„ï¼š æœ€ç»ˆçš„è¾“å‡º z1,z3,z5z_1,z_3,z_5z1â€‹,z3â€‹,z5â€‹ æ€ä¹ˆå–ï¼Ÿ p(z1,z3,z5)=p(z1âˆ£z3,z5)p(z3âˆ£z5)p(z5)p\\left(z_{1}, z_{3}, z_{5}\\right)=p\\left(z_{1} | z_{3}, z_{5}\\right) p\\left(z_{3} | z_{5}\\right) p\\left(z_{5}\\right) p(z1â€‹,z3â€‹,z5â€‹)=p(z1â€‹âˆ£z3â€‹,z5â€‹)p(z3â€‹âˆ£z5â€‹)p(z5â€‹) ç”±äº z3,z5z_3,z_5z3â€‹,z5â€‹ æ˜¯ç”± z2z_2z2â€‹ å®Œå…¨å†³å®šçš„ï¼Œz5z_5z5â€‹ ä¹Ÿæ˜¯ç”± z4z_4z4â€‹ å®Œå…¨å†³å®šçš„ï¼Œå› æ­¤æ¡ä»¶éƒ¨åˆ†å¯ä»¥æ”¹ä¸ºï¼š p(z1,z3,z5)=p(z1âˆ£z2)p(z3âˆ£z4)p(z5)p\\left(z_{1}, z_{3}, z_{5}\\right)=p\\left(z_{1} | z_{2}\\right) p\\left(z_{3} | z_{4}\\right) p\\left(z_{5}\\right) p(z1â€‹,z3â€‹,z5â€‹)=p(z1â€‹âˆ£z2â€‹)p(z3â€‹âˆ£z4â€‹)p(z5â€‹) RealNVP å’Œ Glow å‡è®¾å³ç«¯ä¸‰ä¸ªæ¦‚ç‡åˆ†å¸ƒéƒ½æ˜¯æ­£æ€åˆ†å¸ƒï¼Œç±»ä¼¼VAEï¼Œ p(z1âˆ£z2)p(z_1|z_2)p(z1â€‹âˆ£z2â€‹) çš„å‡å€¼æ–¹å·®ç”± z2z_2z2â€‹ ç®—å‡ºæ¥ï¼Œp(z3âˆ£z4)p(z_3|z_4)p(z3â€‹âˆ£z4â€‹) çš„å‡å€¼æ–¹å·®ç”± z4z_4z4â€‹ ç®—å‡ºæ¥ï¼Œp(z5)p(z_5)p(z5â€‹) çš„å‡å€¼æ–¹å·®ç›´æ¥å­¦ä¹ å‡ºæ¥ã€‚è¿™ç›¸å½“äºåšäº†å˜é‡ä»£æ¢ï¼š z^1=z1âˆ’Î¼(z2)Ïƒ(z2),z^3=z3âˆ’Î¼(z4)Ïƒ(z4),z^5=z5âˆ’Î¼Ïƒ\\hat{z}_{1}=\\frac{z_{1}-\\mu\\left(z_{2}\\right)}{\\sigma\\left(z_{2}\\right)}, \\quad \\hat{z}_{3}=\\frac{z_{3}-\\mu\\left(z_{4}\\right)}{\\sigma\\left(z_{4}\\right)}, \\quad \\hat{z}_{5}=\\frac{z_{5}-\\mu}{\\sigma} z^1â€‹=Ïƒ(z2â€‹)z1â€‹âˆ’Î¼(z2â€‹)â€‹,z^3â€‹=Ïƒ(z4â€‹)z3â€‹âˆ’Î¼(z4â€‹)â€‹,z^5â€‹=Ïƒz5â€‹âˆ’Î¼â€‹ ç„¶åè®¤ä¸º [z^1,z^3,z^5][\\hat{z}_1,\\hat{z}_3,\\hat{z}_5][z^1â€‹,z^3â€‹,z^5â€‹]æœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚ç±»ä¼¼NICEï¼Œè¿™ä¸‰ä¸ªå˜æ¢ä¼šå¯¼è‡´ä¸€ä¸ªé1çš„é›…å¯æ¯”è¡Œåˆ—å¼ï¼Œä¹Ÿå°±æ˜¯å¾€lossä¸­åŠ å…¥ Î£i=1Dlogâ¡Ïƒi\\Sigma_{i=1}^{D} \\log \\sigma_{i}Î£i=1Dâ€‹logÏƒiâ€‹ è¿™ä¸€é¡¹ã€‚ å¤šå°ºåº¦ç»“æ„ç›¸å½“äºæŠ›å¼ƒäº† p(z)p(z)p(z) æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„ç›´æ¥å‡è®¾ï¼Œè€Œé‡‡ç”¨äº†ä¸€ä¸ªç»„åˆå¼çš„æ¡ä»¶åˆ†å¸ƒï¼Œè¿™æ ·å°½ç®¡è¾“å…¥è¾“å‡ºçš„æ€»ç»´åº¦ä¾ç„¶ä¸€æ ·ï¼Œä½†æ˜¯ä¸åŒå±‚æ¬¡çš„è¾“å‡ºåœ°ä½å·²ç»ä¸å¯¹ç­‰äº†ï¼Œæ¨¡å‹å¯ä»¥é€šè¿‡æ§åˆ¶æ¯ä¸ªæ¡ä»¶åˆ†å¸ƒçš„æ–¹å·®æ¥æŠ‘åˆ¶ç»´åº¦æµªè´¹é—®é¢˜ï¼ˆæç«¯æƒ…å†µä¸‹ï¼Œæ–¹å·®ä¸º 0ï¼Œé‚£ä¹ˆé«˜æ–¯åˆ†å¸ƒåç¼©ä¸ºç‹„æ‹‰å…‹åˆ†å¸ƒï¼Œç»´åº¦å°±é™ä½ 1ï¼‰ï¼Œæ¡ä»¶åˆ†å¸ƒç›¸æ¯”äºç‹¬ç«‹åˆ†å¸ƒå…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚è€Œå¦‚æœå•çº¯ä» loss çš„è§’åº¦çœ‹ï¼Œå¤šå°ºåº¦ç»“æ„ä¸ºæ¨¡å‹æä¾›äº†ä¸€ä¸ªå¼ºæœ‰åŠ›çš„æ­£åˆ™é¡¹ã€‚ GLOW æ•ˆæœå¥½çš„ä»¤äººæƒŠå¹çš„ç”Ÿæˆæ¨¡å‹ï¼š æ”¹å˜å›¾åƒå±æ€§ é‡‡æ ·å±•ç¤º æ½œåœ¨ç©ºé—´çš„æ’å€¼ æ€»ä½“æ¥è¯´ï¼ŒGLOWå¼•å…¥1*1å¯é€†å·ç§¯æ¥ä»£æ›¿é€šé“ç»´åº¦çš„æ‰“ä¹±å’Œé‡æ’æ“ä½œï¼Œå¹¶å¯¹REALNVPçš„åŸå§‹æ¨¡å‹åšäº†ç®€åŒ–å’Œè§„èŒƒã€‚ å‘é‡ä¹‹é—´çš„å…ƒç´ ç½®æ¢æ“ä½œå¯ä»¥ç”¨ç®€å•çš„è¡Œå˜æ¢çŸ©é˜µæ¥æ“ä½œï¼š (badc)=(0100100000010010)(abcd)\\left(\\begin{array}{l} {b} \\\\ {a} \\\\ {d} \\\\ {c} \\end{array}\\right)=\\left(\\begin{array}{llll} {0} &amp; {1} &amp; {0} &amp; {0} \\\\ {1} &amp; {0} &amp; {0} &amp; {0} \\\\ {0} &amp; {0} &amp; {0} &amp; {1} \\\\ {0} &amp; {0} &amp; {1} &amp; {0} \\end{array}\\right)\\left(\\begin{array}{l} {a} \\\\ {b} \\\\ {c} \\\\ {d} \\end{array}\\right) ââœâœâ›â€‹badcâ€‹â âŸâŸââ€‹=ââœâœâ›â€‹0100â€‹1000â€‹0001â€‹0010â€‹â âŸâŸââ€‹ââœâœâ›â€‹abcdâ€‹â âŸâŸââ€‹ GLOWä¸­ç”¨ä¸€ä¸ªæ›´ä¸€èˆ¬çš„çŸ©é˜µ WWW æ¥ä»£æ›¿è¿™ä¸ªç½®æ¢çŸ©é˜µ h=xWh=xW h=xW è¿™ä¸ªå˜æ¢çš„é›…å¯æ¯”çŸ©é˜µå°±æ˜¯det(W)det(W)det(W)ï¼Œå› æ­¤éœ€è¦å°† âˆ’logâˆ£det(W)âˆ£-log|det(W)|âˆ’logâˆ£det(W)âˆ£ åŠ å…¥åˆ°lossä¸­ï¼ŒWWW çš„åˆå§‹é€‰æ‹©è¦æ±‚å¯é€†ï¼Œä¸å¼•å…¥lossï¼Œå› æ­¤é€‰ä¸ºéšå³æ­£äº¤é˜µã€‚ è¿™ä¸ªå˜æ¢å¼•å…¥äº† det(W)det(W)det(W) çš„è®¡ç®—é—®é¢˜ï¼ŒGLOWä¸­é€†ç”¨LUåˆ†è§£å…‹æœäº†è¿™ä¸ªé—®é¢˜ï¼Œè‹¥ W=PLUW=PLUW=PLU (å…¶ä¸­Pæ˜¯ä¸€ä¸ªç½®æ¢çŸ©é˜µ),åˆ™ logâ¡âˆ£detâ¡Wâˆ£=âˆ‘logâ¡âˆ£diagâ¡(U)âˆ£\\log |\\operatorname{det} W|=\\sum \\log |\\operatorname{diag}(U)| logâˆ£detWâˆ£=âˆ‘logâˆ£diag(U)âˆ£ è¿™å°±æ˜¯GLOWä¸­ç»™å‡ºçš„æŠ€å·§ï¼šå…ˆéšæœºç”Ÿæˆä¸€ä¸ªæ­£äº¤çŸ©é˜µï¼Œç„¶ååš LULULU åˆ†è§£ï¼Œå¾—åˆ° P,L,UP,L,UP,L,Uï¼Œå›ºå®š Pï¼Œä¹Ÿå›ºå®š U çš„å¯¹è§’çº¿çš„æ­£è´Ÿå·ï¼Œç„¶åçº¦æŸ L ä¸ºå¯¹è§’çº¿å…¨ 1 çš„ä¸‹ä¸‰è§’é˜µï¼ŒU ä¸ºä¸Šä¸‰è§’é˜µï¼Œä¼˜åŒ–è®­ç»ƒ L,U çš„å…¶ä½™å‚æ•°ã€‚ æ•´ä¸ªGLOWæ¨¡å‹å¦‚ä¸‹ï¼š å¯¹æ¯” æ¯”è¾ƒåè½¬ã€æ‰“ä¹±å’Œ1*1é€†å·ç§¯çš„lossï¼š ç¼ºç‚¹ æ¨¡å‹åºå¤§ï¼Œå‚æ•°é‡æå¤§ï¼ŒNICEæ¨¡å‹åœ¨MNISTæ•°æ®é›†ä¸Šçš„è®­ç»ƒå‚æ•°å°±å¤§æ¦‚æœ‰ä¸¤åƒä¸‡ä¸ªã€‚ å†è´´ä¸¤ä¸ªGlowæ¨¡å‹åœ¨Gayhub Githubä¸Šçš„issueæ„Ÿå—ä¸‹ï¼š 256*256çš„é«˜æ¸…äººè„¸ç”Ÿæˆï¼Œç”¨ä¸€å—GPUè®­ç»ƒçš„è¯ï¼Œå¤§æ¦‚è¦ä¸€å¹´â€¦â€¦ ä¸€å›¾å¯¹æ¯”GANï¼ŒVAEå’ŒFLOW å‚è€ƒæ–‡çŒ® Variational Inference: A Unified Framework of Generative Models and Some Revelations Tutorial on Variational Autoencoders ç”¨å˜åˆ†æ¨æ–­ç»Ÿä¸€ç†è§£ç”Ÿæˆæ¨¡å‹ï¼ˆVAEã€GANã€AAEã€ALIï¼‰ NICE: Non-linear Independent Components Estimation NOTE_FLOW Glow: Generative Flow with Invertible 1Ã—1 Convolutions ç»†æ°´é•¿flowä¹‹NICEï¼šæµæ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µä¸å®ç° RealNVPä¸Glowï¼šæµæ¨¡å‹çš„ä¼ æ‰¿ä¸å‡å Density estimation using Real NVP","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"/categories/å­¦ä¹ /"}],"tags":[{"name":"gan","slug":"gan","permalink":"/tags/gan/"},{"name":"vae","slug":"vae","permalink":"/tags/vae/"},{"name":"flow","slug":"flow","permalink":"/tags/flow/"}],"keywords":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"/categories/å­¦ä¹ /"}]},{"title":"shellè„šæœ¬","slug":"shellè„šæœ¬","date":"2020-02-10T05:32:00.000Z","updated":"2020-03-09T13:27:53.839Z","comments":true,"path":"2020/02/10/shellè„šæœ¬/","link":"","permalink":"/2020/02/10/shellè„šæœ¬/","excerpt":"","text":"# æŒ‡å®šè§£é‡Šå™¨ #ï¼/bin/bash # å‘çª—å£è¾“å‡ºæ–‡æœ¬ echo \"Hello world!\" printf \"Hello world!\" # forå¾ªç¯ç¤ºä¾‹,ä½¿ç”¨å˜é‡è¦åŠ $ç¬¦å· for file in `ls /etc` do echo \"${file}\" done # åŒå¼•å·å’Œå•å¼•å· # åŒå¼•å·ä¸­å¯ä»¥æœ‰å˜é‡ï¼Œå•å¼•å·ä¸­çš„å˜é‡æ˜¯æ— æ•ˆçš„ # if-elseè¯­å¥ if condition1 then command1 elif condition2 then commed2 else command3 fi","categories":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}],"tags":[{"name":"shell","slug":"shell","permalink":"/tags/shell/"}],"keywords":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}]},{"title":"emacsåŸºæœ¬æ“ä½œ","slug":"Emacsç¬”è®°","date":"2020-02-10T03:16:00.000Z","updated":"2020-03-09T13:27:39.923Z","comments":true,"path":"2020/02/10/Emacsç¬”è®°/","link":"","permalink":"/2020/02/10/Emacsç¬”è®°/","excerpt":"","text":"EmacsåŸºæœ¬æ“ä½œ C = Ctrl, M = Alt å…‰æ ‡ç§»åŠ¨ C-v å‘ä¸‹ç¿»é¡µ M-v å‘ä¸Šç¿»é¡µ C-b å‘å·¦(back) C-f å‘å³(forward) C-n å‘ä¸‹(next) C-p å‘ä¸Š(previous) M-b ä¸Šä¸€ä¸ªå•è¯ M-f ä¸‹ä¸€ä¸ªå•è¯ C-a è¡Œé¦– C-e è¡Œå°¾ M-a å¥é¦– M-e å¥å°¾ M-&lt; æ–‡ä»¶å¤´ M-&gt; æ–‡ä»¶å°¾ M-g g è·³åˆ°æŸä¸€è¡Œ é€‰æ‹©åŒºåŸŸ C-@ æ ‡è®° åˆ é™¤å‰ªåˆ‡å¤åˆ¶ç²˜è´´ C-d å‘ååˆ é™¤(delele) C-k åˆ æ‰å…‰æ ‡åè‡³è¡Œå°¾ M-w å¤åˆ¶åŒºåŸŸ C-w å‰ªåˆ‡/åˆ é™¤åŒºåŸŸ C-y ç²˜è´´ M-y æ»šåŠ¨é€‰æ‹©ç²˜è´´å†…å®¹ æŸ¥æ‰¾æ›¿æ¢ C-s å‘å‰æŸ¥æ‰¾ C-s C-r å‘åæŸ¥æ‰¾ M-% æ›¿æ¢ æ–‡ä»¶æ“ä½œ C-x C-f æ‰“å¼€æ–‡ä»¶(find) C-x C-s ä¿å­˜æ–‡ä»¶(save) C-x C-w å¦å­˜ä¸º(write) C-k å…³é—­æ–‡ä»¶ çª—å£æ“ä½œ C-x b åˆ‡æ¢æ–‡ä»¶ C-x 1 å…³é—­å…¶å®ƒçª—å£ C-x 2/C-x 3 æ‰“å¼€å…¶å®ƒçª—å£ C-x o è·³åˆ°å¦ä¸€ä¸ªçª—å£(other) å…¶å®ƒ C-/ æ’¤é”€ M-$ æ‹¼å†™æ£€æŸ¥ M-x è¾“å…¥å‘½ä»¤ C-g å–æ¶ˆå‘½ä»¤","categories":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}],"tags":[{"name":"emacs","slug":"emacs","permalink":"/tags/emacs/"}],"keywords":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}]},{"title":"ç§‘å­¦ä¸Šç½‘","slug":"ç§‘å­¦ä¸Šç½‘","date":"2020-02-09T03:19:00.000Z","updated":"2020-03-09T13:39:13.379Z","comments":true,"path":"2020/02/09/ç§‘å­¦ä¸Šç½‘/","link":"","permalink":"/2020/02/09/ç§‘å­¦ä¸Šç½‘/","excerpt":"","text":"ç§‘å­¦ä¸Šç½‘ è°·æ­Œä¸Šç½‘åŠ©æ‰‹æ’ä»¶ å¦‚æœåªæ˜¯æƒ³è®¿é—®è°·æ­ŒæœåŠ¡ï¼Œå¯ä»¥ç›´æ¥åœ¨è°·æ­Œæµè§ˆå™¨é‡Œå®‰è£…è°·æ­Œä¸Šç½‘åŠ©æ‰‹æ’ä»¶ã€‚ è¿™ä¸ªæ’ä»¶åªèƒ½è®¿é—®è°·æ­Œæ——ä¸‹ç½‘ç«™ï¼ŒYouTubeç­‰ä¸èƒ½è®¿é—®ã€‚ sshè¿›è¡Œç«¯å£åŠ¨æ€è½¬å‘ # æœ¬åœ°1080ç«¯å£å’ŒæœåŠ¡å™¨åŠ¨æ€è½¬å‘ï¼Œå¯æ·»åŠ å‚æ•°-væ‰“å°ä¸€äº›æ•°æ®æµ $ ssh -D 1080 root@66.152.179.100 # æŸ¥çœ‹ç«¯å£æ˜¯å¦æ‰“å¼€ $ netstat -nat å¯†ç  connect me ssh -Då®¹æ˜“æŠŠVPS idå¼„æ²¡â€¦â€¦ä»…ä½œä¸ºä¸´æ—¶ä½¿ç”¨ï¼Œé•¿æœŸä½¿ç”¨çš„è€è€å®å®æ¢v2rayâ€¦â€¦ ä¸è¦æ”»å‡»æˆ‘çš„æœåŠ¡å™¨è°¢è°¢=_= V2ray ä¸‹è½½å¯¹åº”å®¢æˆ·ç«¯: Windows:Â·v2rayN Mac:v2rayU Linux:v2rayL å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶ï¼Œç„¶åç‚¹å‡»v2rayå®¢æˆ·ç«¯â€”â€”&gt;ä»å‰ªè´´æ¿æ‰¹é‡å¯¼å…¥URL vmess://ewoidiI6ICIyIiwKInBzIjogInVzMjEiLAoiYWRkIjogIjY2LjE1Mi4xNzkuMTAwIiwKInBvcnQiOiAiNTkwMjgiLAoiaWQiOiAiMzZjYzA0MTMtMDYyMC00ZmY3LWI5MmQtNmI5OWJkNmM5MWQzIiwKImFpZCI6ICIyMzMiLAoibmV0IjogInRjcCIsCiJ0eXBlIjogIm5vbmUiLAoiaG9zdCI6ICIiLAoicGF0aCI6ICIiLAoidGxzIjogIiIKfQo= å°†V2rayå®¢æˆ·ç«¯çš„ä»£ç†æ¨¡å¼åˆ‡æ¢ä¸ºPACæ¨¡å¼ï¼Œæœ‰æ—¶å€™æ­¤æ—¶å·²ç»å¯ä»¥æ­£å¸¸è®¿é—®äº’è”ç½‘ï¼Œæœ‰æ—¶å€™ä»ç„¶éœ€è¦é…ç½®æµè§ˆå™¨ç«¯çš„ä»£ç†(å¹¶ä¸æ¸…æ¥šä»€ä¹ˆåŸå› â€¦â€¦)ï¼Œä¸è¿‡è¿˜æ˜¯å»ºè®®é…ç½®ä¸€ä¸‹æµè§ˆå™¨ä»£ç†ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚ é…ç½®æµè§ˆå™¨ä»£ç†è®¾ç½® åœ¨æµè§ˆå™¨ä¸­å®‰è£…Proxy SwitchyOmegaæ‰©å±•ï¼Œæ–°å»ºPACæƒ…æ™¯æ¨¡å¼ï¼Œåœ¨PACç½‘å€ä¸­ç²˜è´´https://raw.githubusercontent.com/breakwa11/gfw_whitelist/master/proxy.pac ç«‹å³æ›´æ–°ï¼Œåº”ç”¨æ›´æ”¹ã€‚ æµè§ˆå™¨åˆ‡æ¢åˆ°ä»£ç†æ¨¡å¼åï¼Œæ­£å¸¸è®¿é—®å¤–ç½‘ã€‚ æ³¨æ„äº‹é¡¹ è°·æ­Œä¸Šç½‘åŠ©æ‰‹å’Œæˆ‘çš„V2rayé…ç½®æ–‡ä»¶éƒ½é€‰ç”¨äº†æœ¬åœ°1080ç«¯å£è¿›è¡Œç›‘å¬ï¼Œåœ¨æµè§ˆå™¨ä¸­åŒæ—¶å¼€å¯Pro SwitchyOmegaæ’ä»¶å’Œè°·æ­Œä¸Šç½‘åŠ©æ‰‹æ’ä»¶å¯èƒ½ä¼šå‘ç”Ÿç«¯å£å†²çªã€‚ è§£å†³æ–¹æ¡ˆ:ä¸¤ä¸ªæ’ä»¶ä¸è¦åŒæ—¶å¼€ï¼Œæˆ–è€…ä¿®æ”¹v2rayé…ç½®æ–‡ä»¶çš„æœ¬åœ°ç«¯å£ã€‚","categories":[{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/categories/å®éªŒå®¤/"}],"tags":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"/tags/æœåŠ¡å™¨/"},{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/tags/å®éªŒå®¤/"},{"name":"ç§‘å­¦ä¸Šç½‘","slug":"ç§‘å­¦ä¸Šç½‘","permalink":"/tags/ç§‘å­¦ä¸Šç½‘/"},{"name":"ç¿»å¢™","slug":"ç¿»å¢™","permalink":"/tags/ç¿»å¢™/"}],"keywords":[{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/categories/å®éªŒå®¤/"}]},{"title":"æœåŠ¡å™¨ä½¿ç”¨tensorboardå’Œvisdom","slug":"æœåŠ¡å™¨ä½¿ç”¨tensorboardå’Œvisdom","date":"2020-01-28T03:27:21.351Z","updated":"2020-03-09T13:25:17.135Z","comments":true,"path":"2020/01/28/æœåŠ¡å™¨ä½¿ç”¨tensorboardå’Œvisdom/","link":"","permalink":"/2020/01/28/æœåŠ¡å™¨ä½¿ç”¨tensorboardå’Œvisdom/","excerpt":"","text":"æœåŠ¡å™¨ä½¿ç”¨tensorboardå’Œvisdom ä»¥tensorboardä¸ºä¾‹ï¼š åˆ›å»ºå®¹å™¨æ—¶å¼€æ”¾6006ç«¯å£ # è¿è¡Œå®¹å™¨æ—¶å°†æœåŠ¡å™¨dockerå®¹å™¨çš„6006ç«¯å£æš´æ¼åˆ°è‡ªå·±ä¸»æœºipä¸‹çš„16006ç«¯å£(å¯è‡ªå·±æŒ‡å®š) $ docker run -p &lt;ip&gt;:16006:6006 -it -v /data:/workspace/data --runtime=nvidia --net=host --name=temp /bin/bash æˆ–è€… # åœ¨è¿æ¥sshæ—¶ï¼Œå°†dockerå®¹å™¨ä¸­çš„6006ç«¯å£é‡æ–°å®šå‘åˆ°è‡ªå·±æœºå™¨ä¸Š $ ssh -p 1001 -L 16006:&lt;ip&gt;:6006 root@10.7.60.40","categories":[{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/categories/å®éªŒå®¤/"}],"tags":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"/tags/æœåŠ¡å™¨/"},{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/tags/å®éªŒå®¤/"}],"keywords":[{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/categories/å®éªŒå®¤/"}]},{"title":"æœåŠ¡å™¨ä½¿ç”¨è¯¦ç»†æ•™ç¨‹","slug":"æœåŠ¡å™¨ä½¿ç”¨è¯´æ˜","date":"2020-01-24T03:38:00.000Z","updated":"2020-03-09T13:19:27.967Z","comments":true,"path":"2020/01/24/æœåŠ¡å™¨ä½¿ç”¨è¯´æ˜/","link":"","permalink":"/2020/01/24/æœåŠ¡å™¨ä½¿ç”¨è¯´æ˜/","excerpt":"","text":"æœåŠ¡å™¨ä½¿ç”¨è¯´æ˜ é€šçŸ¥å…¬å‘ŠåŒº æœåŠ¡å™¨ipï¼š 10.7.37.62 10.7.60.40 10.7.40.145 å¯¹åº”portainerç•Œé¢åœ°å€ï¼š 10.7.37.62:9000 10.7.60.40:9000 10.7.40.145:9000 å…¬å‘Šï¼š ç¬¬ä¸‰å°æœåŠ¡å™¨è²Œä¼¼ä¹Ÿæ–­ç½‘äº†â€¦â€¦â€¦â€¦ ç¬¬ä¸€å°æœåŠ¡å™¨å·²æ–­ç½‘ï¼Œå‡æœŸæœŸé—´å…ˆä½¿ç”¨ç¬¬äºŒå°å’Œç¬¬ä¸‰å°æœåŠ¡å™¨ openpaiçš„é›†æˆç®¡ç†æ²¡è£…ä¸Šï¼Œæ”¹ç”¨portaine+è‡ªå·±å¼€æ”¾ç«¯å£çš„å½¢å¼ å·²å®‰è£…çš„é•œåƒ:cuda10:condaï¼Œå†…å«anacondaï¼Œcuda8åŠå…¶å®ƒç‰ˆæœ¬å¾…å®‰è£… æ•°æ®æ”¾åœ¨æœåŠ¡å™¨çš„/dataç›®å½•ä¸‹ï¼Œåœ¨å®¹å™¨å†…çš„ä½ç½®æ˜¯/workspace/data portainerç™»å½•çš„å¸å·å¯†ç ä¸ºè‡ªå·±åå­—é¦–å­—æ¯ï¼Œä¾‹ï¼šybb ä½¿ç”¨æ•™ç¨‹åŒº vpnå®‰è£… è¿æ¥æœåŠ¡å™¨éœ€è¦æ ¡å›­å†…ç½‘ç¯å¢ƒï¼Œåœ¨å®¶éœ€è¦è¿æ¥vpnè®¿é—® ç›®å‰å­¦æ ¡çš„vpnä»…å¯¹è€å¸ˆå’Œåšå£«å¼€æ”¾ï¼Œç ”ç©¶ç”Ÿå¯ä»¥æ‰¾å¸ˆå…„å¸ˆå§ä»¬å€Ÿä¸ªè´¦å· è´¦å·å¯†ç ä¸ºæ ¡å›­é—¨æˆ·çš„è´¦å·å¯†ç  å®‰è£…è¿‡ç¨‹è¯¦è§Reference å®¹å™¨åˆ›å»º ç™»å…¥portainerç•Œé¢ è¾“å…¥nvidia-smiæŸ¥çœ‹å¯ç”¨çš„æ˜¾å¡ ç«¯å£å¼€æ”¾ vim /etc/ssh/sshd_config å–æ¶ˆPortè¡Œçš„æ³¨é‡Šï¼Œä¿®æ”¹ä¸ºè‡ªå·±çš„ç«¯å£å·ï¼Œ åŒä¸€å°æœåŠ¡å™¨ç«¯å£å·ä¸è¦é‡å¤ï¼ ä¿å­˜å service ssh restart passwd ä¿®æ”¹ç™»å½•å¯†ç  ä¸ºé˜²æ­¢ç«¯å£å·é‡å¤ï¼Œè¯·ä½¿ç”¨è‡ªå·±çš„ç«¯å£ ç½—é‡‘é“­ 1001â€” 1050 ç”°èƒœæ™¯ 1051â€” 1100 å‘¨éª 1101â€” 1150 è°­çº¢è‡£ 1151â€” 1200 å­”é›¨ç§‹ 1201â€” 1250 é™ˆå®ç‰ 1251â€” 1300 å¼ æ€¡ 1301â€” 1350 ç”°å›½å¼º 1351â€” 1400 ç‹åèƒœ 1401â€” 1450 ç‹è¯—ç‘¶ 1451â€” 1500 é»„éª… 1501â€” 1550 äºå†°å†° 1551â€” 1600 åç‘œæ˜Š 1601â€” 1650 è–›æ€¡ 1651â€” 1700 è‚–è´ºæ–‡ 1701â€” 1750 ç‹è‰ºè·¯ 1751â€” 1800 é™ˆå¿ƒæ…§ 1801â€” 1850 è–›é’°æ´ 1851â€” 1900 å¾å­æ¶µ 1901â€” 1950 åˆ˜æ–Œ 1951â€” 2000 è°ƒç”¨æœåŠ¡å™¨è¿è¡Œç¨‹åº è¿æ¥ï¼š # portä¸ºè‡ªå·±çš„ç«¯å£å· $ ssh -p port root@10.7.60.40 åœ¨æœåŠ¡å™¨ä¸­ç”¨condaå»ºç«‹è‡ªå·±éœ€è¦çš„ç¯å¢ƒï¼Œæ¿€æ´»ç¯å¢ƒï¼š $ source activate env_name æ–‡ä»¶æ‹·è´ # æ‹·è´æ–‡ä»¶å¤¹éœ€è¦æ·»åŠ å‚æ•°-r # ç”µè„‘ä¸­çš„æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­ï¼Œportä¸ºç«¯å£å· $ scp -P port /dir/filename root@10.7.60.40:/dir # å®¹å™¨ä¸­çš„æ–‡ä»¶æ‹·è´åˆ°ç”µè„‘ä¸Š $ scp -P port root@10.7.60.40:/dir/filename /dir å¯ä»¥å°†ä»£ç æ‹·è´åˆ°æœåŠ¡å™¨å†…ï¼Œåœ¨å®¹å™¨ä¸­ç”¨å‘½ä»¤è¿è¡Œç¨‹åºï¼Œç”¨vimä¿®æ”¹ä»£ç æˆ–æœ¬åœ°æ”¹å¥½ä»£ç åå°†ä»£ç ä¼ åˆ°æœåŠ¡å™¨ä¸Š ä¹Ÿå¯ä»¥ç”¨Pycharm(å¿…é¡»è¦ä¸“ä¸šç‰ˆ)åŒæ­¥æœ¬åœ°å’Œå®¹å™¨ä¸­çš„ä»£ç  File--&gt;Settings--&gt;Project--&gt;Project InterPreter--&gt;å°é½¿è½®--&gt;Add--&gt;SSH Interpreter Pycharmè¿æ¥æœåŠ¡å™¨ç»ˆç«¯: Tools--&gt;Start SSH session--&gt;é€‰æ‹© æœ‰å…¶ä»–é—®é¢˜connect me å…¶ä»–å†…å®¹å¾…è¡¥å……","categories":[{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/categories/å®éªŒå®¤/"}],"tags":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"/tags/æœåŠ¡å™¨/"}],"keywords":[{"name":"å®éªŒå®¤","slug":"å®éªŒå®¤","permalink":"/categories/å®éªŒå®¤/"}]},{"title":"dockeråŸºæœ¬ä½¿ç”¨","slug":"dockerä½¿ç”¨","date":"2020-01-19T12:48:00.000Z","updated":"2020-03-09T13:17:56.659Z","comments":true,"path":"2020/01/19/dockerä½¿ç”¨/","link":"","permalink":"/2020/01/19/dockerä½¿ç”¨/","excerpt":"","text":"DockeråŸºæœ¬ä½¿ç”¨ dockerå’Œnvidia-docker å®‰è£… ç•¥ å®‰è£…åæŸ¥çœ‹å®‰è£…ä¿¡æ¯å’Œæµ‹è¯•dockeræ˜¯å¦å®‰è£…æ­£ç¡® $ sudo docker --version $ sudo docker run hello-world # éªŒè¯nvidia-docker $ docker run --runtime=nvidia --rm nvidia/cuda nvidia-smi docker hub é“¾æ¥:dockerhub åœ¨dockerhubä¸Šæœç´¢è‡ªå·±éœ€è¦çš„é•œåƒ é€‰æ‹©è‡ªå·±è¦ç”¨çš„é•œåƒï¼Œç‚¹è¿›å»ï¼Œç‚¹Tagsä¼šå‡ºç°ä¸åŒçš„ç‰ˆæœ¬ å¤åˆ¶å‘½ä»¤ï¼Œåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼Œå°±å¯ä»¥å°†é•œåƒä¸‹è½½åˆ°æœ¬åœ° dockeråŸºæœ¬å‘½ä»¤ # æŸ¥çœ‹ä¸»æœºä¸‹æœ‰å¤šå°‘é•œåƒ $ sudo docker images # åˆ é™¤é•œåƒ $ sudo docker rmi &lt;image_id&gt; # æŸ¥çœ‹ä¸»æœºä¸‹çš„å®¹å™¨,ä¸åŠ -aè¡¨ç¤ºæŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ $ sudo docker ps -a # å¯åŠ¨ã€é‡å¯å’Œåœæ­¢å®¹å™¨ $ sudo docker start/restart/stop &lt;container_id&gt; # è¿›å…¥å®¹å™¨ $ sudo docker attach &lt;container_id&gt; # åˆ é™¤å®¹å™¨(éœ€è¦å…ˆåœæ­¢å®¹å™¨) $ sudo docker rm &lt;container_id&gt; ctrl+dé€€å‡ºå¹¶åœæ­¢å®¹å™¨ï¼Œctrl+p+qé€€å‡ºä½†ä¸åœæ­¢å®¹å™¨ æ ¹æ®é•œåƒæ–°å»ºå¹¶å¯åŠ¨å®¹å™¨ $ sudo docker run -it [options] &lt;image_id&gt; bash è¯´æ˜ï¼š-itä¸ºä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªè¾“å…¥ç»ˆç«¯ï¼Œä»¥äº¤äº’å¼æ¨¡å¼è¿è¡Œ,bashä¸ºè°ƒç”¨é•œåƒé‡Œçš„bash å¯é€‰é€‰é¡¹ï¼š --name ä¸ºå®¹å™¨æŒ‡å®šåå­— -p ç«¯å£æ˜ å°„ -v ç»™å®¹å™¨æŒ‚è½½å­˜å‚¨å· --net æŒ‡å®šå®¹å™¨ç½‘ç»œ --runtime=nvidia å¯è°ƒç”¨gpu ä¾‹å¦‚ï¼š $ sudo docker run -it -p 8022:22 --name=tensorflow --runtime=nvidia -v /home/yu/code:/home --net=host ufoym/deepo bash åˆ é™¤æ‰€æœ‰é•œåƒå’Œå®¹å™¨ $ sudo docker rmi `sudo docker images -q` $ sudo docker rm `sudo docker ps -a -q` å¯¼å‡ºå®¹å™¨å’Œä¿å­˜åŠ è½½é•œåƒ å®¹å™¨å¯¼å‡ºä¸ºé•œåƒ # å®¹å™¨å¯¼å‡ºä¸ºé•œåƒ $ docker commit &lt;continer_name&gt; &lt;image_name&gt; # é•œåƒå¯¼å‡ºä¸ºæ–‡ä»¶ $ docker save image_name&gt; /dir/name.tar # æ–‡ä»¶å¯¼å…¥ä¸ºé•œåƒ $ docker load &lt; /dir/filename dockerå’Œå®¿ä¸»æœºçš„æ–‡ä»¶æ‹·è´ $ docker cp &lt;container_name&gt;:/dir/filename /hostdir/ $ docker cp /hostdir/filename &lt;container_name&gt;:/dir ä¸ç®¡å®¹å™¨æœ‰æ²¡æœ‰å¯åŠ¨ï¼Œæ‹·è´å‘½ä»¤éƒ½ä¼šç”Ÿæ•ˆ","categories":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}],"tags":[{"name":"docker","slug":"docker","permalink":"/tags/docker/"}],"keywords":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}]},{"title":"OpenPAIå®‰è£…è®°å½•","slug":"OpenPaiå®‰è£…è®°å½•","date":"2020-01-16T02:48:00.000Z","updated":"2020-03-09T13:40:39.587Z","comments":true,"path":"2020/01/16/OpenPaiå®‰è£…è®°å½•/","link":"","permalink":"/2020/01/16/OpenPaiå®‰è£…è®°å½•/","excerpt":"","text":"OpenPAIå®‰è£…è®°å½• ç¯å¢ƒå‡†å¤‡ ä¸€å°masterä¸»æœºå’Œå¤šå°workerä¸»æœºï¼Œä¸€å°ç»´æŠ¤æœº æ‰€æœ‰èŠ‚ç‚¹ä¸è¦å®‰è£…CUDAé©±åŠ¨ï¼Œå…·æœ‰ç»Ÿä¸€çš„ç™»å½•è´¦æˆ·å’Œå¯†ç  å¼€å¯sshåŠŸèƒ½å’ŒntpåŠŸèƒ½(äº’ç›¸è®¿é—®ï¼Œæ—¶é—´åŒæ­¥) éƒ¨ç½²è¿‡ç¨‹ å®‰è£…docker-ce $ sudo apt-get -y install docker.io $ sudo docker pull docker.io/openpai/dev-box:v0.14.0 è¿è¡Œdev-box $ sudo docker run -itd \\ -e COLUMNS=$COLUMNS -e LINES=$LINES -e TERM=$TERM \\ -v /var/run/docker.sock:/var/run/docker.sock \\ -v /pathConfiguration:/cluster-configuration \\ -v /hadoop-binary:/hadoop-binary \\ --pid=host \\ --privileged=true \\ --net=host \\ --name=dev-box \\ docker.io/openpai/dev-box:v0.14.0 ç™»å½•dev-box $ sudo docker exec -it dev-box /bin/bash $ cd /pai/deployment/quick-start/ ä¿®æ”¹é…ç½®ä¿¡æ¯ $ cp quick-start-example.yaml quick-start.yaml $ vim quick-start.yaml ä¿®æ”¹å†…å®¹ï¼š machines: - &lt;ip-of-master&gt; - &lt;ip-of-worker1&gt; - &lt;ip-of-worder2&gt; ssh-username: &lt;username&gt; ssh-password: &lt;password&gt; ç”ŸæˆOepnPaié…ç½®æ–‡ä»¶ $ cd /pai $ python paictl.py config generate -i /pai/deployment/quick-start/quick-start.yaml -o ~/pai-config -f $ cd ~/pai-config/ ä¿®æ”¹kubernetes-configuration.yaml å°†docker-registryæ›¿æ¢ä¸ºå›½å†…é•œåƒåº“ docker-registry: docker.io/mirrorgooglecontainers ä¿®æ”¹layout.yaml ä¿®æ”¹è‡ªå·±æœºå™¨çš„é…ç½®ä¿¡æ¯ machine-sku: GENERIC: mem: 256G gpu: type: TITAN V count: 1 cpu: vcore: 4 os: ubuntu16.04 Worker1: mem: 256G gpu: type: GeForce RTX 2080Ti count: 4 cpu: vcore: 4 os: ubuntu16.04 Worker2: mem: 256G gpu: type: GeForce RTX 2080Ti count: 4 cpu: vcore: 4 os: ubuntu16.04 ä¿®æ”¹services-configuration.yaml è§£é™¤commonå’Œdata-pathä¸¤ä¸ªå­—æ®µçš„æ³¨é‡Šï¼Œå°†data-pathèµ‹å€¼åˆ°çœŸå®ä½ç½®ï¼Œä½œä¸ºæœåŠ¡æ•°æ®å­˜å‚¨è·¯å¾„ cluster: common: # cluster-id: pai-example # # # HDFS, zookeeper data path on your cluster machine. data-path: \"/data\" tagå­—æ®µä¿®æ”¹ä¸ºçœŸå®ç‰ˆæœ¬ v014.0 å¯ä¿®æ”¹cluster-id,åé¢ä¼šç”¨åˆ° ä¿®æ”¹rest-serverä¸‹çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œä½œä¸ºç™»å½•å¹³å°çš„è´¦æˆ·å¯†ç  æŒ‡å®šæ˜¾å¡é©±åŠ¨ç‰ˆæœ¬ï¼Œä¸æŒ‡å®šçš„è¯é»˜è®¤å®‰è£…384.11ï¼Œè¿™ä¸ªé©±åŠ¨æ˜¯ä¸æ”¯æŒå›¾çµæ ¸å¿ƒæ˜¾å¡çš„ï¼Œå®‰è£…åˆ°åé¢ä¼šå‡ºç°â€™nvidia-drmâ€™ not found é”™è¯¯ï¼Œé©±åŠ¨ç‰ˆæœ¬åªèƒ½ä»æ³¨é‡Šé‡Œçš„ç‰ˆæœ¬é€‰æ‹© drivers: set-nvidia-runtime: false # You can set drivers version here. If this value is miss, default value will be 384.111 # Current supported version list # 384.111 # 390.25 # 410.73 version: \"410.73\" éƒ¨ç½²Kubernetes http::9090æŸ¥çœ‹è¿›åº¦ $ cd /pai $ python paictl.py cluster k8s-bootup -p ~/pai-config æ›´æ”¹é…ç½®æ–‡ä»¶åˆ°kubernetes $ cd /pai python paictl.py config push -p ~/pai-config/ -c ~/.kube/config è‹¥æŠ¥é”™ï¼Œå¸è½½openpaiç»„ä»¶å’Œksç»„ä»¶ï¼Œæ£€æŸ¥ä¹‹å‰çš„é…ç½®æ–‡ä»¶ï¼Œé‡æ–°å®‰è£… $ python paictl.py service [delete|start|stop] -c ~/.kube/config [-n name] # å¸è½½openpaiç»„ä»¶ $ python paictl.py service delete -c ~/.kube/config # å¸è½½k8sç»„ä»¶ $ python paictl.py cluster k8s-clean -p ~/pai-config/ å¯åŠ¨Openpai $ python paictl.py service start -c ~/.kube/config ç•Œé¢ http://&lt;master-ip&gt;:9090 http://&lt;master-ip&gt;:80 Reference https://github.com/kangapp/openPAI https://github.com/microsoft/pai https://zhuanlan.zhihu.com/p/64061072","categories":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}],"tags":[{"name":"openpai","slug":"openpai","permalink":"/tags/openpai/"}],"keywords":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}]},{"title":"NVIDIA,CUDA,CUDNN,Anaconda","slug":"Ubuntuå‘½ä»¤è®°å½•","date":"2020-01-11T12:32:00.000Z","updated":"2020-03-09T13:16:03.363Z","comments":true,"path":"2020/01/11/Ubuntuå‘½ä»¤è®°å½•/","link":"","permalink":"/2020/01/11/Ubuntuå‘½ä»¤è®°å½•/","excerpt":"","text":"NVIDIA,CUDA,CUDNN ppaå®‰è£…NVIDIAé©±åŠ¨ $ sudo add-apt-repository ppa:graphics-drivers/ppa $ sudo apt-get update $ ubuntu-drivers devices $ sudo apt-get install nvidia-driver-xxx è‡ªåŠ¨å®‰è£…NVIDIAé©±åŠ¨ # å¸è½½æ®‹ä½™é©±åŠ¨ sudo apt-get --purge remove \"*nvidia*\" # æŸ¥çœ‹æ¨èé©±åŠ¨ç‰ˆæœ¬ ubuntu-drivers devices # è‡ªåŠ¨å®‰è£… sudo ubuntu-drivers autoinstall .debå®‰è£…CUDA ä¸‹è½½debæ–‡ä»¶ $ sudo dpkg -i cuda-repo-ubuntu1604-10-0-local-10.0.130-410.48_1.0-1_amd64.deb $ sudo apt-get update $ sudo apt-get install cuda å®‰è£…CUDNN ä¸‹è½½ç¬¦åˆè‡ªå·±cudaç‰ˆæœ¬çš„cudnn å®‰è£…cudnn å®‰è£…è¿‡ç¨‹å®é™…æ˜¯å°†cudnnçš„å¤´æ–‡ä»¶å¤åˆ¶åˆ°CUDAçš„å¤´æ–‡ä»¶ç›®å½•é‡Œ $ sudo cp cuda/include/* /usr/local/cuda-10.0/include/ $ sudo cp cuda/lib64/* /usr/local/cuda-10.0/lib64/ # æ·»åŠ å¯æ‰§è¡Œæƒé™ $ sudo chmod +x /usr/local/cuda-10.0/include/cudnn.h $ sudo chmod +x /usr/local/cuda-10.0/lib64/libcudnn* æ£€éªŒ $ cat /usr/local/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2 æŒ‡å®šè¿è¡Œç¨‹åºä½¿ç”¨çš„GPU åœ¨ç¨‹åºä¸­æ·»åŠ  import os os.environ['CUDA_VISIBLE_DEVICES]='0' æˆ–è€…åœ¨ç»ˆç«¯ä¸­ $ CUDA_VISIBLE_DEVICES=0 python main.py å‘½ä»¤è¡Œå®‰è£…Anaconda $ wget https://repo.continuum.io/archive/Anaconda3-5.0.1-Linux-x86_64.sh $ bash Anaconda3-5.0.1-Linux-x86_64.sh # æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå¯é€‰ $ echo 'export PATH=\"~/anaconda3/bin:$PATH\"' &gt;&gt; ~/.bashrc $ source .bashrc","categories":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}],"tags":[{"name":"nvidia","slug":"nvidia","permalink":"/tags/nvidia/"},{"name":"cuda","slug":"cuda","permalink":"/tags/cuda/"},{"name":"cudnn","slug":"cudnn","permalink":"/tags/cudnn/"},{"name":"anaconda","slug":"anaconda","permalink":"/tags/anaconda/"}],"keywords":[{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","permalink":"/categories/çæŠ˜è…¾/"}]},{"title":"å®‰åˆ©","slug":"å®‰åˆ©åŒº","date":"2020-01-11T02:48:00.000Z","updated":"2020-03-09T13:05:16.903Z","comments":true,"path":"2020/01/11/å®‰åˆ©åŒº/","link":"","permalink":"/2020/01/11/å®‰åˆ©åŒº/","excerpt":"","text":"ä¸€äº›è½¯ä»¶ softdownloader: ä¸€æ¬¾å¸ƒå±€æ¸…çˆ½çš„ä¸‹è½½å·¥å…· Fences: æ¡Œé¢ç®¡ç†å·¥å…· copytranslator: ä¸€æ¬¾ç¿»è¯‘è½¯ä»¶ å¤©è‹¥OCRæ–‡å­—è¯†åˆ« Snipaste: ä¸€æ¬¾ç®€æ´çš„æˆªå›¾å’Œè´´å›¾è½¯ä»¶ Mathpix: æ¯ä¸ªæœˆ50æ¬¡è¯†åˆ«æ¬¡æ•°ï¼Œå¿«é€Ÿè¯†åˆ«å›¾ç‰‡ä¸­çš„å…¬å¼ï¼Œè½¬åŒ–ä¸º LaTeX\\LaTeXLATEâ€‹X æ ¼å¼ Windows çš„å†…ç½® Liunx ç³»ç»Ÿï¼Œæ”¯æŒ Linux å‘½ä»¤ TexStudio + Texlive ç¼–è¾‘LaTeX\\LaTeXLATEâ€‹Xå…¬å¼ Axmath: ä¸ªäººæ„Ÿè§‰ä¼˜äºmathtype, Officeä¸­çš„å…¬å¼ç¼–è¾‘å™¨ äº¿å¯»:ç™¾åº¦äº‘ç ´è§£é™é€Ÿ Googleæµè§ˆå™¨æ’ä»¶ momentum: æµè§ˆå™¨å£çº¸æ ‡ç­¾é¡µ LastPass: å¯†ç è®°å½•æ’ä»¶ SwitchyOmega: æµè§ˆå™¨ä»£ç†æ’ä»¶ OneTab: æ ‡ç­¾é¡µç®¡ç† ä¸€é”®ç®¡ç†æ‰©å±•: ç®¡ç†æ‰€æœ‰æ’ä»¶ AdblockPlus: å¼ºçƒˆå®‰åˆ©ï¼Œæ‹¦æˆªå¹¿å‘Š Read Viewer: ç½‘é¡µé˜…è¯»æ¨¡å¼ åˆ’è¯ç¿»è¯‘ Tampermonkey:ä¼ è¯´ä¸­çš„æ²¹çŒ´","categories":[{"name":"å®‰åˆ©","slug":"å®‰åˆ©","permalink":"/categories/å®‰åˆ©/"}],"tags":[{"name":"å®‰åˆ©","slug":"å®‰åˆ©","permalink":"/tags/å®‰åˆ©/"}],"keywords":[{"name":"å®‰åˆ©","slug":"å®‰åˆ©","permalink":"/categories/å®‰åˆ©/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-01-11T02:16:02.000Z","updated":"2020-03-09T13:37:22.679Z","comments":true,"path":"2020/01/11/hello-world/","link":"","permalink":"/2020/01/11/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post $ hexo new \"My New Post\" More info: Writing Run server $ hexo server More info: Server Generate static files $ hexo generate More info: Generating Deploy to remote sites $ hexo deploy More info: Deployment","categories":[{"name":"å…¶å®ƒ","slug":"å…¶å®ƒ","permalink":"/categories/å…¶å®ƒ/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"/tags/hexo/"}],"keywords":[{"name":"å…¶å®ƒ","slug":"å…¶å®ƒ","permalink":"/categories/å…¶å®ƒ/"}]}]}